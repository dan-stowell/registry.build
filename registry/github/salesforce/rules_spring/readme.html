<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Salesforce Spring Rules for Bazel</h2><a id="user-content-salesforce-spring-rules-for-bazel" class="anchor" aria-label="Permalink: Salesforce Spring Rules for Bazel" href="#salesforce-spring-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repository contains the <a href="https://spring.io/guides/gs/spring-boot/" rel="nofollow">Spring Boot</a> rule
for the <a href="https://bazel.build/" rel="nofollow">Bazel</a> build system.
It enables Bazel to build Spring Boot applications and package them as an executable jar file.
The executable jar is the best way to deploy your Spring Boot application in production environments.</p>
<p dir="auto">The Salesforce <em>springboot</em> rule can be found, along with documentation, in this directory:</p>
<ul dir="auto">
<li><a href="springboot">springboot</a>: a Bazel extension to build and package Spring Boot applications</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Support and Ongoing Development</h3><a id="user-content-support-and-ongoing-development" class="anchor" aria-label="Permalink: Support and Ongoing Development" href="#support-and-ongoing-development"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule was developed and is supported by Salesforce.
If you have any issues with this repository, please create a <a href="https://github.com/salesforce/rules_spring/issues">GitHub Issue</a>.
We will try to quickly address problems and answer questions.
Note that we do not yet officially support running these <a href="https://github.com/salesforce/rules_spring/issues/25" data-hovercard-type="issue" data-hovercard-url="/salesforce/rules_spring/issues/25/hovercard">rules on Windows</a> but some users have gotten it to work.</p>
<p dir="auto">Ongoing development is planned and tracked using this GitHub repository's <a href="https://github.com/salesforce/rules_spring/issues">Issues list</a>.
To see what bug fixes and new features are planned, consult the backlog located there.
Generally, we prioritize based on our internal requirements at Salesforce, but if you need something
please post a comment on the issue and that will help us prioritize.
To see what features/fixes were delivered in a particular release, use the release
<a href="https://github.com/salesforce/rules_spring/issues/labels">version labels</a> and filter on Closed issues.
<a href="https://github.com/salesforce/rules_spring/issues?q=label%3A2.6.1+is%3Aclosed">(example)</a>.</p>
<p dir="auto"><img class="emoji" title=":octocat:" alt=":octocat:" src="https://github.githubassets.com/images/icons/emoji/octocat.png" height="20" width="20" align="absmiddle"> Please do us a <strong>huge favor</strong>. If you think this project could be useful for you, now or in the future,
please hit the <strong>Star</strong> button at the top. That helps us advocate for more time and resources on this project. Thanks!</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Loading the Spring Rules in your WORKSPACE</h3><a id="user-content-loading-the-spring-rules-in-your-workspace" class="anchor" aria-label="Permalink: Loading the Spring Rules in your WORKSPACE" href="#loading-the-spring-rules-in-your-workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Before you can use the rule in your BUILD files, you need to add it to your workspace.</p>
<p dir="auto"><strong>Bzlmod</strong></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_spring&quot;, version = &quot;2.6.3&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_spring"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"2.6.3"</span>)</pre></div>
<p dir="auto"><strong>WORKSPACE (legacy)</strong></p>
<p dir="auto">This loads a pre-built version of this rule into your workspace during the build.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="http_archive(
    name = &quot;rules_spring&quot;,
    sha256 = &quot;2d0805b4096db89b8e407ed0c243ce81c3d20f346e4c259885041d5eabc59436&quot;,
    urls = [
        &quot;https://github.com/salesforce/rules_spring/releases/download/2.6.3/rules-spring-2.6.3.zip&quot;,
    ],
)"><pre><span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_spring"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"2d0805b4096db89b8e407ed0c243ce81c3d20f346e4c259885041d5eabc59436"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"https://github.com/salesforce/rules_spring/releases/download/2.6.3/rules-spring-2.6.3.zip"</span>,
    ],
)</pre></div>
<p dir="auto">If you choose not to use an official release, you may be tempted to use a <em>git_repository</em> workspace
rule to point to our <em>main</em> branch,
Please <strong>do not</strong> do this, as we use <em>main</em> for ongoing work.
We may check breaking changes into <em>main</em> at any time.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Upgrading to Spring Boot 3</h3><a id="user-content-upgrading-to-spring-boot-3" class="anchor" aria-label="Permalink: Upgrading to Spring Boot 3" href="#upgrading-to-spring-boot-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is largely outside the scope of <em>rules_spring</em>.
You will need to update your dependencies in your <em>maven_install</em> rules, of course.
But there are <a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide">a ton of other steps</a>.
Salesforce has some <a href="https://github.com/salesforce/rules_spring/issues/230" data-hovercard-type="issue" data-hovercard-url="/salesforce/rules_spring/issues/230/hovercard">docs/tools that will help</a> for Bazel users.</p>
<p dir="auto">The one change that you will need to make for <em>rules_spring</em> is to choose the Boot3 launcher class.
This is because Boot rewrote the launcher for Boot3 and it is available under a different name.
The Boot2 launcher is the default for <em>rules_spring</em> so as not to break backwards compatibility.</p>
<p dir="auto">Example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="springboot(
    name = &quot;helloworld_boot3&quot;,
    boot_app_class = &quot;com.sample.SampleMain&quot;,
    java_library = &quot;:helloworld_lib&quot;,

    # SPRING BOOT 3
    # The launcher class changed in Spring Boot 3.2.0, so we provide the
    # Boot3 launcher class here (the Boot2 one is the default)
    boot_launcher_class = 'org.springframework.boot.loader.launch.JarLauncher',
)"><pre><span class="pl-en">springboot</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"helloworld_boot3"</span>,
    <span class="pl-s1">boot_app_class</span> <span class="pl-c1">=</span> <span class="pl-s">"com.sample.SampleMain"</span>,
    <span class="pl-s1">java_library</span> <span class="pl-c1">=</span> <span class="pl-s">":helloworld_lib"</span>,

    <span class="pl-c"># SPRING BOOT 3</span>
    <span class="pl-c"># The launcher class changed in Spring Boot 3.2.0, so we provide the</span>
    <span class="pl-c"># Boot3 launcher class here (the Boot2 one is the default)</span>
    <span class="pl-s1">boot_launcher_class</span> <span class="pl-c1">=</span> <span class="pl-s">'org.springframework.boot.loader.launch.JarLauncher'</span>,
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Appendix: Alternate Approach for Building and Running Spring Boot Applications</h3><a id="user-content-appendix-alternate-approach-for-building-and-running-spring-boot-applications" class="anchor" aria-label="Permalink: Appendix: Alternate Approach for Building and Running Spring Boot Applications" href="#appendix-alternate-approach-for-building-and-running-spring-boot-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you don't need to create a runnable executable jar file, there is an alternate approach to Spring Boot
in the <em>rules_jvm_external</em> repository.
That approach is sufficient if Bazel and your Bazel workspace (i.e. source code) are available in
all environments that launch the application.</p>
<ul dir="auto">
<li><a href="https://github.com/bazelbuild/rules_jvm_external/tree/master/examples/spring_boot">rules_jvm_external Spring Boot example</a></li>
</ul>
<p dir="auto">At Salesforce, Bazel is not available in production environments, and so this alternate approach is not viable.</p>
</article></div>