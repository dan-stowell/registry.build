<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://github.com/mvukov/rules_ros2/actions/workflows/main.yml"><img src="https://github.com/mvukov/rules_ros2/actions/workflows/main.yml/badge.svg?branch=main" alt="CI" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Bazel rules for ROS 2</h1><a id="user-content-bazel-rules-for-ros-2" class="anchor" aria-label="Permalink: Bazel rules for ROS 2" href="#bazel-rules-for-ros-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repo provides functionality to build and use ROS 2 with Bazel.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Prerequisites</h2><a id="user-content-prerequisites" class="anchor" aria-label="Permalink: Prerequisites" href="#prerequisites"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You will need to install Bazel, see <a href="https://docs.bazel.build/versions/master/install.html" rel="nofollow">here</a>.
Besides Bazel, you will need a C++ compiler and a Python 3 interpreter.</p>
<p dir="auto">And no, you don't have to install any ROS 2 packages via <code>apt</code>.</p>
<p dir="auto">The code is developed and tested on Ubuntu 22.04 with Python 3.10.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">What works?</h2><a id="user-content-what-works" class="anchor" aria-label="Permalink: What works?" href="#what-works"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Available features:</p>
<ul dir="auto">
<li>Building of C++, Python and Rust nodes.</li>
<li>C/C++/Python/Rust code generation for interfaces (messages, services and actions).</li>
<li>Defining ROS 2 deployments with <code>ros2_launch</code> Bazel macro.</li>
<li>Defining ROS 2 tests with <code>ros2_test</code> Bazel macro.</li>
<li>Defining ROS 2 plugins with <code>ros2_plugin</code> Bazel macro.</li>
<li>Only CycloneDDS middleware can be used at the moment.
<ul dir="auto">
<li>Zero copy transport via shared memory backend (<a href="https://github.com/eclipse-iceoryx/iceoryx">iceoryx</a>) for CycloneDDS.</li>
</ul>
</li>
<li>Logging backends:
<ul dir="auto">
<li><code>spdlog</code> (default): <code>--@com_github_mvukov_rules_ros2//ros2:rcl_logging_impl=spdlog</code></li>
<li><code>syslog</code>: <code>--@com_github_mvukov_rules_ros2//ros2:rcl_logging_impl=syslog</code></li>
</ul>
</li>
<li>Utilities:
<ul dir="auto">
<li><a href="https://github.com/foxglove/ros-foxglove-bridge"><code>foxglove_bridge</code></a> for visualization and debugging</li>
<li><code>ros2_bag</code> for handling rosbags</li>
<li><code>ros2_lifecycle</code> for handling node lifecycle</li>
<li><code>ros2_node</code> for handling nodes</li>
<li><code>ros2_param</code> for handling parameters</li>
<li><code>ros2_service</code> for handling services</li>
<li><code>ros2_topic</code> for handling topics</li>
<li><code>xacro</code> for Xacro to URDF conversion</li>
</ul>
</li>
</ul>
<p dir="auto">Please take a look at the <a href="examples">examples</a> folder to get started.</p>
<p dir="auto">ROS 2 packages are by default locked to versions from <a href="https://github.com/ros2/ros2/releases/tag/release-humble-20241205">release-humble-20241205</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Notes</h2><a id="user-content-notes" class="anchor" aria-label="Permalink: Notes" href="#notes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Unlike ROS genmsg which refuses to generate code if the deps between
interface targets are not set correctly, code generation for ROS 2 seems to not
care about this. If the deps are not correctly set, you'll only see failures
during compilation of the generated code.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Alternatives</h2><a id="user-content-alternatives" class="anchor" aria-label="Permalink: Alternatives" href="#alternatives"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For alternative approaches, see:</p>
<ul dir="auto">
<li><a href="https://github.com/ApexAI/rules_ros/"><code>ApexAI/rules_ros</code></a></li>
<li><a href="https://github.com/RobotLocomotion/drake-ros/tree/main/bazel_ros2_rules/ros2#alternatives"><code>RobotLocomotion/drake-ros/bazel_ros2_rules</code></a>,
which includes a brief analysis of this and other approaches.</li>
</ul>
</article></div>