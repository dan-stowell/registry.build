<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a target="_blank" rel="noopener noreferrer" href="logo/IdrisRulesLogoText.png"><img src="logo/IdrisRulesLogoText.png" alt="Idris Rules Logo" title="Idris Rules" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto"><a href="https://www.idris-lang.org/" rel="nofollow">Idris</a> rules for <a href="https://bazel.build/" rel="nofollow">Bazel</a></h1><a id="user-content-idris-rules-for-bazel" class="anchor" aria-label="Permalink: Idris rules for Bazel" href="#idris-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://travis-ci.org/BryghtWords/rules_idris" rel="nofollow"><img src="https://camo.githubusercontent.com/640eb269fba6b86aebdd613aadf3f2c62e588e73641ae619dcd5afd8180c43b3/68747470733a2f2f7472617669732d63692e6f72672f427279676874576f7264732f72756c65735f69647269732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/BryghtWords/rules_idris.svg?branch=master" style="max-width: 100%;"></a></p>
<blockquote>
<p dir="auto">The 13th episode of <em><a href="https://en.wikipedia.org/wiki/Ivor_the_Engine#Episodes" rel="nofollow">Ivor the Engine</a></em> (in colour) is titled <em>Unidentified Objects</em>. Let's hope our codebase don't have any of those.</p>
<p dir="auto"><em>Idris the Dragon</em></p>
</blockquote>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Table of Contents</h2><a id="user-content-table-of-contents" class="anchor" aria-label="Permalink: Table of Contents" href="#table-of-contents"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="#idris-rules-for-bazel"></a><a href="https://www.idris-lang.org/" rel="nofollow">Idris</a> rules for <a href="https://bazel.build/" rel="nofollow">Bazel</a>
<ul dir="auto">
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#add-rules_idris-to-a-bazel-project">Add rules_idris to a bazel project</a>
<ul dir="auto">
<li><a href="#install-idris_rules-using-nix">Install idris_rules using nix</a></li>
<li><a href="#install-idris_rules-using-a-local-idris-installation">Install idris_rules using a local idris installation</a></li>
<li><a href="#create-an-idris-executable">Create an idris executable</a></li>
<li><a href="#create-an-idris-module">Create an idris module</a></li>
<li><a href="#test-an-idris-module">Test an idris module</a></li>
</ul>
</li>
<li><a href="#tutorials">Tutorials</a>
<ul dir="auto">
<li><a href="#create-a-simple-hello-world">Create a simple hello world</a>
<ul dir="auto">
<li><a href="#concerning-bazel">Concerning Bazel</a></li>
<li><a href="#1-create-the-project">1. Create the project</a></li>
<li><a href="#2-setup-rules_idris">2. Setup rules_idris</a></li>
<li><a href="#3-add-the-executable-module">3. Add the executable module</a></li>
<li><a href="#lets-try-it">Let's try it</a></li>
</ul>
</li>
<li><a href="#open-the-idris-console-the-repl">Open the idris console (the Repl)</a></li>
<li><a href="#create-a-simple-module">Create a simple module</a>
<ul dir="auto">
<li><a href="#1-create-a-package-and-module">1. Create a package and module</a></li>
<li><a href="#2-implement-some-functionality-for-the-module">2. Implement some functionality for the module</a></li>
<li><a href="#3-make-our-binary-use-the-module">3. Make our binary use the module</a></li>
</ul>
</li>
<li><a href="#write-a-simple-idris-test">Write a simple idris test</a>
<ul dir="auto">
<li><a href="#1-write-the-test">1. Write the test</a></li>
<li><a href="#2-create-the-test-module">2. Create the test module</a></li>
<li><a href="#lets-try-it-1">Let's try it</a></li>
</ul>
</li>
<li><a href="#using-external-libraries">Using external libraries</a>
<ul dir="auto">
<li><a href="#1-declare-the-extenral-dependency">1. Declare the extenral dependency</a></li>
<li><a href="#2-depend-on-the-external-library">2. Depend on the external library</a></li>
<li><a href="#3-use-the-external-library">3. Use the external library</a></li>
</ul>
</li>
<li><a href="#creating-an-external-libraries">Creating an external libraries</a>
<ul dir="auto">
<li><a href="#1-setup-the-project">1. Setup the project</a></li>
<li><a href="#2-create-the-library">2. Create the library</a></li>
<li><a href="#3-publish">3. Publish</a></li>
<li><a href="#4-document-usage-instructions">4. Document usage instructions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#known-issues">Known Issues</a></li>
<li><a href="#other-idris-build-tools--package-managers">Other Idris build tools / package managers</a></li>
<li><a href="#roadmap">Roadmap</a></li>
</ul>
</li>
</ul>
<p dir="auto">ToC created by <a href="https://github.com/ekalinin/github-markdown-toc">gh-md-toc</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>Idris rules</strong> adds Idris support for Bazel. Bazel is a powerful and well maintained build tool with <a href="https://bazel.build/#why-bazel" rel="nofollow">a lot of interesting characteristics</a>. Combining Bazel and idris rules, we get an idris build tool that:</p>
<ul dir="auto">
<li>Can build different types of components (executables, libraries and tests)</li>
<li>Make components easy to integrate between them</li>
<li>It's easy to configure (for example, there is no need to specify the list of files/modules of your component by hand)</li>
<li>Supports <strong>external dependencies</strong>. External dependencies only need to be Idris+Bazel projects hosted somewhere (like github, bitbucket, gitlab, ...). This means that, to support external dependencies there is no need to create and maintain some kind of central repository infrastructure. And it's easy for library developers to publish their work.</li>
</ul>
<p dir="auto">And there are <a href="#roadmap">more features to come</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Getting Started</h2><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting Started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>PREREQUISITES:</strong> <a href="https://docs.bazel.build/versions/master/install.html" rel="nofollow">Having bazel installed locally</a></p>
<p dir="auto">Two quick options to get you started:</p>
<ul dir="auto">
<li>
<p dir="auto">If you are already familiar with <a href="https://bazel.build/" rel="nofollow">bazel</a>, you can continue with the <a href="#add-rules_idris-to-a-bazel-project">add rules_idris to a bazel project</a> section</p>
</li>
<li>
<p dir="auto">Otherwise head to the <a href="#create-a-simple-hello-world">create a simple hello world</a> tutorial</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Add rules_idris to a bazel project</h2><a id="user-content-add-rules_idris-to-a-bazel-project" class="anchor" aria-label="Permalink: Add rules_idris to a bazel project" href="#add-rules_idris-to-a-bazel-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To get started with rules_idris, you only need to initialize them on your <code>WORKSPACE</code> file and you will be ready to go. For that you have two options:</p>
<ul dir="auto">
<li>
<p dir="auto">If you have <a href="https://nixos.org/nix/" rel="nofollow">the nix package manager</a> installed locally, you can <a href="#install-idris_rules-using-nix">use it</a> and bazel is going to get idris for you.</p>
</li>
<li>
<p dir="auto">Otherwise, you can <a href="#install-idris_rules-using-a-local-idris-installation">use a local installation of idris</a></p>
</li>
</ul>
<p dir="auto">Afterwards you might want to <a href="#create-an-idris-module">add an executable</a>, <a href="#create-an-idris-module">a module</a> or <a href="#test-an-idris-module">a test</a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Install idris_rules using nix</h3><a id="user-content-install-idris_rules-using-nix" class="anchor" aria-label="Permalink: Install idris_rules using nix" href="#install-idris_rules-using-nix"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>PREREQUISITES:</strong> <a href="https://nixos.org/nix/download.html" rel="nofollow">Having nix installed locally</a></p>
<p dir="auto">This approach allows nix to retrieve idris for you. In fact, in the future this will allow per project configuration of the idris version to use.</p>
<p dir="auto">Add the following to your <code>WORKSPACE</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:git.bzl&quot;, &quot;git_repository&quot;)
git_repository(
    name = &quot;rules_idris&quot;,
    remote = &quot;https://github.com/BryghtWords/rules_idris.git&quot;,
    tag = &quot;v0.3&quot;
)

load(&quot;@rules_idris//idris:idris_repos.bzl&quot;, &quot;loadIdrisRepositories&quot;)

loadIdrisRepositories()

load(&quot;@rules_idris//idris:idris_loader.bzl&quot;, &quot;loadIdris&quot;)

loadIdris()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:git.bzl"</span>, <span class="pl-s">"git_repository"</span>)
<span class="pl-en">git_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_idris"</span>,
    <span class="pl-s1">remote</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/BryghtWords/rules_idris.git"</span>,
    <span class="pl-s1">tag</span> <span class="pl-c1">=</span> <span class="pl-s">"v0.3"</span>
)

<span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:idris_repos.bzl"</span>, <span class="pl-s">"loadIdrisRepositories"</span>)

<span class="pl-en">loadIdrisRepositories</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:idris_loader.bzl"</span>, <span class="pl-s">"loadIdris"</span>)

<span class="pl-en">loadIdris</span>()</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Install idris_rules using a local idris installation</h3><a id="user-content-install-idris_rules-using-a-local-idris-installation" class="anchor" aria-label="Permalink: Install idris_rules using a local idris installation" href="#install-idris_rules-using-a-local-idris-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>PREREQUISITES:</strong> <a href="https://www.idris-lang.org/download/" rel="nofollow">Having idris installed locally</a></p>
<p dir="auto">With this approach, you need a local installation of idris, and to tell bazel where to find it.</p>
<ol dir="auto">
<li>Add the following snippet into your <code>WORKSPACE</code> file</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:git.bzl&quot;, &quot;git_repository&quot;)
git_repository(
    name = &quot;rules_idris&quot;,
    remote = &quot;https://github.com/BryghtWords/rules_idris.git&quot;,
    tag = &quot;v0.3&quot;
)

load(&quot;@rules_idris//idris:idris_repos.bzl&quot;, &quot;loadIdrisPackagerRepositories&quot;)

loadIdrisPackagerRepositories()

load(&quot;@rules_idris//idris:local_idris_loader.bzl&quot;, &quot;loadIdris&quot;)

loadIdris(&quot;/path/to/idris/installation&quot;) # That is, wichever path that contains 'bin/idris'"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:git.bzl"</span>, <span class="pl-s">"git_repository"</span>)
<span class="pl-en">git_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_idris"</span>,
    <span class="pl-s1">remote</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/BryghtWords/rules_idris.git"</span>,
    <span class="pl-s1">tag</span> <span class="pl-c1">=</span> <span class="pl-s">"v0.3"</span>
)

<span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:idris_repos.bzl"</span>, <span class="pl-s">"loadIdrisPackagerRepositories"</span>)

<span class="pl-en">loadIdrisPackagerRepositories</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:local_idris_loader.bzl"</span>, <span class="pl-s">"loadIdris"</span>)

<span class="pl-en">loadIdris</span>(<span class="pl-s">"/path/to/idris/installation"</span>) <span class="pl-c"># That is, wichever path that contains 'bin/idris'</span></pre></div>
<ol start="2" dir="auto">
<li>Locate where you have idris installed (that is, the folder that contains <code>bin/idris</code>)</li>
<li>On the text you have just added, replace <code>/path/to/idris/installation</code> with the correct path</li>
</ol>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Create an idris executable</h3><a id="user-content-create-an-idris-executable" class="anchor" aria-label="Permalink: Create an idris executable" href="#create-an-idris-executable"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following into the <code>BUILD</code> file for your executable:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_binary&quot;)

idris_binary (
    name = &quot;name_of_the_binary&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_binary"</span>)

<span class="pl-en">idris_binary</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"name_of_the_binary"</span>,
)</pre></div>
<p dir="auto">It will automatically pick up all the <code>idr</code> files from the same folder than the <code>BUILD</code> file</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Create an idris module</h3><a id="user-content-create-an-idris-module" class="anchor" aria-label="Permalink: Create an idris module" href="#create-an-idris-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following into the <code>BUILD</code> file for your module:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;)

idris_library (
    name = &quot;name_of_the_library&quot;,
    visibility = [&quot;//visibility:public&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>)

<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"name_of_the_library"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)</pre></div>
<p dir="auto">It will automatically pick up all the <code>idr</code> files from the same folder than the <code>BUILD</code> file</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Test an idris module</h3><a id="user-content-test-an-idris-module" class="anchor" aria-label="Permalink: Test an idris module" href="#test-an-idris-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If we want to test a library, like the one <a href="#create-an-idris-module">from the previous section</a>, we should tweak it's <code>BUILD</code> file to look like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;, &quot;idris_test&quot;)

idris_library (
    name = &quot;library_example&quot;,
    visibility = [&quot;//visibility:public&quot;],
)

idris_test (
    name = &quot;test_example&quot;,
    deps = [&quot;library_example&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>, <span class="pl-s">"idris_test"</span>)

<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"library_example"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)

<span class="pl-en">idris_test</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"test_example"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"library_example"</span>],
)</pre></div>
<p dir="auto">The <code>idris_test</code> rule is going to pick up all the <code>idr</code> files from the <code>test</code> subfolder from where the <code>BUILD</code> file is located. Each <code>idr</code> in the test should have a test method with this signature:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export
test : IO Bool -- This should be true if the test or tests in this suite are successful"><pre>export
<span class="pl-en">test</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">Bool</span> -- This should be true if the test or tests in this suite are successful</pre></div>
<p dir="auto">The implementation of this method should return true if all the tests of this suite pass, or false otherwise. This will allow for easy integration with external testing libraries.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Tutorials</h2><a id="user-content-tutorials" class="anchor" aria-label="Permalink: Tutorials" href="#tutorials"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Create a simple hello world</h3><a id="user-content-create-a-simple-hello-world" class="anchor" aria-label="Permalink: Create a simple hello world" href="#create-a-simple-hello-world"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Creating a basic project for a simple executable, is a simple three step process:</p>
<ol dir="auto">
<li>Create the project</li>
<li>Setup idris rules</li>
<li>Add the executable module</li>
</ol>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Concerning Bazel</h4><a id="user-content-concerning-bazel" class="anchor" aria-label="Permalink: Concerning Bazel" href="#concerning-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Bazel projects (also called <a href="https://docs.bazel.build/versions/master/build-ref.html#workspace" rel="nofollow">workspaces</a>) are collections of <a href="https://docs.bazel.build/versions/master/build-ref.html#targets" rel="nofollow">targets</a>. For simplicity, I'm going to say that targets are things that can be built (this is not really true, but will help understand how bazel works).</p>
<p dir="auto">In turn, this targets are organized into <a href="https://docs.bazel.build/versions/master/build-ref.html#packages" rel="nofollow">packages</a>. All targets must belong to a package.</p>
<p dir="auto">You can think of a workspace as a folder that contains a file named <code>WORKSPACE</code>. Everything in that folder and subfolders belong to the workspace. Likewise, the <code>WORKSPACE</code> file must live in the root folder of your project.</p>
<p dir="auto">You can think of a package as a folder in the workspace that contains a file named <code>BUILD</code>. Everything in that folder and subfolders that are not packages themselves (that is, that don't contain a <code>BUILD</code> file) belong to the package.</p>
<p dir="auto">If you look at this example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="|____my-package
| |____BUILD
| |____foo.h
| |____src
| | |____bar.cpp
| |____sub
| | |____BUILD
| | |____baz.h
| | |____src
| | | |____qux.cpp"><pre class="notranslate"><code>|____my-package
| |____BUILD
| |____foo.h
| |____src
| | |____bar.cpp
| |____sub
| | |____BUILD
| | |____baz.h
| | |____src
| | | |____qux.cpp
</code></pre></div>
<p dir="auto"><code>my-package/foo.h</code> and <code>my-package/src/bar.cpp</code> belong to the package <code>my-package</code>, where <code>my-package/sub/baz.h</code> and <code>my-package/sub/src/qux.cpp</code> belong to <code>sub</code></p>
<p dir="auto">It's also worth noticing that the root folder can be both the workspace and a package. That is, by containing both a <code>WORKSPACE</code> file and a <code>BUILD</code> file.</p>
<p dir="auto">The <code>WORKSPACE</code> file holds general configuration for the project, things like what external repositories to access or tools to use. The <code>BUILD</code> files list the targets for that package.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">1. Create the project</h4><a id="user-content-1-create-the-project" class="anchor" aria-label="Permalink: 1. Create the project" href="#1-create-the-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A bazel project is just a folder with a <code>WORKSPACE</code> file. Here we go:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir my-project
cd my-project
touch WORKSPACE"><pre>mkdir my-project
<span class="pl-c1">cd</span> my-project
touch WORKSPACE</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">2. Setup rules_idris</h4><a id="user-content-2-setup-rules_idris" class="anchor" aria-label="Permalink: 2. Setup rules_idris" href="#2-setup-rules_idris"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On this step you have to choose:</p>
<ol dir="auto">
<li>To use the nix package manager (and install it if you don't already have it)</li>
</ol>
<p dir="auto">or</p>
<ol start="2" dir="auto">
<li>To use a local installation of idris (and install it if you don't already have it)</li>
</ol>
<p dir="auto">After that, you basically need to add content on your <code>WORKSPACE</code> file to tell bazel how to get and use rules_idris. It's preatty much a copy-and-paste as explained <a href="#install-idris_rules-using-nix">in here if you use nix</a> or, otherwise as explained <a href="#install-idris_rules-using-a-local-idris-installation">in here if you use a local installation of idris</a></p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">3. Add the executable module</h4><a id="user-content-3-add-the-executable-module" class="anchor" aria-label="Permalink: 3. Add the executable module" href="#3-add-the-executable-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is where we create our first bit of idris. We will do three things:</p>
<ol dir="auto">
<li>Create the package</li>
<li>Create the idris code</li>
<li>Configure the target</li>
</ol>
<p dir="auto">So first, as mentioned before, a package is a folder with a <code>BUILD</code> file. Starting from the root folder:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir bin # we can name this folder whatever we want
cd bin
touch BUILD"><pre>mkdir bin <span class="pl-c"><span class="pl-c">#</span> we can name this folder whatever we want</span>
<span class="pl-c1">cd</span> bin
touch BUILD</pre></div>
<p dir="auto">Then we need a bit of idris code. Let's put this code in <code>bin/Binary.idr</code>:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module Main

main : IO ()
main = putStrLn &quot;Hello, world!&quot;"><pre><span class="pl-k">module</span> Main

<span class="pl-en">main</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">()</span>
main <span class="pl-k">=</span> <span class="pl-c1">putStrLn</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, world!<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">And finally, we need to tell bazel about it. Let's add this to the <code>bin/BUILD</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_binary&quot;)

idris_binary (
    name = &quot;binary_example&quot;,
)
"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_binary"</span>)

<span class="pl-en">idris_binary</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"binary_example"</span>,
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Let's try it</h4><a id="user-content-lets-try-it" class="anchor" aria-label="Permalink: Let's try it" href="#lets-try-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">And that's it, we can now build it:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel build //bin:binary_example"><pre>bazel build //bin:binary_example</pre></div>
<p dir="auto">Or run it:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run //bin:binary_example"><pre>bazel run //bin:binary_example</pre></div>
<p dir="auto">After running either command, you can find your new file at:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bazel-bin/bin/bin/binary_example"><pre class="notranslate"><code>bazel-bin/bin/bin/binary_example
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Open the idris console (the Repl)</h3><a id="user-content-open-the-idris-console-the-repl" class="anchor" aria-label="Permalink: Open the idris console (the Repl)" href="#open-the-idris-console-the-repl"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can open the idris repl with all the dependencies (external or otherwise) in scope. For example, if we want to play with the code from the previous tutorial, just run this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bazel run //bin:binary_example_repl"><pre class="notranslate"><code>bazel run //bin:binary_example_repl
</code></pre></div>
<p dir="auto">To opend the repl for a module, there is an special module created for every idris rule that starts the repl. This module is named exactly like the rule, with "_repl" added at the end.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Create a simple module</h3><a id="user-content-create-a-simple-module" class="anchor" aria-label="Permalink: Create a simple module" href="#create-a-simple-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Call it module or library, the distinction is quite difuse in bazel. What we are talking about is a bunch of reusable code that is not, by itself, an executable. For that, all we need is a target that describes how to create this module. And usualy, we put modules on their own packages.</p>
<p dir="auto">This tutorial follows up from <a href="#create-a-simple-hello-world">create a simple hello world</a>, so from the root folder from the result of that tutorial, we are going to do the following:</p>
<ol dir="auto">
<li>Create a package and module</li>
<li>Implement some functionality for the module</li>
<li>Make our binary use the module</li>
</ol>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">1. Create a package and module</h4><a id="user-content-1-create-a-package-and-module" class="anchor" aria-label="Permalink: 1. Create a package and module" href="#1-create-a-package-and-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We only need a new folder and <code>BUILD</code> file:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir lib
touch lib/BUILD"><pre>mkdir lib
touch lib/BUILD</pre></div>
<p dir="auto">And tell the <code>BUILD</code> file about our new module. Write this into the <code>BUILD</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;) # This puts the `idris_library` function in scope. It's basically an `import`

# This declares the new library
idris_library (
    name = &quot;salutes&quot;, # Named `salutes`
    visibility = [&quot;//visibility:public&quot;], # Accessible from any other bazel target
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>) <span class="pl-c"># This puts the `idris_library` function in scope. It's basically an `import`</span>

<span class="pl-c"># This declares the new library</span>
<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"salutes"</span>, <span class="pl-c"># Named `salutes`</span>
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>], <span class="pl-c"># Accessible from any other bazel target</span>
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">2. Implement some functionality for the module</h4><a id="user-content-2-implement-some-functionality-for-the-module" class="anchor" aria-label="Permalink: 2. Implement some functionality for the module" href="#2-implement-some-functionality-for-the-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Let's start wit a simple bit of idris code. Create the file <code>lib/Salute.idr</code>, and add it's functionality:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module lib.Salute

export
salute : String
salute = &quot;Hello, library example of idris&quot;"><pre><span class="pl-k">module</span> lib.Salute

export
<span class="pl-en">salute</span> <span class="pl-k">:</span> String
salute <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, library example of idris<span class="pl-pds">"</span></span></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">3. Make our binary use the module</h4><a id="user-content-3-make-our-binary-use-the-module" class="anchor" aria-label="Permalink: 3. Make our binary use the module" href="#3-make-our-binary-use-the-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Two steps, first tell the binary target it can use the new module. Fot that, edit <code>bin/BUILD</code> to make it look like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_binary&quot;)

idris_binary (
    name = &quot;binary_example&quot;,
    deps = [&quot;//lib:salutes&quot;], # This is the line that has been added
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_binary"</span>)

<span class="pl-en">idris_binary</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"binary_example"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"//lib:salutes"</span>], <span class="pl-c"># This is the line that has been added</span>
)</pre></div>
<p dir="auto">And finally, let's make un application use the library. Edit <code>bin/Binary.idr</code>, to use the new function:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
module Main

import lib.Salute

main : IO ()
main = putStrLn salute
"><pre><span class="pl-k">module</span> Main

<span class="pl-k">import</span> lib.Salute

<span class="pl-en">main</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">()</span>
main <span class="pl-k">=</span> <span class="pl-c1">putStrLn</span> salute
</pre></div>
<p dir="auto">You can try your new code as explained in <a href="#lets-try-it">here</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Write a simple idris test</h3><a id="user-content-write-a-simple-idris-test" class="anchor" aria-label="Permalink: Write a simple idris test" href="#write-a-simple-idris-test"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">From the point of view of bazel, a test is an executable that once run its exit status id either 0 when everything has gone ok or not 0 if something has gone wrong. Bazel doesn't care for anything else.</p>
<p dir="auto">For this purpose, idris rules provides <code>idris_test</code>. A rule that generates the executable's <code>main</code> function for you. And expects a single <code>test</code> function on each source file on the test module. This <code>test</code> functions must have this signature:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="export
test : IO Bool -- This should be true if the test or tests in this suite are successful"><pre>export
<span class="pl-en">test</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">Bool</span> -- This should be true if the test or tests in this suite are successful</pre></div>
<p dir="auto">Given that, only <code>idris_library</code> modules can be tested because the test itself must be an executable and merging two executables is dificult.</p>
<p dir="auto">So, for this tutorial we are going to start from the result of <a href="#create-a-simple-module">create a simple module</a>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">1. Write the test</h4><a id="user-content-1-write-the-test" class="anchor" aria-label="Permalink: 1. Write the test" href="#1-write-the-test"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Tests live on the <code>test</code> subfolder of the module you want to test. Since we are testing the <code>lib:salutes</code> module, from the root folder execute:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir lib/test
touch lib/test/SaluteTest.idr"><pre>mkdir lib/test
touch lib/test/SaluteTest.idr</pre></div>
<p dir="auto">And write a simple test on <code>lib/test/SaluteTest.idr</code>:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module lib.test.LibTest

import lib.Library

export
test : IO Bool
test = pure (salute == &quot;Hello, library example of idris&quot;)"><pre><span class="pl-k">module</span> lib.test.LibTest

<span class="pl-k">import</span> lib.Library

export
<span class="pl-en">test</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">Bool</span>
test <span class="pl-k">=</span> pure (salute <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, library example of idris<span class="pl-pds">"</span></span>)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">2. Create the test module</h4><a id="user-content-2-create-the-test-module" class="anchor" aria-label="Permalink: 2. Create the test module" href="#2-create-the-test-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Now, we only need to register the new test module. For that purpose, edit <code>lib/BUILD</code> to look like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;, &quot;idris_test&quot;) # CHANGE 1: This now also imports `idris_test`

idris_library (
    name = &quot;salutes&quot;,
    visibility = [&quot;//visibility:public&quot;],
)

# CHANGE 2: Add the new test module
idris_test (
    name = &quot;test_salutes&quot;,
    deps = [&quot;salutes&quot;], # This tells bazel to link the library we are testing into the executable that is going to run the tests
)
"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>, <span class="pl-s">"idris_test"</span>) <span class="pl-c"># CHANGE 1: This now also imports `idris_test`</span>

<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"salutes"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)

<span class="pl-c"># CHANGE 2: Add the new test module</span>
<span class="pl-en">idris_test</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"test_salutes"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"salutes"</span>], <span class="pl-c"># This tells bazel to link the library we are testing into the executable that is going to run the tests</span>
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Let's try it</h4><a id="user-content-lets-try-it-1" class="anchor" aria-label="Permalink: Let's try it" href="#lets-try-it-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">And that's it, we can now build our testing module:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel build //lib:test_salutes"><pre>bazel build //lib:test_salutes</pre></div>
<p dir="auto">Or run the tests directly:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel test //lib:test_salutes"><pre>bazel <span class="pl-c1">test</span> //lib:test_salutes</pre></div>
<p dir="auto">NOTE: By default, bazel logs the result of running the tests but doesn't print them on STDOUT. If you want to see the results of running the test (which since there is no <code>putStrLn</code> is going to be empty anyway), you should run this:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel test //lib:test_salutes --test_output=all"><pre>bazel <span class="pl-c1">test</span> //lib:test_salutes --test_output=all</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using external libraries</h3><a id="user-content-using-external-libraries" class="anchor" aria-label="Permalink: Using external libraries" href="#using-external-libraries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To make one of your modules use an external library, you need to a) declare it on your WORKSPACE file and b) make the module depend on it.</p>
<p dir="auto">So, imagine we want to improve our tests from <a href="#write-a-simple-idris-test">the previous tutorial</a>. And for that, we want to make use of <a href="https://github.com/BryghtWords/IdrisTest">IdirsTest</a>, an external library.</p>
<p dir="auto">We will start this tutorial from the result of the <a href="#write-a-simple-idris-test">write a simple idris test</a> tutorial.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">1. Declare the extenral dependency</h4><a id="user-content-1-declare-the-extenral-dependency" class="anchor" aria-label="Permalink: 1. Declare the extenral dependency" href="#1-declare-the-extenral-dependency"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First, we need to make our project aware of the external dependency. For that we need to add this to our <code>WORKSPACE</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
git_repository(
    name = &quot;IdrisTest&quot;,
    remote = &quot;https://github.com/BryghtWords/IdrisTest.git&quot;,
    tag = &quot;v0.1&quot;
)
"><pre><span class="pl-en">git_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"IdrisTest"</span>,
    <span class="pl-s1">remote</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/BryghtWords/IdrisTest.git"</span>,
    <span class="pl-s1">tag</span> <span class="pl-c1">=</span> <span class="pl-s">"v0.1"</span>
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">2. Depend on the external library</h4><a id="user-content-2-depend-on-the-external-library" class="anchor" aria-label="Permalink: 2. Depend on the external library" href="#2-depend-on-the-external-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Second, we need to tell our module (in this case, our test) that it can use the external dependency. Let's modify <code>lib/BUILD</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;, &quot;idris_test&quot;)

idris_library (
    name = &quot;salutes&quot;,
    visibility = [&quot;//visibility:public&quot;],
)

idris_test (
    name = &quot;test_salutes&quot;,
    deps = [
      &quot;salutes&quot;,
      &quot;@IdrisTest//idristest:idristest&quot;, # CHANGE: This tells bazel that `test_salutes` should
                                         # depend on the `idristest` library from the
                                         # `idristest` package in the `IdrisTest` repo.
    ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>, <span class="pl-s">"idris_test"</span>)

<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"salutes"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)

<span class="pl-en">idris_test</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"test_salutes"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
      <span class="pl-s">"salutes"</span>,
      <span class="pl-s">"@IdrisTest//idristest:idristest"</span>, <span class="pl-c"># CHANGE: This tells bazel that `test_salutes` should</span>
                                         <span class="pl-c"># depend on the `idristest` library from the</span>
                                         <span class="pl-c"># `idristest` package in the `IdrisTest` repo.</span>
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">3. Use the external library</h4><a id="user-content-3-use-the-external-library" class="anchor" aria-label="Permalink: 3. Use the external library" href="#3-use-the-external-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Finally, we can use the testing library to improve our test. Let's change our <code>lib/test/SaluteTest.idr</code>:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module lib.test.LibTest

import lib.Library
import idristest.Suite -- CHANGE 1: Import the tools from the IdrisTest

-- CHANGE 2: Add one unit test
testLibrary1 : (Bool, String)
testLibrary1 = assertEq
                 &quot;Test salute&quot;                      -- Test title
                 salute                             -- Result
                 &quot;Hello, library example of idris&quot;  -- Expected

-- CHANGE 3: Add another unit test
testLibrary2 : (Bool, String)
testLibrary2 = assertNotEq
                 &quot;Test salute diff&quot;                 -- Test title
                 salute                             -- Result
                 &quot;Ups&quot;                              -- Expected to be different

-- CHANGE 3: The main test function aggregates all the other tests
export
test : IO Bool
test = runTests [testLibrary1, testLibrary2]"><pre><span class="pl-k">module</span> lib.test.LibTest

<span class="pl-k">import</span> lib.Library
import idristest<span class="pl-k">.</span><span class="pl-c1">Suite</span> <span class="pl-c"><span class="pl-c">--</span> CHANGE 1: Import the tools from the IdrisTest</span>

<span class="pl-c"><span class="pl-c">--</span> CHANGE 2: Add one unit test</span>
<span class="pl-en">testLibrary1</span> <span class="pl-k">:</span> (<span class="pl-c1">Bool</span>, String)
testLibrary1 <span class="pl-k">=</span> assertEq
                 <span class="pl-s"><span class="pl-pds">"</span>Test salute<span class="pl-pds">"</span></span>                      <span class="pl-c"><span class="pl-c">--</span> Test title</span>
                 salute                             <span class="pl-c"><span class="pl-c">--</span> Result</span>
                 <span class="pl-s"><span class="pl-pds">"</span>Hello, library example of idris<span class="pl-pds">"</span></span>  <span class="pl-c"><span class="pl-c">--</span> Expected</span>

<span class="pl-c"><span class="pl-c">--</span> CHANGE 3: Add another unit test</span>
<span class="pl-en">testLibrary2</span> <span class="pl-k">:</span> (<span class="pl-c1">Bool</span>, String)
testLibrary2 <span class="pl-k">=</span> assertNotEq
                 <span class="pl-s"><span class="pl-pds">"</span>Test salute diff<span class="pl-pds">"</span></span>                 <span class="pl-c"><span class="pl-c">--</span> Test title</span>
                 salute                             <span class="pl-c"><span class="pl-c">--</span> Result</span>
                 <span class="pl-s"><span class="pl-pds">"</span>Ups<span class="pl-pds">"</span></span>                              <span class="pl-c"><span class="pl-c">--</span> Expected to be different</span>

<span class="pl-c"><span class="pl-c">--</span> CHANGE 3: The main test function aggregates all the other tests</span>
export
<span class="pl-en">test</span> <span class="pl-k">:</span> <span class="pl-c1">IO</span> <span class="pl-c1">Bool</span>
test <span class="pl-k">=</span> runTests [testLibrary1, testLibrary2]</pre></div>
<p dir="auto">Now you can run your test in the same way as explained in <a href="#lets-try-it-1">how to run your tests</a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Creating an external libraries</h3><a id="user-content-creating-an-external-libraries" class="anchor" aria-label="Permalink: Creating an external libraries" href="#creating-an-external-libraries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Briefly: an external library is a bazel project whose source code lives on github (or similar). More specificaly a bazel project that can be <code>git clone</code>ed.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">1. Setup the project</h4><a id="user-content-1-setup-the-project" class="anchor" aria-label="Permalink: 1. Setup the project" href="#1-setup-the-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Let's imagine we want to publish our <a href="#create-a-simple-module">salutes library</a> available for the world to use. We need to create the scaffolding:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir salutes
cd salutes
touch WORKSPACE"><pre>mkdir salutes
<span class="pl-c1">cd</span> salutes
touch WORKSPACE</pre></div>
<p dir="auto">Now we need to install idris rules as explained on <a href="#add-rules_idris-to-a-bazel-project">add rules_idris to a bazel project</a></p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">2. Create the library</h4><a id="user-content-2-create-the-library" class="anchor" aria-label="Permalink: 2. Create the library" href="#2-create-the-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">We are going to place our library in the <code>lib</code> folder:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="mkdir lib
touch lib/BUILD
touch lib/Salute.idr"><pre>mkdir lib
touch lib/BUILD
touch lib/Salute.idr</pre></div>
<p dir="auto">where we are goint to have a <code>lib/BUILD</code> like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_idris//idris:rules_idris.bzl&quot;, &quot;idris_library&quot;) # This puts the `idris_library` function in scope. It's basically an `import`

# This declares the new library
idris_library (
    name = &quot;salutes&quot;, # Named `salutes`
    visibility = [&quot;//visibility:public&quot;], # Accessible from any other bazel target
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_idris//idris:rules_idris.bzl"</span>, <span class="pl-s">"idris_library"</span>) <span class="pl-c"># This puts the `idris_library` function in scope. It's basically an `import`</span>

<span class="pl-c"># This declares the new library</span>
<span class="pl-en">idris_library</span> (
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"salutes"</span>, <span class="pl-c"># Named `salutes`</span>
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>], <span class="pl-c"># Accessible from any other bazel target</span>
)</pre></div>
<p dir="auto">and a <code>lib/Salute.idr</code> similar to this:</p>
<div class="highlight highlight-source-idris notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="module lib.Salute

export
salute : String
salute = &quot;Hello, library example of idris&quot;"><pre><span class="pl-k">module</span> lib.Salute

export
<span class="pl-en">salute</span> <span class="pl-k">:</span> String
salute <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello, library example of idris<span class="pl-pds">"</span></span></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">3. Publish</h4><a id="user-content-3-publish" class="anchor" aria-label="Permalink: 3. Publish" href="#3-publish"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Now, create a repository on your site of choise (github/bitbucket/...) and push the content of your new library. As simple as that.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">4. Document usage instructions</h4><a id="user-content-4-document-usage-instructions" class="anchor" aria-label="Permalink: 4. Document usage instructions" href="#4-document-usage-instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">It's usualy a good idea to let your users know how to import your library. For that, a good approach is to write an snippet similar to this in your <code>README</code> file:</p>
<div class="highlight highlight-text-md notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
To import `salutes` into your project, you need to add this block into your `WORKSPACE` file:

```python

git_repository(
    name   = &quot;salutes&quot;,
    remote = &quot;https://github.com/&lt;my_github_username&gt;/&lt;repo_name&gt;.git&quot;,
    tag    = &quot;&lt;tag_of_the_release_to_use&gt;&quot;
)

```
"><pre>To import <span class="pl-s">`</span><span class="pl-c1">salutes</span><span class="pl-s">`</span> into your project, you need to add this block into your <span class="pl-s">`</span><span class="pl-c1">WORKSPACE</span><span class="pl-s">`</span> file:

<span class="pl-s">```</span><span class="pl-en">python</span>

git_repository(
    <span class="pl-v">name</span>   <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>salutes<span class="pl-pds">"</span></span>,
    <span class="pl-v">remote</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>https://github.com/&lt;my_github_username&gt;/&lt;repo_name&gt;.git<span class="pl-pds">"</span></span>,
    <span class="pl-v">tag</span>    <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>&lt;tag_of_the_release_to_use&gt;<span class="pl-pds">"</span></span>
)

<span class="pl-s">```</span>
</pre></div>
<p dir="auto">The <code>remote</code> field should have whatever URL is needed to clone the project. The <code>tag</code> field can be replaced by a <code>commit</code> field with the commit id to be used.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Known Issues</h2><a id="user-content-known-issues" class="anchor" aria-label="Permalink: Known Issues" href="#known-issues"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Testing of the rules themselves needs to be improved. In the examples folder there is a prety big collection of bazel projects using rules_idris, with a different organisation each. And there is a 'test' script that builds and runs each of them in turn ensuring that everything goes well, but proper unit testing would be in order.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Other Idris build tools / package managers</h2><a id="user-content-other-idris-build-tools--package-managers" class="anchor" aria-label="Permalink: Other Idris build tools / package managers" href="#other-idris-build-tools--package-managers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong><a href="https://github.com/idris-industry/ikan">Ikan</a></strong> - A package manager for idris, in idris</li>
<li><strong><a href="https://github.com/elba/elba">Elba</a></strong> - A package manager for Idris</li>
<li><strong><a href="https://github.com/idream-build/idream">idream</a></strong> - A simple build system for Idris</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Roadmap</h2><a id="user-content-roadmap" class="anchor" aria-label="Permalink: Roadmap" href="#roadmap"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Completed task" checked=""> Improve testing integration</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Completed task" checked=""> Add support for starting the idris console from bazel</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Incomplete task"> Add support for the IDE mode on bazel projects</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Incomplete task"> Support multiple idris versions</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Incomplete task"> Add javascript and jvm rules</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Incomplete task"> Migrate the <a href="https://github.com/BryghtWords/idris_packager">companion IdrisPackager project</a> from Scala to Idris</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Incomplete task"> Improve reporting of test results</li>
</ul>
</article></div>