<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">BuildBuddy RBE Toolchain</h1><a id="user-content-buildbuddy-rbe-toolchain" class="anchor" aria-label="Permalink: BuildBuddy RBE Toolchain" href="#buildbuddy-rbe-toolchain"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Currently supports Linux C/C++ (including CGO) on Ubuntu 16.04, 20.04, 22.04 and Windows 11 (or newer).</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage instructions</h2><a id="user-content-usage-instructions" class="anchor" aria-label="Permalink: Usage instructions" href="#usage-instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For the most up-to-date instructions, see our <a href="https://buildbuddy.io/docs/rbe-setup" rel="nofollow">Official Documentation</a>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">BzlMod</h4><a id="user-content-bzlmod" class="anchor" aria-label="Permalink: BzlMod" href="#bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>MODULE.bazel</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;toolchains_buildbuddy&quot;)

# Use the extension to create toolchain and platform targets
buildbuddy = use_extension(&quot;@buildbuddy//:extensions.bzl&quot;, &quot;buildbuddy&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"toolchains_buildbuddy"</span>)

<span class="pl-c"># Use the extension to create toolchain and platform targets</span>
<span class="pl-s1">buildbuddy</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@buildbuddy//:extensions.bzl"</span>, <span class="pl-s">"buildbuddy"</span>)</pre></div>
<p dir="auto">The execution platforms and CC toolchains should be registered automatically under BzlMod.</p>
<p dir="auto">For a more detailed example and customization options, see our <a href="https://github.com/buildbuddy-io/buildbuddy-toolchain/tree/master/examples/bzlmod">BzlMod Example</a>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">WORKSPACE</h4><a id="user-content-workspace" class="anchor" aria-label="Permalink: WORKSPACE" href="#workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following lines to your <code>WORKSPACE</code> file. You'll probably want to pin your version to a specific commit rather than master.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="http_archive(
    name = &quot;io_buildbuddy_buildbuddy_toolchain&quot;,
    sha256 = &quot;62ab60d07205f98c4fc3735bb21630272490fce193c59c3bb2cb2b962176400c&quot;,
    strip_prefix = &quot;buildbuddy-toolchain-0c575cc56a0c5ed69a6dfb544a3f794b9d1b474d&quot;,
    urls = [&quot;https://github.com/buildbuddy-io/buildbuddy-toolchain/archive/0c575cc56a0c5ed69a6dfb544a3f794b9d1b474d.tar.gz&quot;],
)

load(&quot;@io_buildbuddy_buildbuddy_toolchain//:deps.bzl&quot;, &quot;buildbuddy_deps&quot;)

buildbuddy_deps()

load(&quot;@io_buildbuddy_buildbuddy_toolchain//:rules.bzl&quot;, &quot;buildbuddy&quot;)

buildbuddy(name = &quot;buildbuddy_toolchain&quot;)"><pre><span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"io_buildbuddy_buildbuddy_toolchain"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"62ab60d07205f98c4fc3735bb21630272490fce193c59c3bb2cb2b962176400c"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy-toolchain-0c575cc56a0c5ed69a6dfb544a3f794b9d1b474d"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [<span class="pl-s">"https://github.com/buildbuddy-io/buildbuddy-toolchain/archive/0c575cc56a0c5ed69a6dfb544a3f794b9d1b474d.tar.gz"</span>],
)

<span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:deps.bzl"</span>, <span class="pl-s">"buildbuddy_deps"</span>)

<span class="pl-en">buildbuddy_deps</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:rules.bzl"</span>, <span class="pl-s">"buildbuddy"</span>)

<span class="pl-en">buildbuddy</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy_toolchain"</span>)</pre></div>
<p dir="auto">Now you can use the toolchain in your BuildBuddy RBE builds. For example:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bazel build server \
    --remote_executor=remote.buildbuddy.io \
    --extra_toolchains=@buildbuddy_toolchain//:ubuntu_cc_toolchain \
    --extra_execution_platforms=@buildbuddy_toolchain//:platform_linux_x86_64 \
    --platforms=@buildbuddy_toolchain//:platform_linux_x86_64"><pre class="notranslate"><code>bazel build server \
    --remote_executor=remote.buildbuddy.io \
    --extra_toolchains=@buildbuddy_toolchain//:ubuntu_cc_toolchain \
    --extra_execution_platforms=@buildbuddy_toolchain//:platform_linux_x86_64 \
    --platforms=@buildbuddy_toolchain//:platform_linux_x86_64
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Java support</h2><a id="user-content-java-support" class="anchor" aria-label="Permalink: Java support" href="#java-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Bazel provides support for Java toolchains out of the box.
You can enabled the Java toolchain with the following flags:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="--java_language_version=17
--tool_java_language_version=17
--java_runtime_version=remotejdk_17
--tool_java_runtime_version=remotejdk_17"><pre class="notranslate"><code>--java_language_version=17
--tool_java_language_version=17
--java_runtime_version=remotejdk_17
--tool_java_runtime_version=remotejdk_17
</code></pre></div>
<p dir="auto">Available verions are listed in <a href="https://bazel.build/docs/user-manual#java-language-version" rel="nofollow">Bazel's User Manual</a></p>
<p dir="auto">If you need a custom Java toolchain, see Bazel's docs on <a href="https://bazel.build/docs/bazel-and-java#config-java-toolchains" rel="nofollow">Java toolchain configuration</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Linux image variants</h2><a id="user-content-linux-image-variants" class="anchor" aria-label="Permalink: Linux image variants" href="#linux-image-variants"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The following Linux images are available for remote execution:</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Ubuntu 16.04 image (<strong>default</strong>)</h3><a id="user-content-ubuntu-1604-image-default" class="anchor" aria-label="Permalink: Ubuntu 16.04 image (default)" href="#ubuntu-1604-image-default"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This image is the default when using the BuildBuddy toolchain. To
reference it explicitly, you can declare the toolchain like this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_buildbuddy_buildbuddy_toolchain//:rules.bzl&quot;, &quot;buildbuddy&quot;, &quot;UBUNTU16_04_IMAGE&quot;)

buildbuddy(name = &quot;buildbuddy_toolchain&quot;, container_image = UBUNTU16_04_IMAGE)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:rules.bzl"</span>, <span class="pl-s">"buildbuddy"</span>, <span class="pl-s">"UBUNTU16_04_IMAGE"</span>)

<span class="pl-en">buildbuddy</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy_toolchain"</span>, <span class="pl-s1">container_image</span> <span class="pl-c1">=</span> <span class="pl-v">UBUNTU16_04_IMAGE</span>)</pre></div>
<p dir="auto">This image includes the following build tools:</p>
<ul dir="auto">
<li>Java 8 (javac 1.8.0_242)</li>
<li>GCC 5.4.0</li>
<li>GLIBC 2.23</li>
<li>Clang/LLVM 11.0.0</li>
<li>Python 2.7.12 (<code>python</code> in <code>$PATH</code> uses this version)</li>
<li>Python 3.6.10</li>
<li>Go 1.14.1</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Ubuntu 20.04 image</h3><a id="user-content-ubuntu-2004-image" class="anchor" aria-label="Permalink: Ubuntu 20.04 image" href="#ubuntu-2004-image"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use Ubuntu 20.04, import the toolchain as follows:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_buildbuddy_buildbuddy_toolchain//:rules.bzl&quot;, &quot;buildbuddy&quot;, &quot;UBUNTU20_04_IMAGE&quot;)

buildbuddy(name = &quot;buildbuddy_toolchain&quot;, container_image = UBUNTU20_04_IMAGE)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:rules.bzl"</span>, <span class="pl-s">"buildbuddy"</span>, <span class="pl-s">"UBUNTU20_04_IMAGE"</span>)

<span class="pl-en">buildbuddy</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy_toolchain"</span>, <span class="pl-s1">container_image</span> <span class="pl-c1">=</span> <span class="pl-v">UBUNTU20_04_IMAGE</span>)</pre></div>
<p dir="auto">This image includes the following build tools:</p>
<ul dir="auto">
<li>Java 11.0.17</li>
<li>GCC 9.4.0</li>
<li>GLIBC 2.31</li>
<li>Clang/LLVM 15.0.0</li>
<li>Python 2.7.18 (<code>python</code> in <code>$PATH</code> uses this version)</li>
<li>Python 3.8.10</li>
<li>Go 1.19.4</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Ubuntu 22.04 image</h3><a id="user-content-ubuntu-2204-image" class="anchor" aria-label="Permalink: Ubuntu 22.04 image" href="#ubuntu-2204-image"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use Ubuntu 22.04, import the toolchain as follows:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_buildbuddy_buildbuddy_toolchain//:rules.bzl&quot;, &quot;buildbuddy&quot;, &quot;UBUNTU22_04_IMAGE&quot;)

buildbuddy(name = &quot;buildbuddy_toolchain&quot;, container_image = UBUNTU22_04_IMAGE)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:rules.bzl"</span>, <span class="pl-s">"buildbuddy"</span>, <span class="pl-s">"UBUNTU22_04_IMAGE"</span>)

<span class="pl-en">buildbuddy</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy_toolchain"</span>, <span class="pl-s1">container_image</span> <span class="pl-c1">=</span> <span class="pl-v">UBUNTU22_04_IMAGE</span>)</pre></div>
<p dir="auto">This image includes the following build tools:</p>
<ul dir="auto">
<li>GCC 11.4.0</li>
<li>GLIBC 2.35</li>
<li>Python 3.10.12</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Ubuntu 24.04 image</h3><a id="user-content-ubuntu-2404-image" class="anchor" aria-label="Permalink: Ubuntu 24.04 image" href="#ubuntu-2404-image"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To use Ubuntu 24.04, import the toolchain as follows:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_buildbuddy_buildbuddy_toolchain//:rules.bzl&quot;, &quot;buildbuddy&quot;, &quot;UBUNTU24_04_IMAGE&quot;)

buildbuddy(name = &quot;buildbuddy_toolchain&quot;, container_image = UBUNTU24_04_IMAGE)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_buildbuddy_buildbuddy_toolchain//:rules.bzl"</span>, <span class="pl-s">"buildbuddy"</span>, <span class="pl-s">"UBUNTU24_04_IMAGE"</span>)

<span class="pl-en">buildbuddy</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"buildbuddy_toolchain"</span>, <span class="pl-s1">container_image</span> <span class="pl-c1">=</span> <span class="pl-v">UBUNTU24_04_IMAGE</span>)</pre></div>
<p dir="auto">This image includes the following build tools:</p>
<ul dir="auto">
<li>GCC 13.3.0</li>
<li>GLIBC 2.39</li>
<li>Python 3.12.3</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Networking</h2><a id="user-content-networking" class="anchor" aria-label="Permalink: Networking" href="#networking"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you need networking, you must enable it for the actions that need it. There
is a performance hit when networking is enabled because networking resources
need to be setup and torn down for each action. Because of the performance hit,
you probably want to enable networking just for the actions that need it by
adding the following exec_properties:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="+    exec_properties = {
+        &quot;dockerNetwork&quot;:&quot;bridge&quot;,
+    },"><pre class="notranslate"><code>+    exec_properties = {
+        "dockerNetwork":"bridge",
+    },
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Additional resources</h2><a id="user-content-additional-resources" class="anchor" aria-label="Permalink: Additional resources" href="#additional-resources"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Check out our official documentation for <a href="https://www.buildbuddy.io/docs/rbe-setup" rel="nofollow">RBE Setup</a></li>
<li>For more advanced use cases, check out Bazel's <a href="https://github.com/bazelbuild/bazel-toolchains">bazel-toolchains repo</a> and the <a href="https://docs.bazel.build/versions/master/tutorial/cc-toolchain-config.html" rel="nofollow">docs on configuring C++ toolchains</a>.</li>
<li>Many thanks to the maintainers of <a href="https://github.com/bazel-contrib/toolchains_llvm">LLVM toolchain repo</a>, which served as the basis for this repo.</li>
<li>Major props to the team at VSCO who's <a href="https://github.com/vsco/bazel-toolchains">toolchain repo</a> paved the way for using LLVM as a Bazel toolchain.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Other CC toolchains</h2><a id="user-content-other-cc-toolchains" class="anchor" aria-label="Permalink: Other CC toolchains" href="#other-cc-toolchains"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For advanced users who want to write their own CC toolchain, these existing CC toolchains that can serve as references:</p>
<ul dir="auto">
<li>
<p dir="auto">Bazel's <a href="https://cs.opensource.google/bazel/bazel/+/master:tools/cpp/;drc=bd2da6e977172398bb6612c3a45e91fd1192961a" rel="nofollow">default local CC toolchains</a></p>
</li>
<li>
<p dir="auto">Uber's <a href="https://github.com/uber/hermetic_cc_toolchain/">Zig-based CC Toolchain</a></p>
</li>
<li>
<p dir="auto"><a href="https://github.com/bazel-contrib/toolchains_llvm">LLVM toolchain</a></p>
</li>
<li>
<p dir="auto"><a href="https://github.com/bazel-contrib/musl-toolchain">MUSL toolchain</a></p>
</li>
<li>
<p dir="auto"><a href="https://github.com/f0rmiga/gcc-toolchain">GCC toolchain</a></p>
</li>
<li>
<p dir="auto">Apple_support's <a href="https://github.com/bazelbuild/apple_support/blob/a40bcaa218ee423168dd3f9af8085e6bacac2f9f/crosstool/cc_toolchain_config.bzl#L14">XCode toolchain</a></p>
</li>
</ul>
</article></div>