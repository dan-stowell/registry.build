<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">A simple C++ URL class</h1><a id="user-content-a-simple-c-url-class" class="anchor" aria-label="Permalink: A simple C++ URL class" href="#a-simple-c-url-class"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">CMake</h3><a id="user-content-cmake" class="anchor" aria-label="Permalink: CMake" href="#cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you are developing your project with CMake you can include this library with the <code>find_package</code> mechanism of CMake.
First, either run <code>make install</code> or include this project via <code>add_subdirectory</code>.
Afterwards, you can link to this lib like so:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake_minimum_required(VERSION 3.4)

project(example_find_package)

find_package(CxxUrl REQUIRED)

add_executable(${PROJECT_NAME} main.cpp)

target_link_libraries(${PROJECT_NAME} PUBLIC chmike::CxxUrl)"><pre><span class="pl-c1">cmake_minimum_required</span>(<span class="pl-c1">VERSION</span> <span class="pl-s">3.4</span>)

<span class="pl-c1">project</span>(<span class="pl-s">example_find_package</span>)

<span class="pl-c1">find_package</span>(<span class="pl-s">CxxUrl</span> <span class="pl-s">REQUIRED</span>)

<span class="pl-c1">add_executable</span>(<span class="pl-smi">${PROJECT_NAME}</span> <span class="pl-s">main.cpp</span>)

<span class="pl-c1">target_link_libraries</span>(<span class="pl-smi">${PROJECT_NAME}</span> <span class="pl-c1">PUBLIC</span> <span class="pl-s">chmike::CxxUrl</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">The <code>Url</code> object API</h3><a id="user-content-the-url-object-api" class="anchor" aria-label="Permalink: The Url object API" href="#the-url-object-api"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>Url</code> is a C++ URL handling class with a very simple API. It's use is straightforward.</p>
<p dir="auto">URIs that don't follow the URL standard defined in <a href="https://datatracker.ietf.org/doc/html/rfc3986" rel="nofollow">RFC3986</a> might not be correctly parsed in all cases.</p>
<ul dir="auto">
<li>
<p dir="auto">Construct an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="Url u1;
Url u2(&quot;http://www.example.com/&quot;);
Url u3(u2);"><pre>Url u1;
Url <span class="pl-en">u2</span>(<span class="pl-s"><span class="pl-pds">"</span>http://www.example.com/<span class="pl-pds">"</span></span>);
Url <span class="pl-en">u3</span>(u2);</pre></div>
</li>
<li>
<p dir="auto">Assigning an url to an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="u1=u2;
u2=&quot;http://www.example.com/&quot;;"><pre>u1=u2;
u2=<span class="pl-s"><span class="pl-pds">"</span>http://www.example.com/<span class="pl-pds">"</span></span>;</pre></div>
</li>
<li>
<p dir="auto">Getting the url as a string</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="std::string url_str=url.str();"><pre>std::string url_str=url.str();</pre></div>
</li>
<li>
<p dir="auto">Clearing an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="u1.clear();"><pre>u1.clear();</pre></div>
</li>
<li>
<p dir="auto">Getting the different fields of an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="std::string scheme_str=u1.scheme();
std::string user_info_str=u1.user_info();
std::string host_str=u1.host();
std::uint8_t ip_version=u1.ip_version();
// 0=name, 4=IPv4, 6=IPv6,-1=undefined
std::string port_str=u1.port();
std::string path_str=u1.path();
Url::Query query=u1.query();
std::string fragment_str=u1.fragment();"><pre>std::string scheme_str=u1.scheme();
std::string user_info_str=u1.user_info();
std::string host_str=u1.host();
std::<span class="pl-c1">uint8_t</span> ip_version=u1.ip_version();
<span class="pl-c"><span class="pl-c">//</span> 0=name, 4=IPv4, 6=IPv6,-1=undefined</span>
std::string port_str=u1.port();
std::string path_str=u1.path();
Url::Query query=u1.query();
std::string fragment_str=u1.fragment();</pre></div>
</li>
<li>
<p dir="auto">Setting the different fields of an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="u1.clear().scheme(&quot;http&quot;).host(&quot;www.example.com&quot;).path(&quot;/&quot;);
u1.add_query(&quot;q&quot;,&quot;some search key&quot;).add_query(&quot;fast&quot;);
assert(u1.str()==&quot;http://www.example.com/?q=some+search+key&amp;fast&quot;);"><pre>u1.clear().scheme(<span class="pl-s"><span class="pl-pds">"</span>http<span class="pl-pds">"</span></span>).host(<span class="pl-s"><span class="pl-pds">"</span>www.example.com<span class="pl-pds">"</span></span>).path(<span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>);
u1.add_query(<span class="pl-s"><span class="pl-pds">"</span>q<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>some search key<span class="pl-pds">"</span></span>).add_query(<span class="pl-s"><span class="pl-pds">"</span>fast<span class="pl-pds">"</span></span>);
<span class="pl-en">assert</span>(u1.str()=="http:<span class="pl-c"><span class="pl-c">//</span>www.example.com/?q=some+search+key&amp;fast");</span></pre></div>
</li>
<li>
<p dir="auto">Accessing the key and values in the query</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="u1.clear().add_query(&quot;a&quot;,&quot;b&quot;).add_query(&quot;c&quot;,&quot;d&quot;);
assert(u1.query(0).val()==&quot;b&quot;);
assert(u1.query(1).key()==&quot;c&quot;);
assert(u1.str()==&quot;?a=b&amp;c=d&quot;);
u1.set_query(0).val(&quot;B&quot;);
u1.set_query(1).key(&quot;C&quot;);
assert(u1.str()==&quot;?a=B&amp;C=d&quot;);"><pre>u1.clear().add_query(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>).add_query(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>d<span class="pl-pds">"</span></span>);
<span class="pl-en">assert</span>(u1.query(<span class="pl-c1">0</span>).val()=="b");
<span class="pl-en">assert</span>(u1.query(<span class="pl-c1">1</span>).key()=="c");
<span class="pl-en">assert</span>(u1.str()=="?a=b&amp;c=d");
u1.set_query(<span class="pl-c1">0</span>).val(<span class="pl-s"><span class="pl-pds">"</span>B<span class="pl-pds">"</span></span>);
u1.set_query(<span class="pl-c1">1</span>).key(<span class="pl-s"><span class="pl-pds">"</span>C<span class="pl-pds">"</span></span>);
<span class="pl-en">assert</span>(u1.str()=="?a=B&amp;C=d");</pre></div>
</li>
<li>
<p dir="auto">Output of an <code>Url</code> object</p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="u1.str(&quot;http://www.example.com/?q=some+search+key&amp;fast&quot;);
std::stringstream str;
str &lt;&lt; u1;
assert(str.str()==&quot;Url:{url(http://www.example.com/?q=some+search+key&amp;fast) &quot;
       &quot;scheme(http) host(www.example.com) IPv(0) path(/) &quot;
       &quot;query(&lt;key(q) val(some search key)&gt; &lt;key(fast) val()&gt;)}&quot;);"><pre>u1.str(<span class="pl-s"><span class="pl-pds">"</span>http://www.example.com/?q=some+search+key&amp;fast<span class="pl-pds">"</span></span>);
std::stringstream str;
str &lt;&lt; u1;
<span class="pl-en">assert</span>(str.str()=="Url:{<span class="pl-c1">url</span>(http:<span class="pl-c"><span class="pl-c">//</span>www.example.com/?q=some+search+key&amp;fast) "</span>
       <span class="pl-s"><span class="pl-pds">"</span>scheme(http) host(www.example.com) IPv(0) path(/) <span class="pl-pds">"</span></span>
       <span class="pl-s"><span class="pl-pds">"</span>query(&lt;key(q) val(some search key)&gt; &lt;key(fast) val()&gt;)}<span class="pl-pds">"</span></span>);</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Implementation detail</h3><a id="user-content-implementation-detail" class="anchor" aria-label="Permalink: Implementation detail" href="#implementation-detail"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>Url</code> object uses lazy URL parsing and building. When a URL as string is
assigned to the object, it is not immediatly parsed. It can then be assigned or
moved to another <code>Url</code> object efficiently. The URL is parsed only when needed,
which is before one of the fields is accessed or set, or when the object is
output.</p>
<p dir="auto">The URL is built only when the <code>str()</code> method is called or when the <code>Url</code> object
is output.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Testing the library</h3><a id="user-content-testing-the-library" class="anchor" aria-label="Permalink: Testing the library" href="#testing-the-library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In order to quickly build a static library and test the code, the following
sequence of bash instructions may work for you.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="g++ -c url.cpp
ar rvs CxxUrl.a url.o
g++ main.cpp CxxUrl.a
./a.out"><pre class="notranslate"><code>g++ -c url.cpp
ar rvs CxxUrl.a url.o
g++ main.cpp CxxUrl.a
./a.out
</code></pre></div>
</article></div>