<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">asio-grpc</h1><a id="user-content-asio-grpc" class="anchor" aria-label="Permalink: asio-grpc" href="#asio-grpc"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://sonarcloud.io/summary/overall?id=Tradias_asio-grpc" rel="nofollow"><img src="https://camo.githubusercontent.com/e48d2567153c8fe52952ef2fdf5421177516b57a0ddf739c0865ed38c2a962c1/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d547261646961735f6173696f2d67727063266d65747269633d72656c696162696c6974795f726174696e67" alt="Reliability Rating" data-canonical-src="https://sonarcloud.io/api/project_badges/measure?project=Tradias_asio-grpc&amp;metric=reliability_rating" style="max-width: 100%;"></a> <a href="https://sonarcloud.io/summary/overall?id=Tradias_asio-grpc" rel="nofollow"><img src="https://camo.githubusercontent.com/d5e673bc994bd72ba8fd4f14d8f86149c3c8284988d6d00c6b302fe19424a876/68747470733a2f2f736f6e6172636c6f75642e696f2f6170692f70726f6a6563745f6261646765732f6d6561737572653f70726f6a6563743d547261646961735f6173696f2d67727063266d65747269633d636f766572616765" alt="Coverage" data-canonical-src="https://sonarcloud.io/api/project_badges/measure?project=Tradias_asio-grpc&amp;metric=coverage" style="max-width: 100%;"></a> <a href="https://repology.org/project/asio-grpc/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/a790fb4b3e4f820ba4630882676a6c20c824826e8b66a2884ba32d672303415b/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f76657273696f6e2d666f722d7265706f2f7663706b672f6173696f2d677270632e7376673f6865616465723d7663706b67" alt="vcpkg" data-canonical-src="https://repology.org/badge/version-for-repo/vcpkg/asio-grpc.svg?header=vcpkg" style="max-width: 100%;"></a> <a href="https://repology.org/project/asio-grpc/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/6e53a626d5530cc4344dc1b7bdb6a0ff39e9057dbcf25ac726035f9444c36cbd/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f76657273696f6e2d666f722d7265706f2f636f6e616e63656e7465722f6173696f2d677270632e7376673f6865616465723d636f6e616e" alt="conan" data-canonical-src="https://repology.org/badge/version-for-repo/conancenter/asio-grpc.svg?header=conan" style="max-width: 100%;"></a> <a href="https://hunter.readthedocs.io/en/latest/packages/pkg/asio-grpc.html" rel="nofollow"><img src="https://camo.githubusercontent.com/0eacf436a1ba98e1c9cefbe21d155225df13cbbc1f1c474cb49d908f532d9e17/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f68756e7465722d6173696f5f677270632d677265656e2e737667" alt="hunter" data-canonical-src="https://img.shields.io/badge/hunter-asio_grpc-green.svg" style="max-width: 100%;"></a></p>
<p dir="auto">An <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/Executor1.html#boost_asio.reference.Executor1.standard_executors" rel="nofollow">Executor, Networking TS</a> and <a href="http://wg21.link/p2300" rel="nofollow">std::execution</a> interface to <a href="https://grpc.github.io/grpc/cpp/classgrpc_1_1_completion_queue.html" rel="nofollow">grpc::CompletionQueue</a> for writing asynchronous <a href="https://grpc.io/" rel="nofollow">gRPC</a> clients and servers using C++20 coroutines, Boost.Coroutines, Asio's stackless coroutines, callbacks, sender/receiver and more.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Features</h1><a id="user-content-features" class="anchor" aria-label="Permalink: Features" href="#features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Asio <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/ExecutionContext.html" rel="nofollow">ExecutionContext</a> compatible wrapper around <a href="https://grpc.github.io/grpc/cpp/classgrpc_1_1_completion_queue.html" rel="nofollow">grpc::CompletionQueue</a></li>
<li>Support for all RPC types: unary, client-streaming, server-streaming and bidirectional-streaming with any mix of Asio <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/asynchronous_operations.html#boost_asio.reference.asynchronous_operations.completion_tokens_and_handlers" rel="nofollow">CompletionToken</a> as well as <a href="https://github.com/facebookexperimental/libunifex/blob/main/doc/concepts.md#sender-concept">Sender</a>, including allocator customization</li>
<li>Support for asynchronously waiting for <a href="https://grpc.github.io/grpc/cpp/classgrpc_1_1_alarm.html" rel="nofollow">grpc::Alarms</a> including cancellation through <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/cancellation_slot.html" rel="nofollow">cancellation_slots</a> and <a href="https://github.com/facebookexperimental/libunifex/blob/main/doc/concepts.md#stoptoken-concept">StopTokens</a></li>
<li>Support for sender/receiver through either <a href="https://github.com/facebookexperimental/libunifex">libunifex</a> or <a href="https://github.com/NVIDIA/stdexec">stdexec</a></li>
<li>Support for generic gRPC clients and servers</li>
<li>No extra codegen required, works with the vanilla gRPC C++ plugin (<code>grpc_cpp_plugin</code>)</li>
<li>No-Boost version with <a href="https://github.com/chriskohlhoff/asio">standalone Asio</a></li>
<li>No-Asio version with <a href="https://github.com/facebookexperimental/libunifex">libunifex</a> or <a href="https://github.com/NVIDIA/stdexec">stdexec</a></li>
<li>CMake function to easily generate gRPC source files: <a href="/cmake/AsioGrpcProtobufGenerator.cmake">asio_grpc_protobuf_generate</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Example</h1><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Hello world client using C++20 coroutines. Other Asio completion tokens are supported as well.</p>

<p dir="auto"><a id="user-content-snippet-client-side-hello-world"></a></p>
<div class="highlight highlight-source-c++ notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="helloworld::Greeter::Stub stub(grpc::CreateChannel(&quot;localhost:50051&quot;, grpc::InsecureChannelCredentials()));
agrpc::GrpcContext grpc_context;
asio::co_spawn(
    grpc_context,
    [&amp;]() -&gt; asio::awaitable&lt;void&gt;
    {
        using RPC = agrpc::ClientRPC&lt;&amp;helloworld::Greeter::Stub::PrepareAsyncSayHello&gt;;
        grpc::ClientContext client_context;
        helloworld::HelloRequest request;
        request.set_name(&quot;world&quot;);
        helloworld::HelloReply response;
        const grpc::Status status =
            co_await RPC::request(grpc_context, stub, client_context, request, response, asio::use_awaitable);
        assert(status.ok());
    },
    asio::detached);
grpc_context.run();"><pre>helloworld::Greeter::Stub <span class="pl-en">stub</span>(grpc::CreateChannel(<span class="pl-s"><span class="pl-pds">"</span>localhost:50051<span class="pl-pds">"</span></span>, grpc::InsecureChannelCredentials()));
agrpc::GrpcContext grpc_context;
<span class="pl-en">asio::co_spawn</span>(
    grpc_context,
    [&amp;]() -&gt; asio::awaitable&lt;void&gt;
    {
        <span class="pl-k">using</span> RPC = agrpc::ClientRPC&lt;&amp;helloworld::Greeter::Stub::PrepareAsyncSayHello&gt;;
        grpc::ClientContext client_context;
        helloworld::HelloRequest request;
        request.<span class="pl-c1">set_name</span>(<span class="pl-s"><span class="pl-pds">"</span>world<span class="pl-pds">"</span></span>);
        helloworld::HelloReply response;
        <span class="pl-k">const</span> grpc::Status status =
            <span class="pl-k">co_await</span> <span class="pl-smi">RPC::request</span>(grpc_context, stub, client_context, request, response, asio::use_awaitable);
        <span class="pl-c1">assert</span>(status.<span class="pl-c1">ok</span>());
    },
    asio::detached);
grpc_context.run();</pre></div>
<p dir="auto"><sup><a href="/example/snippets/client.cpp#L83-L101" title="Snippet source file">snippet source</a> | <a href="#snippet-client-side-hello-world" title="Start of snippet">anchor</a></sup></p>

<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Requirements</h1><a id="user-content-requirements" class="anchor" aria-label="Permalink: Requirements" href="#requirements"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Asio-grpc is a C++17, header-only library. To install it, CMake (3.14+) is all that is needed.</p>
<p dir="auto">To use it, <a href="https://grpc.io/" rel="nofollow">gRPC</a> and either <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio.html" rel="nofollow">Boost.Asio</a> (min. 1.74.0), <a href="https://github.com/chriskohlhoff/asio">standalone Asio</a> (min. 1.17.0), <a href="https://github.com/facebookexperimental/libunifex">libunifex</a> or <a href="https://github.com/NVIDIA/stdexec">stdexec</a> must be present and linked into your application.</p>
<p dir="auto">Officially supported compilers are GCC 10+, Clang 13+, AppleClang 15+ and latest MSVC.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Usage</h1><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The library can be added to a CMake project using either <code>add_subdirectory</code> or <code>find_package</code>. Once set up, include the individual headers from the <code>agrpc</code> directory.</p>
<details><summary><b>vcpkg</b></summary>
<p dir="auto">
</p><p dir="auto">Add <a href="https://github.com/microsoft/vcpkg/blob/master/ports/asio-grpc/vcpkg.json">asio-grpc</a> to the dependencies inside your <code>vcpkg.json</code>:</p>
<div class="highlight highlight-source-json-comments notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="{
    &quot;name&quot;: &quot;your_app&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;dependencies&quot;: [
        &quot;asio-grpc&quot;,
        // To use the Boost.Asio backend add
        // &quot;boost-asio&quot;,
        // To use the standalone Asio backend add
        // &quot;asio&quot;,
        // To use the libunifex backend add
        // &quot;libunifex&quot;,
        // To use the stdexec backend add
        // &quot;stdexec&quot;
    ]
}"><pre>{
    <span class="pl-s">"name"</span>: <span class="pl-s"><span class="pl-pds">"</span>your_app<span class="pl-pds">"</span></span>,
    <span class="pl-s">"version"</span>: <span class="pl-s"><span class="pl-pds">"</span>0.1.0<span class="pl-pds">"</span></span>,
    <span class="pl-s">"dependencies"</span>: [
        <span class="pl-s"><span class="pl-pds">"</span>asio-grpc<span class="pl-pds">"</span></span>,
        <span class="pl-c"><span class="pl-c">//</span> To use the Boost.Asio backend add</span>
        <span class="pl-c"><span class="pl-c">//</span> "boost-asio",</span>
        <span class="pl-c"><span class="pl-c">//</span> To use the standalone Asio backend add</span>
        <span class="pl-c"><span class="pl-c">//</span> "asio",</span>
        <span class="pl-c"><span class="pl-c">//</span> To use the libunifex backend add</span>
        <span class="pl-c"><span class="pl-c">//</span> "libunifex",</span>
        <span class="pl-c"><span class="pl-c">//</span> To use the stdexec backend add</span>
        <span class="pl-c"><span class="pl-c">//</span> "stdexec"</span>
    ]
}</pre></div>
<p dir="auto">Find asio-grpc and link it to your target.</p>
<p dir="auto">Using <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio.html" rel="nofollow">Boost.Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(asio-grpc CONFIG REQUIRED)
find_package(Boost REQUIRED)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc Boost::headers)"><pre><span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(Boost REQUIRED)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc Boost::headers)</pre></div>
<p dir="auto">Or using <a href="https://github.com/chriskohlhoff/asio">standalone Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(asio-grpc CONFIG REQUIRED)
find_package(asio CONFIG REQUIRED)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-standalone-asio asio::asio)"><pre><span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(asio CONFIG REQUIRED)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-standalone-asio asio::asio)</pre></div>
<p dir="auto">Or using <a href="https://github.com/facebookexperimental/libunifex">libunifex</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(asio-grpc CONFIG REQUIRED)
find_package(unifex CONFIG REQUIRED)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-unifex unifex::unifex)"><pre><span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(unifex CONFIG REQUIRED)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-unifex unifex::unifex)</pre></div>
<p dir="auto">Or using <a href="https://github.com/NVIDIA/stdexec">stdexec</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(asio-grpc CONFIG REQUIRED)
find_package(stdexec CONFIG REQUIRED)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)"><pre><span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(stdexec CONFIG REQUIRED)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)</pre></div>
<p dir="auto"></p>
</details>
<details><summary><b>Hunter</b></summary>
<p dir="auto">
</p><p dir="auto">See asio-grpc's documentation on the Hunter website: <a href="https://hunter.readthedocs.io/en/latest/packages/pkg/asio-grpc.html" rel="nofollow">https://hunter.readthedocs.io/en/latest/packages/pkg/asio-grpc.html</a>.</p>
<p dir="auto"></p>
</details>
<details><summary><b>conan</b></summary>
<p dir="auto">
</p><p dir="auto">The recipe in conan-center is called <a href="https://conan.io/center/recipes/asio-grpc" rel="nofollow">asio-grpc</a>.<br>
If you are using conan's CMake generator then link with <code>asio-grpc::asio-grpc</code> independent of the backend that you choose:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(asio-grpc)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc)"><pre><span class="pl-k">find_package</span>(asio-grpc)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc)</pre></div>
<p dir="auto"></p>
</details>
<details><summary><b>CMake package</b></summary>
<p dir="auto">
</p><p dir="auto">Clone the repository and install it.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake -B build -DCMAKE_INSTALL_PREFIX=/desired/installation/directory .
cmake --build build --target install"><pre>cmake -B build -DCMAKE_INSTALL_PREFIX=/desired/installation/directory <span class="pl-c1">.</span>
cmake --build build --target install</pre></div>
<p dir="auto">Locate it and link it to your target.</p>
<p dir="auto">Using <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio.html" rel="nofollow">Boost.Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory
find_package(asio-grpc CONFIG REQUIRED)
find_package(Boost)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc Boost::headers)"><pre><span class="pl-c"># Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory</span>
<span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(Boost)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc Boost::headers)</pre></div>
<p dir="auto">Or using <a href="https://github.com/chriskohlhoff/asio">standalone Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory
find_package(asio-grpc CONFIG REQUIRED)
find_package(asio)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-standalone-asio asio::asio)"><pre><span class="pl-c"># Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory</span>
<span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(asio)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-standalone-asio asio::asio)</pre></div>
<p dir="auto">Or using <a href="https://github.com/facebookexperimental/libunifex">libunifex</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory
find_package(asio-grpc CONFIG REQUIRED)
find_package(unifex)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-unifex unifex::unifex)"><pre><span class="pl-c"># Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory</span>
<span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(unifex)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-unifex unifex::unifex)</pre></div>
<p dir="auto">Or using <a href="https://github.com/NVIDIA/stdexec">stdexec</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory
find_package(asio-grpc CONFIG REQUIRED)
find_package(stdexec)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)"><pre><span class="pl-c"># Make sure CMAKE_PREFIX_PATH contains /desired/installation/directory</span>
<span class="pl-k">find_package</span>(asio-grpc CONFIG REQUIRED)
<span class="pl-k">find_package</span>(stdexec)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)</pre></div>
<p dir="auto"></p>
</details>
<details><summary><b>CMake subdirectory</b></summary>
<p dir="auto">
</p><p dir="auto">Clone the repository into a subdirectory of your CMake project. Then add it and link it to your target.</p>
<p dir="auto">Independent of the backend you chose, find and link with gRPC:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(gRPC)
target_link_libraries(your_app PUBLIC gRPC::grpc++)"><pre><span class="pl-k">find_package</span>(gRPC)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> gRPC::grpc++)</pre></div>
<p dir="auto">Using <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio.html" rel="nofollow">Boost.Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="add_subdirectory(/path/to/asio-grpc SYSTEM)
find_package(Boost)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc Boost::headers)"><pre><span class="pl-k">add_subdirectory</span>(/<span class="pl-k">path</span>/to/asio-grpc <span class="pl-c1">SYSTEM</span>)
<span class="pl-k">find_package</span>(Boost)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc Boost::headers)</pre></div>
<p dir="auto">Or using <a href="https://github.com/chriskohlhoff/asio">standalone Asio</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="add_subdirectory(/path/to/asio-grpc SYSTEM)
find_package(asio)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-standalone-asio asio::asio)"><pre><span class="pl-k">add_subdirectory</span>(/<span class="pl-k">path</span>/to/asio-grpc <span class="pl-c1">SYSTEM</span>)
<span class="pl-k">find_package</span>(asio)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-standalone-asio asio::asio)</pre></div>
<p dir="auto">Or using <a href="https://github.com/facebookexperimental/libunifex">libunifex</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="add_subdirectory(/path/to/asio-grpc SYSTEM)
find_package(unifex)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-unifex unifex::unifex)"><pre><span class="pl-k">add_subdirectory</span>(/<span class="pl-k">path</span>/to/asio-grpc <span class="pl-c1">SYSTEM</span>)
<span class="pl-k">find_package</span>(unifex)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-unifex unifex::unifex)</pre></div>
<p dir="auto">Or using <a href="https://github.com/NVIDIA/stdexec">stdexec</a>:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="add_subdirectory(/path/to/asio-grpc SYSTEM)
find_package(stdexec)
target_link_libraries(your_app PUBLIC asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)"><pre><span class="pl-k">add_subdirectory</span>(/<span class="pl-k">path</span>/to/asio-grpc <span class="pl-c1">SYSTEM</span>)
<span class="pl-k">find_package</span>(stdexec)
<span class="pl-k">target_link_libraries</span>(your_app <span class="pl-e">PUBLIC</span> asio-grpc::asio-grpc-stdexec STDEXEC::stdexec)</pre></div>
<p dir="auto"></p>
</details>
<details><summary><b>Raw source code</b></summary>
<p dir="auto">
</p><p dir="auto">This type of usage is unsupported. Future versions of asio-grpc might break it without notice.</p>
<p dir="auto">Copy the contents of the <code>src/</code> directory into your project and add it to your project's include directories. Depending on your desired backend: Boost.Asio,
standalone Asio, libunifex or stdexec, set the preprocessor definitions <code>AGRPC_BOOST_ASIO</code>, <code>AGRPC_STANDALONE_ASIO</code>, <code>AGRPC_UNIFEX</code> or <code>AGRPC_STDEXEC</code> respectively. Also make sure that
the backend's header files and libraries can be found correctly.</p>
<p dir="auto"></p>
</details>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">CMake Options</h2><a id="user-content-cmake-options" class="anchor" aria-label="Permalink: CMake Options" href="#cmake-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>ASIO_GRPC_DISABLE_AUTOLINK</code> - Set before using <code>find_package(asio-grpc)</code> to prevent <code>asio-grpcConfig.cmake</code> from finding and setting up interface link libraries like <code>gRPC::grpc++</code>.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Performance</h1><a id="user-content-performance" class="anchor" aria-label="Permalink: Performance" href="#performance"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">asio-grpc is part of <a href="https://github.com/Tradias/grpc_bench">grpc_bench</a>. Head over there to compare its performance against other libraries and languages.</p>
<details><summary><b>Results</b></summary>
<p dir="auto">
</p><p dir="auto">Below are the results from the helloworld unary RPC for:<br>
Intel(R) Core(TM) i7-8750H CPU @ 2.20GHz<br>
Linux, GCC 12.2.0, Boost 1.80.0, gRPC 1.52.1, asio-grpc v2.5.0, jemalloc 5.2.1<br>
Request scenario: string_100B</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">1 CPU server</h3><a id="user-content-1-cpu-server" class="anchor" aria-label="Permalink: 1 CPU server" href="#1-cpu-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>name</th>
<th align="right">req/s</th>
<th align="right">avg. latency</th>
<th align="right">90 % in</th>
<th align="right">95 % in</th>
<th align="right">99 % in</th>
<th align="right">avg. cpu</th>
<th align="right">avg. memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>rust_thruster_mt</td>
<td align="right">48796</td>
<td align="right">20.19 ms</td>
<td align="right">9.42 ms</td>
<td align="right">12.11 ms</td>
<td align="right">516.23 ms</td>
<td align="right">104.51%</td>
<td align="right">12.06 MiB</td>
</tr>
<tr>
<td>rust_tonic_mt</td>
<td align="right">43343</td>
<td align="right">22.86 ms</td>
<td align="right">10.42 ms</td>
<td align="right">11.29 ms</td>
<td align="right">662.73 ms</td>
<td align="right">102.29%</td>
<td align="right">14.39 MiB</td>
</tr>
<tr>
<td>go_grpc</td>
<td align="right">38541</td>
<td align="right">25.33 ms</td>
<td align="right">38.74 ms</td>
<td align="right">42.98 ms</td>
<td align="right">53.94 ms</td>
<td align="right">100.0%</td>
<td align="right">25.19 MiB</td>
</tr>
<tr>
<td>rust_grpcio</td>
<td align="right">34757</td>
<td align="right">28.65 ms</td>
<td align="right">30.18 ms</td>
<td align="right">30.60 ms</td>
<td align="right">31.68 ms</td>
<td align="right">101.91%</td>
<td align="right">18.59 MiB</td>
</tr>
<tr>
<td>cpp_grpc_mt</td>
<td align="right">33433</td>
<td align="right">29.77 ms</td>
<td align="right">31.56 ms</td>
<td align="right">32.07 ms</td>
<td align="right">33.58 ms</td>
<td align="right">102.22%</td>
<td align="right">5.69 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_callback</td>
<td align="right">32521</td>
<td align="right">30.61 ms</td>
<td align="right">32.54 ms</td>
<td align="right">33.14 ms</td>
<td align="right">35.29 ms</td>
<td align="right">101.65%</td>
<td align="right">5.93 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_unifex</td>
<td align="right">32507</td>
<td align="right">30.62 ms</td>
<td align="right">32.50 ms</td>
<td align="right">32.99 ms</td>
<td align="right">34.66 ms</td>
<td align="right">102.94%</td>
<td align="right">5.81 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_coroutine</td>
<td align="right">28893</td>
<td align="right">34.47 ms</td>
<td align="right">36.78 ms</td>
<td align="right">37.37 ms</td>
<td align="right">38.88 ms</td>
<td align="right">102.52%</td>
<td align="right">5.56 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_io_context_coro</td>
<td align="right">28072</td>
<td align="right">35.47 ms</td>
<td align="right">37.77 ms</td>
<td align="right">38.22 ms</td>
<td align="right">39.93 ms</td>
<td align="right">77.73%</td>
<td align="right">5.39 MiB</td>
</tr>
<tr>
<td>cpp_grpc_callback</td>
<td align="right">10243</td>
<td align="right">90.44 ms</td>
<td align="right">118.77 ms</td>
<td align="right">164.20 ms</td>
<td align="right">175.43 ms</td>
<td align="right">100.62%</td>
<td align="right">44.9 MiB</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">2 CPU server</h3><a id="user-content-2-cpu-server" class="anchor" aria-label="Permalink: 2 CPU server" href="#2-cpu-server"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>name</th>
<th align="right">req/s</th>
<th align="right">avg. latency</th>
<th align="right">90 % in</th>
<th align="right">95 % in</th>
<th align="right">99 % in</th>
<th align="right">avg. cpu</th>
<th align="right">avg. memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpp_grpc_mt</td>
<td align="right">87550</td>
<td align="right">9.66 ms</td>
<td align="right">15.11 ms</td>
<td align="right">18.23 ms</td>
<td align="right">27.03 ms</td>
<td align="right">204.66%</td>
<td align="right">26.15 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_unifex</td>
<td align="right">86568</td>
<td align="right">9.83 ms</td>
<td align="right">15.34 ms</td>
<td align="right">18.55 ms</td>
<td align="right">27.12 ms</td>
<td align="right">207.78%</td>
<td align="right">27.54 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_callback</td>
<td align="right">85292</td>
<td align="right">10.03 ms</td>
<td align="right">15.38 ms</td>
<td align="right">18.51 ms</td>
<td align="right">26.62 ms</td>
<td align="right">206.63%</td>
<td align="right">24.73 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_coroutine</td>
<td align="right">79647</td>
<td align="right">11.04 ms</td>
<td align="right">18.01 ms</td>
<td align="right">21.08 ms</td>
<td align="right">28.67 ms</td>
<td align="right">212.19%</td>
<td align="right">25.04 MiB</td>
</tr>
<tr>
<td>cpp_asio_grpc_io_context_coro</td>
<td align="right">77953</td>
<td align="right">11.24 ms</td>
<td align="right">18.32 ms</td>
<td align="right">21.61 ms</td>
<td align="right">29.20 ms</td>
<td align="right">161.24%</td>
<td align="right">28.4 MiB</td>
</tr>
<tr>
<td>rust_thruster_mt</td>
<td align="right">75793</td>
<td align="right">11.90 ms</td>
<td align="right">26.84 ms</td>
<td align="right">40.49 ms</td>
<td align="right">59.71 ms</td>
<td align="right">186.64%</td>
<td align="right">13.85 MiB</td>
</tr>
<tr>
<td>cpp_grpc_callback</td>
<td align="right">68203</td>
<td align="right">12.24 ms</td>
<td align="right">23.93 ms</td>
<td align="right">28.62 ms</td>
<td align="right">41.83 ms</td>
<td align="right">206.38%</td>
<td align="right">52.79 MiB</td>
</tr>
<tr>
<td>rust_tonic_mt</td>
<td align="right">67162</td>
<td align="right">13.85 ms</td>
<td align="right">34.05 ms</td>
<td align="right">46.31 ms</td>
<td align="right">69.58 ms</td>
<td align="right">206.13%</td>
<td align="right">17.24 MiB</td>
</tr>
<tr>
<td>rust_grpcio</td>
<td align="right">60775</td>
<td align="right">15.49 ms</td>
<td align="right">22.85 ms</td>
<td align="right">25.77 ms</td>
<td align="right">31.14 ms</td>
<td align="right">218.05%</td>
<td align="right">30.15 MiB</td>
</tr>
<tr>
<td>go_grpc</td>
<td align="right">58192</td>
<td align="right">15.87 ms</td>
<td align="right">24.31 ms</td>
<td align="right">27.10 ms</td>
<td align="right">32.43 ms</td>
<td align="right">197.71%</td>
<td align="right">25.06 MiB</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"></p>
</details>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Documentation</h1><a id="user-content-documentation" class="anchor" aria-label="Permalink: Documentation" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://tradias.github.io/asio-grpc/" rel="nofollow"><strong>Documentation</strong></a> | <a href="/example"><strong>Examples</strong></a></p>
<p dir="auto">The main workhorses of this library are the <a href="https://tradias.github.io/asio-grpc/classagrpc_1_1_grpc_context.html" rel="nofollow">agrpc::GrpcContext</a> and its <code>executor_type</code> - <a href="https://tradias.github.io/asio-grpc/classagrpc_1_1_basic_grpc_executor.html" rel="nofollow">agrpc::GrpcExecutor</a>.</p>
<p dir="auto">The <a href="https://tradias.github.io/asio-grpc/classagrpc_1_1_grpc_context.html" rel="nofollow">agrpc::GrpcContext</a> implements <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/execution_context.html" rel="nofollow">asio::execution_context</a> and can be used as an argument to Asio functions that expect an <code>ExecutionContext</code> like <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/spawn/overload2.html" rel="nofollow">asio::spawn</a>.</p>
<p dir="auto">Likewise, the <a href="https://tradias.github.io/asio-grpc/classagrpc_1_1_basic_grpc_executor.html" rel="nofollow">agrpc::GrpcExecutor</a> satisfies the <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/Executor1.html#boost_asio.reference.Executor1.standard_executors" rel="nofollow">Executor and Networking TS</a> and <a href="https://github.com/facebookexperimental/libunifex/blob/main/doc/concepts.md#scheduler">Scheduler</a> requirements and can therefore be used in places where Asio/libunifex expects an <code>Executor</code> or <code>Scheduler</code>.</p>
<p dir="auto">The API for RPCs is modeled after the asynchronous, tag-based API of gRPC. As an example, the equivalent for <code>grpc::ClientAsyncReader&lt;helloworld::HelloReply&gt;.Read(helloworld::HelloReply*, void*)</code> would be <code>agrpc::ClientRPC.read(helloworld::HelloReply&amp;, CompletionToken)</code>.</p>
<p dir="auto">Instead of the <code>void*</code> tag in the gRPC API the functions in this library expect a <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/asynchronous_operations.html#boost_asio.reference.asynchronous_operations.completion_tokens_and_handlers" rel="nofollow">CompletionToken</a>. Asio comes with several CompletionTokens already: <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/use_awaitable.html" rel="nofollow">C++20 coroutine</a>, <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/coroutine.html" rel="nofollow">stackless coroutine</a>, callback and <a href="https://www.boost.org/doc/libs/1_86_0/doc/html/boost_asio/reference/basic_yield_context.html" rel="nofollow">Boost.Coroutine</a>. There is also a special token called <code>agrpc::use_sender</code> that causes RPC functions to return a <a href="https://github.com/facebookexperimental/libunifex/blob/main/doc/concepts.md#sender-concept">Sender</a>.</p>
<p dir="auto">If you are interested in learning more about the implementation details of this library then check out <a href="https://medium.com/3yourmind/c-20-coroutines-for-asynchronous-grpc-services-5b3dab1d1d61" rel="nofollow">this blog article</a>.</p>
<p dir="auto">Examples of entire projects can be found in another <a href="https://github.com/Tradias/example-vcpkg-grpc">repository</a>.</p>
</article></div>