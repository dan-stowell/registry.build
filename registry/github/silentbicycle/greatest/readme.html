<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">greatest</h1><a id="user-content-greatest" class="anchor" aria-label="Permalink: greatest" href="#greatest"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A testing system for C, contained in 1 header file.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Key Features and Project Goals</h2><a id="user-content-key-features-and-project-goals" class="anchor" aria-label="Permalink: Key Features and Project Goals" href="#key-features-and-project-goals"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>Small, Portable, Lightweight</strong></p>
<p dir="auto">greatest doesn't depend on anything beyond ANSI C89, and the test
scaffolding should build without warnings when compiled with
<code>-Wall -Wextra -pedantic</code>. It is under 1,000 LOC (SLOCCount),
and does no dynamic allocation.</p>
</li>
<li>
<p dir="auto"><strong>Permissive License</strong></p>
<p dir="auto">greatest is released under the <a href="https://opensource.org/licenses/ISC" rel="nofollow">ISC License</a>. You can use it
freely, even for commercial purposes.</p>
</li>
<li>
<p dir="auto"><strong>Easy To Set Up</strong></p>
<p dir="auto">To use, just <code>#include "greatest.h"</code> in your project. There is
very little boilerplate. Most features are optional.</p>
</li>
<li>
<p dir="auto"><strong>Un-Opinionated</strong></p>
<p dir="auto">When a command-line test runner is useful, greatest can provide one,
but it can also run as part of other programs. It doesn't depend on
a particular build system or other tooling, and should accommodate a
variety of testing approaches. It actively avoids imposing
architectural choices on code under test. While greatest was
designed with C in mind, it attempts to be usable from C++.</p>
</li>
<li>
<p dir="auto"><strong>Modular</strong></p>
<p dir="auto">Tests can be run individually, or grouped into suites. Suites can
share common setup, and can be in distinct compilation units.</p>
</li>
<li>
<p dir="auto"><strong>Low Friction</strong></p>
<p dir="auto">Specific tests or suites can be run by name, for focused and rapid
iteration during development. greatest adds very little startup
latency.</p>
</li>
</ul>
<p dir="auto">There are some compile-time options, and slightly nicer syntax for
parametric testing (running tests with arguments) if compiled
with a C99 or later language standard.</p>
<p dir="auto">I wrote a
<a href="http://spin.atomicobject.com/2013/07/31/greatest-c-testing-embedded/" rel="nofollow">blog post</a>
with more information. While it's several years old, it's still accurate
about the main functionality.</p>
<p dir="auto"><a href="https://github.com/silentbicycle/theft">theft</a>, a related project, adds <a href="https://spin.atomicobject.com/2014/09/17/property-based-testing-c/" rel="nofollow">property-based testing</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Basic Usage</h2><a id="user-content-basic-usage" class="anchor" aria-label="Permalink: Basic Usage" href="#basic-usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-c notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="#include &quot;greatest.h&quot;

/* A test runs various assertions, then calls PASS(), FAIL(), or SKIP(). */
TEST x_should_equal_1(void) {
    int x = 1;
    /* Compare, with an automatic &quot;1 != x&quot; failure message */
    ASSERT_EQ(1, x);

    /* Compare, with a custom failure message */
    ASSERT_EQm(&quot;Yikes, x doesn't equal 1&quot;, 1, x);

    /* Compare, and if they differ, print both values,
     * formatted like `printf(&quot;Expected: %d\nGot: %d\n&quot;, 1, x);` */
    ASSERT_EQ_FMT(1, x, &quot;%d&quot;);
    PASS();
}

/* Suites can group multiple tests with common setup. */
SUITE(the_suite) {
    RUN_TEST(x_should_equal_1);
}

/* Add definitions that need to be in the test runner's main file. */
GREATEST_MAIN_DEFS();

int main(int argc, char **argv) {
    GREATEST_MAIN_BEGIN();      /* command-line options, initialization. */

    /* Individual tests can be run directly in main, outside of suites. */
    /* RUN_TEST(x_should_equal_1); */

    /* Tests can also be gathered into test suites. */
    RUN_SUITE(the_suite);

    GREATEST_MAIN_END();        /* display results */
}"><pre><span class="pl-k">#include</span> <span class="pl-s">"greatest.h"</span>

<span class="pl-c">/* A test runs various assertions, then calls PASS(), FAIL(), or SKIP(). */</span>
<span class="pl-smi">TEST</span> <span class="pl-en">x_should_equal_1</span>(<span class="pl-smi">void</span>) {
    <span class="pl-smi">int</span> <span class="pl-s1">x</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>;
    <span class="pl-c">/* Compare, with an automatic "1 != x" failure message */</span>
    <span class="pl-en">ASSERT_EQ</span>(<span class="pl-c1">1</span>, <span class="pl-s1">x</span>);

    <span class="pl-c">/* Compare, with a custom failure message */</span>
    <span class="pl-en">ASSERT_EQm</span>(<span class="pl-s">"Yikes, x doesn't equal 1"</span>, <span class="pl-c1">1</span>, <span class="pl-s1">x</span>);

    <span class="pl-c">/* Compare, and if they differ, print both values,</span>
<span class="pl-c">     * formatted like `printf("Expected: %d\nGot: %d\n", 1, x);` */</span>
    <span class="pl-en">ASSERT_EQ_FMT</span>(<span class="pl-c1">1</span>, <span class="pl-s1">x</span>, <span class="pl-s">"%d"</span>);
    <span class="pl-en">PASS</span>();
}

<span class="pl-c">/* Suites can group multiple tests with common setup. */</span>
<span class="pl-smi">SUITE</span>(<span class="pl-s1">the_suite</span>) {
    <span class="pl-en">RUN_TEST</span>(<span class="pl-s1">x_should_equal_1</span>);
}

<span class="pl-c">/* Add definitions that need to be in the test runner's main file. */</span>
<span class="pl-en">GREATEST_MAIN_DEFS</span>();

<span class="pl-smi">int</span> <span class="pl-en">main</span>(<span class="pl-smi">int</span> <span class="pl-s1">argc</span>, <span class="pl-smi">char</span> <span class="pl-c1">*</span><span class="pl-c1">*</span><span class="pl-s1">argv</span>) {
    <span class="pl-en">GREATEST_MAIN_BEGIN</span>();      <span class="pl-c">/* command-line options, initialization. */</span>

    <span class="pl-c">/* Individual tests can be run directly in main, outside of suites. */</span>
    <span class="pl-c">/* RUN_TEST(x_should_equal_1); */</span>

    <span class="pl-c">/* Tests can also be gathered into test suites. */</span>
    <span class="pl-en">RUN_SUITE</span>(<span class="pl-s1">the_suite</span>);

    <span class="pl-en">GREATEST_MAIN_END</span>();        <span class="pl-c">/* display results */</span>
}</pre></div>
<p dir="auto">Output:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ make simple &amp;&amp; ./simple
cc -g -Wall -Werror -pedantic    simple.c   -o simple

* Suite the_suite:
.
1 test - 1 passed, 0 failed, 0 skipped (5 ticks, 0.000 sec)

Total: 1 test (47 ticks, 0.000 sec), 3 assertions
Pass: 1, fail: 0, skip: 0."><pre>$ make simple <span class="pl-k">&amp;&amp;</span> ./simple
cc -g -Wall -Werror -pedantic    simple.c   -o simple

<span class="pl-k">*</span> Suite the_suite:
<span class="pl-c1">.</span>
1 <span class="pl-c1">test</span> - 1 passed, 0 failed, 0 skipped (5 ticks, 0.000 sec)

Total: 1 <span class="pl-c1">test</span> (47 ticks, 0.000 sec), 3 assertions
Pass: 1, fail: 0, skip: 0.</pre></div>
<p dir="auto">Tests are run with <code>RUN_TEST(test_name)</code>, which can be called directly
from the test runner's <code>main</code> function or grouped into suites (which are
run with <code>RUN_SUITE(suite_name)</code>). (Calls to <code>RUN_TEST</code> from inside
another test are ignored.)</p>
<p dir="auto">Test cases can be run with arguments: <code>RUN_TEST1(test_name, arg)</code> passes
a single argument, and if C99 features are supported, then
<code>RUN_TESTp(test_name, ...)</code> uses <code>__VA_ARGS__</code> to run a test case with
one or mare arguments. <code>greatest_set_test_suffix</code> sets a name suffix, so
output from the test runner can include info about arguments.</p>
<p dir="auto">Test cases should call assertions and then end with <code>PASS()</code>, <code>SKIP()</code>,
<code>FAIL()</code>, or their custom message variants (e.g. <code>SKIPm("TODO");</code>).
If there are any test failures, the test runner will return 1,
otherwise it will return 0. (Skips do not cause the test runner to
report failure.)</p>
<p dir="auto"><code>PASS()</code>, <code>SKIP()</code>, <code>FAIL()</code>, and their custom message variants are
macros that updating internal bookkeeping and then returning and enum
value, such as <code>GREATEST_TEST_RES_FAIL</code>. They all <code>return</code> from the
current test case function.</p>
<p dir="auto"><code>PASS()</code>/<code>PASSm("msg")</code> prints as a dot when verbosity is zero, or
the test name and custom message (if any) with verbosity &gt;= 1.</p>
<p dir="auto"><code>FAIL()</code>/<code>FAILm("msg")</code> always prints "FAIL test_name: msg file:line".</p>
<p dir="auto"><code>SKIP()</code>/<code>SKIPm("msg")</code> prints as an 's' when verbosity is zero, or the
test name and custom message (if any) with verbosity &gt;= 1. Because skips
are not treated as a failure by the test runner, they can be used to
skip test cases that aren't relevant in a particular build or
environment, a way to temporarily disable broken tests, or as a sort of
todo list for tests and functionality under active development.</p>
<p dir="auto">Tests and suites are just functions, so normal C scoping rules apply.
For example, a test or suite named <code>main</code> will have a name collision.</p>
<p dir="auto">(For more examples, look at <code>example.c</code> and <code>example_suite.c</code>.)</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Filtering By Name</h2><a id="user-content-filtering-by-name" class="anchor" aria-label="Permalink: Filtering By Name" href="#filtering-by-name"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">greatest runs all tests by default, but can be configured to only run
suites or tests whose names contain a filter string, and/or exclude
tests whose name contains a filter string. When test name filtering and
exclusion are used together, exclusion takes precedence.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="void greatest_set_suite_filter(const char *name);
void greatest_set_test_filter(const char *name);
void greatest_set_test_exclude(const char *name);"><pre class="notranslate"><code>void greatest_set_suite_filter(const char *name);
void greatest_set_test_filter(const char *name);
void greatest_set_test_exclude(const char *name);
</code></pre></div>
<p dir="auto">These correspond to the following command line test runner options:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="`-s SUITE`:   Only run suites whose names contain the string &quot;SUITE&quot;
`-t TEST`:    Only run tests whose names contain the string &quot;TEST&quot;
`-x EXCLUDE`: Exclude tests whose names contain the string &quot;EXCLUDE&quot;"><pre class="notranslate"><code>`-s SUITE`:   Only run suites whose names contain the string "SUITE"
`-t TEST`:    Only run tests whose names contain the string "TEST"
`-x EXCLUDE`: Exclude tests whose names contain the string "EXCLUDE"
</code></pre></div>
<p dir="auto">For example, to run any tests with "tree" in the name, in suites with
"pars" in the name (such as "parser"), but exclude any tests whose names
also contain "slow":</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="./test_project -s pars -t tree -x slow"><pre class="notranslate"><code>./test_project -s pars -t tree -x slow
</code></pre></div>
<p dir="auto">The string matching includes optional test name suffixes.</p>
<p dir="auto">The <code>greatest_set_exact_name_match()</code> function and corresponding <code>-e</code>
command line runner flag can be used to only run tests and/or suites
whose names exactly match the name filter(s). Note: exact-match suite
filtering by name will not skip tests that are run outside of any suite.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Available Assertions</h2><a id="user-content-available-assertions" class="anchor" aria-label="Permalink: Available Assertions" href="#available-assertions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assertions fail the current test unless some condition holds. All
assertions have a custom message variant (with an <code>m</code> suffix), which
takes a  message string as its first argument. For example, the
assertion <code>ASSERT_EQ(apple, orange);</code> could instead be used like
<code>ASSERT_EQm("these should match", apple, orange)</code>. Non-message
assertions create a default message.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT(COND)</code></h3><a id="user-content-assertcond" class="anchor" aria-label="Permalink: ASSERT(COND)" href="#assertcond"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>COND</code> evaluates to a true (non-zero) value.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_FALSE(COND)</code></h3><a id="user-content-assert_falsecond" class="anchor" aria-label="Permalink: ASSERT_FALSE(COND)" href="#assert_falsecond"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>COND</code> evaluates to a false (zero) value.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_EQ(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_eqexpected-actual" class="anchor" aria-label="Permalink: ASSERT_EQ(EXPECTED, ACTUAL)" href="#assert_eqexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED == ACTUAL</code>. To print the values if they
differ, use <code>ASSERT_EQ_FMT</code>. To compare with custom equality test
and print functions, use <code>ASSERT_EQUAL_T</code> instead.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_NEQ(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_neqexpected-actual" class="anchor" aria-label="Permalink: ASSERT_NEQ(EXPECTED, ACTUAL)" href="#assert_neqexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED != ACTUAL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_GT(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_gtexpected-actual" class="anchor" aria-label="Permalink: ASSERT_GT(EXPECTED, ACTUAL)" href="#assert_gtexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED &gt; ACTUAL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_GTE(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_gteexpected-actual" class="anchor" aria-label="Permalink: ASSERT_GTE(EXPECTED, ACTUAL)" href="#assert_gteexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED &gt;= ACTUAL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_LT(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_ltexpected-actual" class="anchor" aria-label="Permalink: ASSERT_LT(EXPECTED, ACTUAL)" href="#assert_ltexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED &lt; ACTUAL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_LTE(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_lteexpected-actual" class="anchor" aria-label="Permalink: ASSERT_LTE(EXPECTED, ACTUAL)" href="#assert_lteexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED &lt;= ACTUAL</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_EQ_FMT(EXPECTED, ACTUAL, FORMAT)</code></h3><a id="user-content-assert_eq_fmtexpected-actual-format" class="anchor" aria-label="Permalink: ASSERT_EQ_FMT(EXPECTED, ACTUAL, FORMAT)" href="#assert_eq_fmtexpected-actual-format"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED == ACTUAL</code>. If they are not equal, print their
values using <code>FORMAT</code> as the <code>printf</code> format string.</p>
<p dir="auto">For example: <code>ASSERT_EQ_FMT(123, result, "%d");</code> will call <code>printf</code>
like <code>printf("Expected: %d\nGot: %d\n", 123, result);</code> if its
<code>EXPECTED</code> and <code>ACTUAL</code> arguments don't match.</p>
<p dir="auto">Note: <code>EXPECTED</code> and <code>ACTUAL</code> will be evaluated more than once on
failure, so they should not be a function call with side effects.
(Since their type is not known by the macro, they cannot be
captured in a local variable. <code>typeof</code> is a GCC extension.)</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_IN_RANGE(EXPECTED, ACTUAL, TOLERANCE)</code></h3><a id="user-content-assert_in_rangeexpected-actual-tolerance" class="anchor" aria-label="Permalink: ASSERT_IN_RANGE(EXPECTED, ACTUAL, TOLERANCE)" href="#assert_in_rangeexpected-actual-tolerance"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>ACTUAL</code> is within <code>EXPECTED</code> +/- <code>TOLERANCE</code>, once the
values have been converted to a configurable floating point type
(<code>GREATEST_FLOAT</code>).</p>
<p dir="auto">greatest does not depent on floating point math.
It is only used within <code>ASSERT_IN_RANGE</code>'s macro expansion.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_STR_EQ(EXPECTED, ACTUAL)</code></h3><a id="user-content-assert_str_eqexpected-actual" class="anchor" aria-label="Permalink: ASSERT_STR_EQ(EXPECTED, ACTUAL)" href="#assert_str_eqexpected-actual"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that the strings are equal
(i.e., <code>strcmp(EXPECTED, ACTUAL) == 0</code>).</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_STRN_EQ(EXPECTED, ACTUAL, SIZE)</code></h3><a id="user-content-assert_strn_eqexpected-actual-size" class="anchor" aria-label="Permalink: ASSERT_STRN_EQ(EXPECTED, ACTUAL, SIZE)" href="#assert_strn_eqexpected-actual-size"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that the first <code>SIZE</code> bytes of the strings are equal
(i.e., <code>strncmp(EXPECTED, ACTUAL, SIZE) == 0</code>).</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_MEM_EQ(EXPECTED, ACTUAL, SIZE)</code></h3><a id="user-content-assert_mem_eqexpected-actual-size" class="anchor" aria-label="Permalink: ASSERT_MEM_EQ(EXPECTED, ACTUAL, SIZE)" href="#assert_mem_eqexpected-actual-size"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that the first <code>SIZE</code> bytes of memory pointed to by <code>EXPECTED</code>
and <code>ACTUAL</code> are equal. If their memory differs, print a hexdump and
highlight the lines and individual bytes which do not match.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_ENUM_EQ(EXPECTED, ACTUAL, ENUM_STR_FUN)</code></h3><a id="user-content-assert_enum_eqexpected-actual-enum_str_fun" class="anchor" aria-label="Permalink: ASSERT_ENUM_EQ(EXPECTED, ACTUAL, ENUM_STR_FUN)" href="#assert_enum_eqexpected-actual-enum_str_fun"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that the enum value <code>EXPECTED</code> is equal to <code>ACTUAL</code>. If not,
convert each enum value to a string using <code>ENUM_STR_FUN</code> before printing
them.</p>
<p dir="auto"><code>ENUM_STR_FUN</code> should have a type like:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="const char *FUN(int x);"><pre class="notranslate"><code>const char *FUN(int x);
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_EQUAL_T(EXPECTED, ACTUAL, TYPE_INFO, UDATA)</code></h3><a id="user-content-assert_equal_texpected-actual-type_info-udata" class="anchor" aria-label="Permalink: ASSERT_EQUAL_T(EXPECTED, ACTUAL, TYPE_INFO, UDATA)" href="#assert_equal_texpected-actual-type_info-udata"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>EXPECTED</code> and <code>ACTUAL</code> are equal, using the
<code>greatest_equal_cb</code> function pointed to by <code>TYPE_INFO-&gt;equal</code> to compare
them. The assertion's <code>UDATA</code> argument can be used to pass in arbitrary
user data (or <code>NULL</code>) to the callbacks. If the values are not equal and
the <code>TYPE_INFO-&gt;print</code> function is defined, it will be used to print an
"Expected: X, Got: Y" message.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>ASSERT_OR_LONGJMP(COND)</code></h3><a id="user-content-assert_or_longjmpcond" class="anchor" aria-label="Permalink: ASSERT_OR_LONGJMP(COND)" href="#assert_or_longjmpcond"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Assert that <code>COND</code> evaluates to a true value. If not, then use
<code>longjmp(3)</code> to immediately return from the test case and any
intermediate function calls.</p>
<p dir="auto">If built with <code>GREATEST_USE_LONGJMP</code> <code>#define</code>d to 0, then all
setjmp/longjmp-related functionality will be compiled out. This also
reduces memory usage by <code>sizeof jmp_buf</code>, which may be several hundred
bytes, depending on the platform.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Random Shuffling</h2><a id="user-content-random-shuffling" class="anchor" aria-label="Permalink: Random Shuffling" href="#random-shuffling"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Groups of suites or tests can be run in shuffled order by using
<code>GREATEST_SHUFFLE_SUITES</code> and <code>GREATEST_SHUFFLE_TESTS</code>, respectively.
This can help find and eliminate accidental coupling between tests.</p>
<p dir="auto">The shuffling depends on the seed and the test/suite count, so a
consistent seed will only lead to reproducible ordering until the
group's count changes.</p>
<p dir="auto">Shuffling suites:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="SHUFFLE_SUITES(seed, {
    RUN_SUITE(suite1);
    RUN_SUITE(suite2);
    RUN_SUITE(suite3);
    RUN_SUITE(suite4);
    RUN_SUITE(suite5);
});"><pre class="notranslate"><code>SHUFFLE_SUITES(seed, {
    RUN_SUITE(suite1);
    RUN_SUITE(suite2);
    RUN_SUITE(suite3);
    RUN_SUITE(suite4);
    RUN_SUITE(suite5);
});
</code></pre></div>
<p dir="auto">Shuffling tests:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="SHUFFLE_TESTS(seed, {
    RUN_TEST(test_a);
    RUN_TEST1(test_b, 12345);
    RUN_TEST(test_c);
    RUN_TESTp(test_d, &quot;some_argument&quot;);
    RUN_TEST(test_e);
});"><pre class="notranslate"><code>SHUFFLE_TESTS(seed, {
    RUN_TEST(test_a);
    RUN_TEST1(test_b, 12345);
    RUN_TEST(test_c);
    RUN_TESTp(test_d, "some_argument");
    RUN_TEST(test_e);
});
</code></pre></div>
<p dir="auto">Note: Any other code inside the block will be executed several times.
The shuffling macro expands to a loop with (count + 1) iterations -- the
first pass counts, and the following passes only execute the next chosen
suite/test. In particular, avoid running tests directly inside of a
<code>SHUFFLE_SUITES</code> block without a suite, because the test will be run
on each iteration.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Test Name Suffixes</h2><a id="user-content-test-name-suffixes" class="anchor" aria-label="Permalink: Test Name Suffixes" href="#test-name-suffixes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>greatest_set_test_suffix</code> can be used to set an optional name suffix
for the next test:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="for (i = 0; i &lt; row_count; i++) {
    const struct table_row *row = &amp;table[row_count];
    greatest_set_test_suffix(row-&gt;name);
    RUN_TEST1(test_with_arg, row);
}"><pre class="notranslate"><code>for (i = 0; i &lt; row_count; i++) {
    const struct table_row *row = &amp;table[row_count];
    greatest_set_test_suffix(row-&gt;name);
    RUN_TEST1(test_with_arg, row);
}
</code></pre></div>
<p dir="auto">This will cause the test name to print with a <code>_</code> separator and the
suffix in all pass/fail/skip messages (i.e., <code>test_with_arg_KEY</code>). This
is especially useful when running a test several times with different
arguments, in shuffled order. The name suffix is included when using
name-based filtering.</p>
<p dir="auto">The test name and optional suffix are copied into an internal buffer.
Its size can be configured by <code>#define</code>ing the constant
<code>GREATEST_TESTNAME_BUF_SIZE</code>. (If not <code>#define</code>d, it defaults to 128
bytes.) If the buffer is not large enough for the name and suffix, it
will truncate after <code>size - 1</code> bytes, to ensure that it is properly
<code>\0</code>-terminated.</p>
<p dir="auto">The name suffix pointer is cleared after each <code>RUN_TEST*</code> call, so a
suffix can be constructed in a stack allocated buffer without later
dereferencing a pointer that has gone out of scope.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Sub-Functions</h2><a id="user-content-sub-functions" class="anchor" aria-label="Permalink: Sub-Functions" href="#sub-functions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Because of how <code>PASS()</code>, <code>ASSERT()</code>, <code>FAIL()</code>, etc. are implemented
(returning a test result enum value), calls to functions that use them
directly from test functions must be wrapped in <code>CHECK_CALL</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="TEST example_using_subfunctions(void) {
    CHECK_CALL(less_than_three(5));
    PASS();
}"><pre class="notranslate"><code>TEST example_using_subfunctions(void) {
    CHECK_CALL(less_than_three(5));
    PASS();
}
</code></pre></div>
<p dir="auto">This is only necessary if the called function can cause test failures.
The function should have a return type of <code>enum greatest_test_res</code>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Command Line Options</h2><a id="user-content-command-line-options" class="anchor" aria-label="Permalink: Command Line Options" href="#command-line-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Test runners build with the following command line options:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Usage: (test_runner) [-hlfave] [-s SUITE] [-t TEST] [-x EXCLUDE]
  -h, --help  print this Help
  -l          List suites and tests, then exit (dry run)
  -f          Stop runner after first failure
  -a          Abort on first failure (implies -f)
  -v          Verbose output
  -s SUITE    only run suite w/ name containing substring SUITE
  -t TEST     only run test w/ name containing substring TEST
  -e          only run exact name match for -s or -t
  -x EXCLUDE  exclude tests containing string substring EXCLUDE"><pre class="notranslate"><code>Usage: (test_runner) [-hlfave] [-s SUITE] [-t TEST] [-x EXCLUDE]
  -h, --help  print this Help
  -l          List suites and tests, then exit (dry run)
  -f          Stop runner after first failure
  -a          Abort on first failure (implies -f)
  -v          Verbose output
  -s SUITE    only run suite w/ name containing substring SUITE
  -t TEST     only run test w/ name containing substring TEST
  -e          only run exact name match for -s or -t
  -x EXCLUDE  exclude tests containing string substring EXCLUDE
</code></pre></div>
<p dir="auto">Any arguments after <code>--</code> will be ignored.</p>
<p dir="auto">If you want to run multiple test suites in parallel, look at
<a href="https://github.com/silentbicycle/parade">parade</a>.</p>
<p dir="auto">These command line options are processed by <code>GREATEST_MAIN_BEGIN();</code>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Running Tests In Another Program</h2><a id="user-content-running-tests-in-another-program" class="anchor" aria-label="Permalink: Running Tests In Another Program" href="#running-tests-in-another-program"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Rather than producing a command line test runner (which checks the
command line options, and exits with a pass/fail return code after
running tests), greatest can be used more like a library. Instead of
using <code>GREATEST_MAIN_BEGIN()</code>, use <code>GREATEST_INIT()</code> to (re-)initialize
greatest, then use either <code>GREATEST_PRINT_REPORT()</code> to print the report
to <code>GREATEST_STDOUT</code>, or use <code>greatest_get_report(&amp;report)</code> to get the
pass, fail, skip, and assertion counters.</p>
<p dir="auto">The command line flags above have corresponding functions:</p>
<ul dir="auto">
<li><code>greatest_stop_at_first_fail()</code></li>
<li><code>greatest_abort_on_fail()</code></li>
<li><code>greatest_list_only()</code></li>
<li><code>greatest_set_exact_name_match()</code></li>
<li><code>greatest_set_suite_filter(const char *filter)</code></li>
<li><code>greatest_set_test_filter(const char *filter)</code></li>
<li><code>greatest_set_test_exclude(const char *filter)</code></li>
<li><code>greatest_get_verbosity()</code></li>
<li><code>greatest_set_verbosity(unsigned int verbosity)</code></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Aliases</h2><a id="user-content-aliases" class="anchor" aria-label="Permalink: Aliases" href="#aliases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Most of the macros have prefixed and unprefixed forms. For example,
<code>SUITE</code> is the same as <code>GREATEST_SUITE</code>.</p>
<p dir="auto">Check the source for the list -- search for <code>GREATEST_USE_ABBREVS</code>.</p>
<p dir="auto">These aliases can be disabled by <code>#define</code>-ing <code>GREATEST_USE_ABBREVS</code> to 0.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Color Output</h2><a id="user-content-color-output" class="anchor" aria-label="Permalink: Color Output" href="#color-output"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you want color output (<code>PASS</code> in green, <code>FAIL</code> in red, etc.), you can
pipe the output through the included <code>greenest</code> script in <code>contrib/</code>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ ./example -v | greenest"><pre>$ ./example -v <span class="pl-k">|</span> greenest</pre></div>
<p dir="auto">(Note that <code>greenest</code> depends on a Unix-like environment.)</p>
<p dir="auto">greatest itself doesn't have built-in coloring to stay small and portable.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">TAP Format</h2><a id="user-content-tap-format" class="anchor" aria-label="Permalink: TAP Format" href="#tap-format"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There is an awk script provided, <code>contrib/entapment</code>, that converts the
verbose output from the default CLI test runner to TAP version 13
format:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="./example -v | contrib/entapment"><pre class="notranslate"><code>./example -v | contrib/entapment
</code></pre></div>
</article></div>