<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Skylib</h1><a id="user-content-skylib" class="anchor" aria-label="Permalink: Skylib" href="#skylib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://buildkite.com/bazel/bazel-skylib" rel="nofollow"><img src="https://camo.githubusercontent.com/630499bca0a46f14d5d11fc804abed3f2ee8aa8d1ab9c0b9a6596ad2e0cca3ef/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f39323164633631653264336133353065633430656662323931393134333630633062666139623631393666613335373432302e7376673f6272616e63683d6d61696e" alt="Build status" data-canonical-src="https://badge.buildkite.com/921dc61e2d3a350ec40efb291914360c0bfa9b6196fa357420.svg?branch=main" style="max-width: 100%; height: auto;"></a></p>
<p dir="auto">Skylib is a library of Starlark functions for manipulating collections, file paths,
and various other data types in the domain of Bazel build rules.</p>
<p dir="auto">Each of the <code>.bzl</code> files in the <code>lib</code> directory defines a "module"â€”a
<code>struct</code> that contains a set of related functions and/or other symbols that can
be loaded as a single unit, for convenience.</p>
<p dir="auto">Skylib also provides build rules under the <code>rules</code> directory.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Getting Started</h2><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting Started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>WORKSPACE</code> file</h3><a id="user-content-workspace-file" class="anchor" aria-label="Permalink: WORKSPACE file" href="#workspace-file"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the <strong>WORKSPACE setup</strong> section <a href="https://github.com/bazelbuild/bazel-skylib/releases">for the current release</a>.</p>
<p dir="auto">If you want to use <code>lib/unittest.bzl</code> from Skylib versions released in or after
December 2018, then you also should add to the <code>WORKSPACE</code> file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_skylib//:workspace.bzl&quot;, &quot;bazel_skylib_workspace&quot;)

bazel_skylib_workspace()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_skylib//:workspace.bzl"</span>, <span class="pl-s">"bazel_skylib_workspace"</span>)

<span class="pl-en">bazel_skylib_workspace</span>()</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>BUILD</code> and <code>*.bzl</code> files</h3><a id="user-content-build-and-bzl-files" class="anchor" aria-label="Permalink: BUILD and *.bzl files" href="#build-and-bzl-files"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Then, in the <code>BUILD</code> and/or <code>*.bzl</code> files in your own workspace, you can load
the modules (listed <a href="#list-of-modules">below</a>) and access the symbols by
dotting into those structs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_skylib//lib:paths.bzl&quot;, &quot;paths&quot;)
load(&quot;@bazel_skylib//lib:shell.bzl&quot;, &quot;shell&quot;)

p = paths.basename(&quot;foo.bar&quot;)
s = shell.quote(p)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_skylib//lib:paths.bzl"</span>, <span class="pl-s">"paths"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@bazel_skylib//lib:shell.bzl"</span>, <span class="pl-s">"shell"</span>)

<span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-s1">paths</span>.<span class="pl-c1">basename</span>(<span class="pl-s">"foo.bar"</span>)
<span class="pl-s1">s</span> <span class="pl-c1">=</span> <span class="pl-s1">shell</span>.<span class="pl-c1">quote</span>(<span class="pl-s1">p</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">List of modules (in lib/)</h2><a id="user-content-list-of-modules-in-lib" class="anchor" aria-label="Permalink: List of modules (in lib/)" href="#list-of-modules-in-lib"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="docs/collections_doc.md">collections</a></li>
<li><a href="docs/dicts_doc.md">dicts</a></li>
<li><a href="docs/partial_doc.md">partial</a></li>
<li><a href="docs/paths_doc.md">paths</a></li>
<li><a href="docs/selects_doc.md">selects</a></li>
<li><a href="docs/new_sets_doc.md">sets</a></li>
<li><a href="docs/modules_doc.md">modules</a></li>
<li><a href="docs/shell_doc.md">shell</a></li>
<li><a href="docs/structs_doc.md">structs</a></li>
<li><a href="docs/subpackages_doc.md">subpackages</a></li>
<li><a href="docs/types_doc.md">types</a></li>
<li><a href="docs/unittest_doc.md">unittest</a></li>
<li><a href="docs/versions_doc.md">versions</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">List of rules (in rules/)</h2><a id="user-content-list-of-rules-in-rules" class="anchor" aria-label="Permalink: List of rules (in rules/)" href="#list-of-rules-in-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="docs/analysis_test_doc.md">analysis_test</a></li>
<li><a href="docs/build_test_doc.md">build_test</a></li>
<li><a href="docs/common_settings_doc.md">common_settings</a></li>
<li>directories
<ul dir="auto">
<li><a href="docs/directory_doc.md">directory</a></li>
<li><a href="docs/directory_glob_doc.md">directory_glob</a></li>
<li><a href="docs/directory_subdirectory_doc.md">subdirectory</a></li>
</ul>
</li>
<li><a href="docs/copy_directory_doc.md">copy_directory</a></li>
<li><a href="docs/copy_file_doc.md">copy_file</a></li>
<li><a href="docs/diff_test_doc.md">diff_test</a></li>
<li><a href="docs/expand_template_doc.md">expand_template</a></li>
<li><a href="docs/native_binary_doc.md">native_binary and native_test</a></li>
<li><a href="docs/run_binary_doc.md">run_binary</a></li>
<li><a href="docs/select_file_doc.md">select_file</a></li>
<li><a href="docs/write_file_doc.md">write_file</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Writing a new module</h2><a id="user-content-writing-a-new-module" class="anchor" aria-label="Permalink: Writing a new module" href="#writing-a-new-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The criteria for adding a new function or module to this repository are:</p>
<ol dir="auto">
<li>
<p dir="auto">Is it widely needed? The new code must solve a problem that occurs often during the development of Bazel build rules. It is not sufficient that the new code is merely useful. Candidate code should generally have been proven to be necessary across several projects, either because it provides indispensable common functionality, or because it requires a single standardized implementation.</p>
</li>
<li>
<p dir="auto">Is its interface simpler than its implementation? A good abstraction provides a simple interface to a complex implementation, relieving the user from the burden of understanding. By contrast, a shallow abstraction provides little that the user could not easily have written out for themselves. If a function's doc comment is longer than its body, it's a good sign that the abstraction is too shallow.</p>
</li>
<li>
<p dir="auto">Is its interface unimpeachable? Given the problem it tries to solve, does it have sufficient parameters or generality to address all reasonable cases, or does it make arbitrary policy choices that limit its usefulness? If the function is not general, it likely does not belong here. Conversely, if it is general thanks only to a bewildering number of parameters, it also does not belong here.</p>
</li>
<li>
<p dir="auto">Is it efficient? Does it solve the problem using the asymptotically optimal algorithm, without using excessive looping, allocation, or other high constant factors? Starlark is an interpreted language with relatively expensive basic operations, and an approach that might make sense in C++ may not in Starlark.</p>
</li>
</ol>
<p dir="auto">If your new module meets all these criteria, then you should consider sending us a pull request. It is always better to discuss your plans before executing them.</p>
<p dir="auto">Many of the declarations already in this repository do not meet this bar.</p>
<p dir="auto">Steps to add a module to Skylib:</p>
<ol dir="auto">
<li>
<p dir="auto">Create a new <code>.bzl</code> file in the <code>lib</code> directory.</p>
</li>
<li>
<p dir="auto">Write the functions or other symbols (such as constants) in that file,
defining them privately (prefixed by an underscore).</p>
</li>
<li>
<p dir="auto">Create the exported module struct, mapping the public names of the symbols
to their implementations. For example, if your module was named <code>things</code> and
had a function named <code>manipulate</code>, your <code>things.bzl</code> file would look like
this:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="def _manipulate():
  ...

things = struct(
    manipulate=_manipulate,
)"><pre><span class="pl-k">def</span> <span class="pl-en">_manipulate</span>():
  ...

<span class="pl-s1">things</span> <span class="pl-c1">=</span> <span class="pl-en">struct</span>(
    <span class="pl-s1">manipulate</span><span class="pl-c1">=</span><span class="pl-s1">_manipulate</span>,
)</pre></div>
</li>
<li>
<p dir="auto">Add unit tests for your module in the <code>tests</code> directory.</p>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto"><code>bzl_library</code></h2><a id="user-content-bzl_library" class="anchor" aria-label="Permalink: bzl_library" href="#bzl_library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>bzl_library.bzl</code> rule can be used to aggregate a set of
Starlark files and its dependencies for use in test targets and
documentation generation.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Troubleshooting</h2><a id="user-content-troubleshooting" class="anchor" aria-label="Permalink: Troubleshooting" href="#troubleshooting"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you try to use <code>unittest</code> and you get the following error:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="ERROR: While resolving toolchains for target //foo:bar: no matching toolchains found for types @bazel_skylib//toolchains:toolchain_type
ERROR: Analysis of target '//foo:bar' failed; build aborted: no matching toolchains found for types @bazel_skylib//toolchains:toolchain_type"><pre class="notranslate"><code>ERROR: While resolving toolchains for target //foo:bar: no matching toolchains found for types @bazel_skylib//toolchains:toolchain_type
ERROR: Analysis of target '//foo:bar' failed; build aborted: no matching toolchains found for types @bazel_skylib//toolchains:toolchain_type
</code></pre></div>
<p dir="auto">then you probably forgot to load and call <code>bazel_skylib_workspace()</code> in your
<code>WORKSPACE</code> file.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Maintainer's guide</h3><a id="user-content-maintainers-guide" class="anchor" aria-label="Permalink: Maintainer's guide" href="#maintainers-guide"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the <a href="docs/maintainers_guide.md">maintaner's guide</a> for instructions for
cutting a new release.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Gazelle Plugin</h2><a id="user-content-gazelle-plugin" class="anchor" aria-label="Permalink: Gazelle Plugin" href="#gazelle-plugin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>bazel_skylib</code> ships with a <a href="https://github.com/bazelbuild/bazel-gazelle">gazelle</a>
plugin to generate <code>bzl_library</code> entries in build files. To use this, in your
<code>WORKSPACE</code>:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_skylib_gazelle_plugin//:workspace.bzl&quot;, &quot;bazel_skylib_gazelle_plugin_workspace&quot;)

bazel_skylib_gazelle_plugin_workspace()

load(&quot;@bazel_skylib_gazelle_plugin//:setup.bzl&quot;, &quot;bazel_skylib_gazelle_plugin_setup&quot;)

bazel_skylib_gazelle_plugin_setup()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_skylib_gazelle_plugin//:workspace.bzl"</span>, <span class="pl-s">"bazel_skylib_gazelle_plugin_workspace"</span>)

<span class="pl-en">bazel_skylib_gazelle_plugin_workspace</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@bazel_skylib_gazelle_plugin//:setup.bzl"</span>, <span class="pl-s">"bazel_skylib_gazelle_plugin_setup"</span>)

<span class="pl-en">bazel_skylib_gazelle_plugin_setup</span>()</pre></div>
<p dir="auto">You may then include the plugin using code similar to this in your <code>BUILD.bazel</code>
file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_gazelle//:def.bzl&quot;, &quot;DEFAULT_LANGUAGES&quot;, &quot;gazelle&quot;, &quot;gazelle_binary&quot;)

gazelle(
    name = &quot;gazelle&quot;,
    gazelle = &quot;:gazelle_bin&quot;,
)

gazelle_binary(
    name = &quot;gazelle_bin&quot;,
    languages = DEFAULT_LANGUAGES + [
        &quot;@bazel_skylib_gazelle_plugin//bzl&quot;,
    ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_gazelle//:def.bzl"</span>, <span class="pl-s">"DEFAULT_LANGUAGES"</span>, <span class="pl-s">"gazelle"</span>, <span class="pl-s">"gazelle_binary"</span>)

<span class="pl-en">gazelle</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle"</span>,
    <span class="pl-s1">gazelle</span> <span class="pl-c1">=</span> <span class="pl-s">":gazelle_bin"</span>,
)

<span class="pl-en">gazelle_binary</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"gazelle_bin"</span>,
    <span class="pl-s1">languages</span> <span class="pl-c1">=</span> <span class="pl-c1">DEFAULT_LANGUAGES</span> <span class="pl-c1">+</span> [
        <span class="pl-s">"@bazel_skylib_gazelle_plugin//bzl"</span>,
    ],
)</pre></div>
</article></div>