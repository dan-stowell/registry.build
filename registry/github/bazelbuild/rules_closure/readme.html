<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Closure Rules for Bazel (αlpha) <a href="https://buildkite.com/bazel/closure-compiler-rules-closure-postsubmit" rel="nofollow"><img src="https://camo.githubusercontent.com/15a3f72a685400a4aed4210e6e0ef7b005fc3df213490c022f10952fd3e94d57/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f37353639343130653261323636313037363539313839373238333035316236643133376633353130323136373235336665642e737667" alt="Bazel CI build status" data-canonical-src="https://badge.buildkite.com/7569410e2a2661076591897283051b6d137f35102167253fed.svg" style="max-width: 100%; height: auto;"></a></h1><a id="user-content-closure-rules-for-bazel-αlpha-" class="anchor" aria-label="Permalink: Closure Rules for Bazel (αlpha) " href="#closure-rules-for-bazel-αlpha-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>JavaScript</th>
<th>Stylesheets</th>
<th>Miscellaneous</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#closure_js_library">closure_js_library</a></td>
<td><a href="#closure_css_library">closure_css_library</a></td>
<td><a href="#phantomjs_test">phantomjs_test</a></td>
</tr>
<tr>
<td><a href="#closure_js_binary">closure_js_binary</a></td>
<td><a href="#closure_css_binary">closure_css_binary</a></td>
<td></td>
</tr>
<tr>
<td><a href="#closure_js_test">closure_js_test</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Closure Rules provides a polished JavaScript build system for <a href="http://bazel.build/" rel="nofollow">Bazel</a> that
emphasizes type safety, strictness, testability, and optimization. These rules
are built with the <a href="https://developers.google.com/closure/" rel="nofollow">Closure Tools</a>, which are what Google used to create
websites like Google.com and Gmail. The goal of this project is to take the
frontend development methodology that Google actually uses internally, and make
it easily available to outside developers.</p>
<p dir="auto">Closure Rules is an <em>abstract</em> build system. This is what sets it apart from
Grunt, Gulp, Webpacker, Brunch, Broccoli, etc. These projects all provide a
concrete framework for explaining <em>how</em> to build your project. Closure Rules
instead provides a framework for declaring <em>what</em> your project is. Closure Rules
is then able to use this abstract definition to infer an optimal build strategy.</p>
<p dir="auto">Closure Rules is also an <em>austere</em> build system. The Closure Compiler doesn't
play games. It enforces a type system that can be stricter than Java. From a
stylistic perspective, Closure is [verbose] like Java; there's no cryptic
symbols or implicit behavior; the code says exactly what it's doing.  This sets
Closure apart from traditional JavaScript development, where terseness was
favored over readability, because minifiers weren't very good.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">What's Included</h3><a id="user-content-whats-included" class="anchor" aria-label="Permalink: What's Included" href="#whats-included"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Closure Rules bundles the following tools and makes them "just work."</p>
<ul dir="auto">
<li><a href="http://bazel.build/" rel="nofollow">Bazel</a>: The build system Google uses to manage a repository with petabytes of
code.</li>
<li><a href="https://developers.google.com/closure/compiler/" rel="nofollow">Closure Compiler</a>: Type-safe, null-safe, optimizing JavaScript compiler that
transpiles <a href="http://es6-features.org/" rel="nofollow">ECMASCRIPT6</a> to minified ES3 JavaScript that can run in any
browser.</li>
<li><a href="https://developers.google.com/closure/library/" rel="nofollow">Closure Library</a>: Google's core JavaScript libraries.
JavaScript and Java. This is one of the most secure templating systems
available. It's where Google has put the most thought into preventing things
like XSS attacks. It also supports i18n and l10n.</li>
<li><a href="https://github.com/google/closure-stylesheets">Closure Stylesheets</a>: CSS compiler supporting class name minification,
variables, functions, conditionals, mixins, and bidirectional layout.</li>
<li><a href="http://phantomjs.org/" rel="nofollow">PhantomJS</a>: Headless web browser used for automating JavaScript unit tests in
a command line environment.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Mailing Lists</h3><a id="user-content-mailing-lists" class="anchor" aria-label="Permalink: Mailing Lists" href="#mailing-lists"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://groups.google.com/forum/#!forum/closure-rules-announce" rel="nofollow">closure-rules-announce</a></li>
<li><a href="https://groups.google.com/forum/#!forum/closure-rules-discuss" rel="nofollow">closure-rules-discuss</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Caveat Emptor</h3><a id="user-content-caveat-emptor" class="anchor" aria-label="Permalink: Caveat Emptor" href="#caveat-emptor"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Closure Rules is production ready, but its design is not yet finalized. Breaking
changes will be introduced. However they will be well-documented in the release
notes.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Setup</h2><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First you must <a href="https://docs.bazel.build/versions/master/install.html" rel="nofollow">install Bazel</a>.</p>
<p dir="auto">Then you add the following to your MODULE.bazel file:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_closure&quot;, version = &quot;0.15.0&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_closure"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.15.0"</span>)</pre></div>
<p dir="auto">The root module has to declare the same override for rules_webtesting,
rules_scala, and google_bazel_common temporarily until they are registered
in BCR.</p>
<p dir="auto">You are not required to install the Closure Tools, PhantomJS, or anything else
for that matter; they will be fetched automatically by Bazel.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Please see the test directories within this project for concrete examples of usage:</p>
<ul dir="auto">
<li><a href="https://github.com/bazelbuild/rules_closure/tree/master/closure/testing/test">//closure/testing/test</a></li>
<li><a href="https://github.com/bazelbuild/rules_closure/tree/master/closure/compiler/test">//closure/compiler/test</a></li>
<li><a href="https://github.com/bazelbuild/rules_closure/tree/master/closure/stylesheets/test">//closure/stylesheets/test</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Reference</h1><a id="user-content-reference" class="anchor" aria-label="Permalink: Reference" href="#reference"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">closure_js_library</h2><a id="user-content-closure_js_library" class="anchor" aria-label="Permalink: closure_js_library" href="#closure_js_library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;closure_js_library&quot;)
closure_js_library(name, srcs, data, deps, exports, suppress, convention,
                   no_closure_library)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"closure_js_library"</span>)
<span class="pl-en">closure_js_library</span>(<span class="pl-s1">name</span>, <span class="pl-s1">srcs</span>, <span class="pl-s1">data</span>, <span class="pl-s1">deps</span>, <span class="pl-s1">exports</span>, <span class="pl-s1">suppress</span>, <span class="pl-s1">convention</span>,
                   <span class="pl-s1">no_closure_library</span>)</pre></div>
<p dir="auto">Defines a set of JavaScript sources.</p>
<p dir="auto">The purpose of this rule is to define an abstract graph of JavaScript sources.
It must be used in conjunction with <a href="#closure_js_binary">closure_js_binary</a> to output a minified
file.</p>
<p dir="auto">This rule will perform syntax checking and linting on your files. This can be
tuned with the <code>suppress</code> attribute. To learn more about what the linter wants,
read the <a href="https://google.github.io/styleguide/jsguide.html" rel="nofollow">Google JavaScript Style Guide</a>.</p>
<p dir="auto">Strict dependency checking is performed on the sources listed in each library
target. See the documentation of the <code>deps</code> attribute for further information.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will always be empty and <code>data</code> will contain all
transitive JS sources and data.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments" class="anchor" aria-label="Permalink: Arguments" href="#arguments"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) A unique name for this rule. The standard
convention is that this be the same name as the Bazel package with <code>srcs = glob(['*.js'])</code>. If it contains a subset of the <code>.js</code> srcs in the package,
then convention states that the <code>_lib</code> suffix should be used.</p>
</li>
<li>
<p dir="auto"><strong>srcs:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) The list of <code>.js</code> source files that
represent this library. This can include files marked as <code>@externs</code> or
<code>@nocompile</code>. This attribute is required unless the <code>exports</code> attribute is
being defined.</p>
</li>
<li>
<p dir="auto"><strong>data:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Runfiles directly referenced by JS
sources in this rule. For example, if the JS generated injected an img tag
into the page with a hard coded image named foo.png, then you might want to
list that image here, so it ends up in the webserver runfiles.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Direct <a href="https://docs.bazel.build/versions/master/build-ref.html#dependencies" rel="nofollow">dependency</a> list. These can
point to <a href="#closure_js_library">closure_js_library</a>, <a href="#closure_css_library">closure_css_library</a> rules.</p>
</li>
<li>
<p dir="auto"><strong>exports:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Listing dependencies here will cause
them to become <em>direct</em> dependencies in parent rules. This functions similarly
to <a href="https://docs.bazel.build/versions/master/be/java.html#java_library.exports" rel="nofollow">java_library.exports</a>. This can be used to create aliases for rules in
another package. It can also be also be used to export private targets within
the package. Another use is to roll up a bunch of fine-grained libraries into
a single big one.</p>
</li>
<li>
<p dir="auto"><strong>suppress</strong> (List of String; optional; default is <code>[]</code>) List of codes the
linter should ignore. Warning and error messages that are allowed to be
suppressed, will display the codes for disabling it. For example, if the
linter says:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="foo.js:123: WARNING lintChecks JSC_MUST_BE_PRIVATE - Property bar_ must be marked @private"><pre class="notranslate"><code>foo.js:123: WARNING lintChecks JSC_MUST_BE_PRIVATE - Property bar_ must be marked @private
</code></pre></div>
<p dir="auto">Then the diagnostic code <code>"JSC_MUST_BE_PRIVATE"</code> can be used in the <code>suppress</code>
list. It is also possible to use the group code <code>"lintChecks"</code> to disable all
diagnostic codes associated with linting.</p>
<p dir="auto">If a code is used that isn't necessary, an error is raised. Therefore the use
of fine-grained suppression codes is maintainable.</p>
</li>
<li>
<p dir="auto"><strong>convention</strong> (String; optional; default is <code>"CLOSURE"</code>) Specifies the coding
convention which affects how the linter operates. This can be the following
values:</p>
<ul dir="auto">
<li><code>NONE</code>: Don't take any special practices into consideration.</li>
<li><code>CLOSURE</code>: Take <a href="https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/ClosureCodingConvention.java">Closure coding conventions</a> into consideration when
linting. See the <a href="https://google.github.io/styleguide/jsguide.html" rel="nofollow">Google JavaScript Style Guide</a> for more information.</li>
<li><code>GOOGLE</code>: Take <a href="https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleCodingConvention.java">Google coding conventions</a> into consideration when
linting. See the <a href="https://google.github.io/styleguide/jsguide.html" rel="nofollow">Google JavaScript Style Guide</a> for more information.</li>
</ul>
</li>
<li>
<p dir="auto"><strong>no_closure_library</strong> (Boolean; optional; default is <code>False</code>) Do not link
Closure Library <a href="https://github.com/google/closure-library/blob/master/closure/goog/base.js">base.js</a>. If this flag is used, an error will be raised if
any <code>deps</code> do not also specify this flag.</p>
<p dir="auto">All <a href="#closure_js_library">closure_js_library</a> rules with nonempty <code>srcs</code> have an implicit
dependency on <code>@closure_library//:closure/goog/base.js</code>. This is a lightweight
file that boostraps very important functions, e.g. <code>goog.provide</code>. Linking
this file by default is important because:</p>
<ol dir="auto">
<li>It is logically impossible to say <code>goog.require('goog')</code>.</li>
<li>The Closure Compiler will sometimes generate synthetic code that calls
these functions. For example, the <a href="https://github.com/google/closure-compiler/blob/1281ed9ded137eaf578bb65a588850bf13f38aa4/src/com/google/javascript/jscomp/ProcessEs6Modules.java">ProcessEs6Modules</a> compiler pass turns
ES6 module directives into <code>goog.provide</code> / <code>goog.require</code> statements.</li>
</ol>
<p dir="auto">The only tradeoff is that when compiling in <code>WHITESPACE_ONLY</code> mode, this code
will show up in the resulting binary. Therefore this flag provides the option
to remove it.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">closure_js_binary</h2><a id="user-content-closure_js_binary" class="anchor" aria-label="Permalink: closure_js_binary" href="#closure_js_binary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;closure_js_binary&quot;)
closure_js_binary(name, deps, css, debug, language, entry_points,
                  dependency_mode, compilation_level, formatting,
                  output_wrapper, property_renaming_report, defs)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"closure_js_binary"</span>)
<span class="pl-en">closure_js_binary</span>(<span class="pl-s1">name</span>, <span class="pl-s1">deps</span>, <span class="pl-s1">css</span>, <span class="pl-s1">debug</span>, <span class="pl-s1">language</span>, <span class="pl-s1">entry_points</span>,
                  <span class="pl-s1">dependency_mode</span>, <span class="pl-s1">compilation_level</span>, <span class="pl-s1">formatting</span>,
                  <span class="pl-s1">output_wrapper</span>, <span class="pl-s1">property_renaming_report</span>, <span class="pl-s1">defs</span>)</pre></div>
<p dir="auto">Turns JavaScript libraries into a minified optimized blob of code.</p>
<p dir="auto">This rule must be used in conjunction with <a href="#closure_js_library">closure_js_library</a>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Implicit Output Targets</h4><a id="user-content-implicit-output-targets" class="anchor" aria-label="Permalink: Implicit Output Targets" href="#implicit-output-targets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><em>name</em>.js: A minified JavaScript file containing all transitive sources.</p>
</li>
<li>
<p dir="auto"><em>name</em>.js.map: Sourcemap file mapping compiled sources to their raw
sources. This file can be loaded into browsers such as Chrome and Firefox to
view a stacktrace when an error is thrown by compiled sources.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism-1" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will be the .js and .js.map output files and <code>data</code> will
contain those files in addition to all transitive JS sources and data.</p>
</li>
<li>
<p dir="auto"><a href="#closure_js_library">closure_js_library</a>: <code>srcs</code> will be the .js output file, <code>language</code> will be
the output language, <code>deps</code> will be empty, <code>data</code> will contain all transitive
data, and <code>no_closure_library</code> will be <code>True</code>.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments-1" class="anchor" aria-label="Permalink: Arguments" href="#arguments-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) A unique name for this rule. Convention states
that such rules be named <code>foo_bin</code> or <code>foo_dbg</code> if <code>debug = True</code>.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; required) Direct dependency list. This attribute
has the same meaning as it does in <a href="#closure_js_library">closure_js_library</a>.  These can point to
<a href="#closure_js_library">closure_js_library</a> rules.</p>
</li>
<li>
<p dir="auto"><strong>css:</strong> (Label; optional) CSS class renaming target, which must point to a
<a href="#closure_css_binary">closure_css_binary</a> rule. This causes the CSS name mapping file generated by
the CSS compiler to be included in the compiled JavaScript.  This tells
Closure Compiler how to minify CSS class names.</p>
<p dir="auto">This attribute is required if any of JavaScript sources depend on
a <a href="#closure_css_library">closure_css_library</a>. This rule will check that all the referenced CSS
libraries are present in the CSS binary.</p>
</li>
<li>
<p dir="auto"><strong>debug:</strong> (Boolean; optional; default is <code>False</code>) Enables debug mode. Many
types of properties and variable names will be renamed to include <code>$</code>
characters, to help you spot bugs when using <code>ADVANCED</code> compilation
mode. Assert statements will not be stripped. Dependency directives will be
removed.</p>
</li>
<li>
<p dir="auto"><strong>language:</strong> (String; optional; default is <code>"ECMASCRIPT3"</code>) Output language
variant to which library sources are transpiled. The default is ES3 because it
works in all browsers. The input language is calculated automatically based on
the <code>language</code> attribute of <a href="#closure_js_library">closure_js_library</a> dependencies.</p>
</li>
<li>
<p dir="auto"><strong>entry_points:</strong> (List of String; optional; default is <code>[]</code>) List of
unreferenced namespaces that should <em>not</em> be pruned by the compiler. This
should only be necessary when you want to invoke them from a <code>&lt;script&gt;</code> tag on
your HTML page. See <a href="https://github.com/bazelbuild/rules_closure/blob/master/closure/compiler/test/exports_and_entry_points/BUILD">Exports and Entry Points</a> to learn how this works with
the <code>@export</code> feature. For further context, see the Closure Compiler
documentation on <a href="https://github.com/google/closure-compiler/wiki/Managing-Dependencies">managing dependencies</a>.</p>
</li>
<li>
<p dir="auto"><strong>dependency_mode:</strong> (String; optional; default is <code>"LOOSE"</code>) In rare
circumstances you may want to set this flag to <code>"STRICT"</code>. See the
<a href="https://github.com/bazelbuild/rules_closure/blob/master/closure/compiler/test/exports_and_entry_points/BUILD">Exports and Entry Points</a> unit tests and the Closure Compiler's
<a href="https://github.com/google/closure-compiler/wiki/Managing-Dependencies">managing dependencies</a> documentation for more information.</p>
</li>
<li>
<p dir="auto"><strong>compilation_level:</strong> (String; optional; default is <code>"ADVANCED"</code>) Specifies
how minified you want your JavaScript binary to be. Valid options are:</p>
<ul dir="auto">
<li>
<p dir="auto"><code>ADVANCED</code>: Enables maximal minification and type checking. This is
<em>strongly</em> recommended for production binaries. <strong>Warning:</strong> Properties that
are accessed with dot notation will be renamed. Use quoted notation if this
presents problems for you, e.g. <code>foo['bar']</code>, <code>{'bar': ...}</code>.</p>
</li>
<li>
<p dir="auto"><code>SIMPLE</code>: Tells the Closure Compiler to function more like a traditional
JavaScript minifier. Type checking becomes disabled. Local variable names
will be minified, but object properties and global names will
not. Namespaces will be managed. Code that will never execute will be
removed. Local functions and variables can be inlined, but globals can not.</p>
</li>
<li>
<p dir="auto"><code>WHITESPACE_ONLY</code>: Tells the Closure Compiler to strip whitespace and
comments. Transpilation between languages will still work. Type checking
becomes disabled. No symbols will be renamed. Nothing will be inlined.
Dependency statements will not be removed. <strong>ProTip:</strong> If you're using the
Closure Library, you'll need to look into the <code>CLOSURE_NO_DEPS</code> and
<code>goog.ENABLE_DEBUG_LOADER</code> options in order to execute the compiled output.)</p>
</li>
</ul>
</li>
<li>
<p dir="auto"><strong>formatting:</strong> (String; optional) Specifies what is passed to the
<code>--formatting</code> flag of the Closure Compiler. The following options are valid:</p>
<ul dir="auto">
<li><code>PRETTY_PRINT</code></li>
<li><code>PRINT_INPUT_DELIMITER</code></li>
<li><code>SINGLE_QUOTES</code></li>
</ul>
</li>
<li>
<p dir="auto"><strong>output_wrapper:</strong> (String; optional) Interpolate output into this string at
the place denoted by the marker token <code>%output%</code>. Use the marker token
<code>%output|jsstring%</code> to do JS string escaping on the output. The default
behavior is to generate code that pollutes the global namespace. Many users
will want to set this to <code>"(function(){%output%}).call(this);"</code> instead. See
the <a href="https://github.com/google/closure-compiler/wiki/FAQ#when-using-advanced-optimizations-closure-compiler-adds-new-variables-to-the-global-scope-how-do-i-make-sure-my-variables-dont-collide-with-other-scripts-on-the-page">Closure Compiler FAQ</a> for more details.</p>
</li>
<li>
<p dir="auto"><strong>property_renaming_report:</strong> (File; optional) Output file for property
renaming report. It will contain lines in the form of <code>old:new</code>. This feature
has some fringe use cases, such as minifying JSON messages. However it's
recommended that you use protobuf instead.</p>
</li>
<li>
<p dir="auto"><strong>defs:</strong> (List of strings; optional) Specifies additional flags to be passed
to the Closure Compiler, e.g. <code>"--hide_warnings_for=some/path/"</code>. To see what
flags are available, run:
<code>bazel run @rules_closure//third_party/java/jscomp:main -- --help</code></p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Support for AngularJS</h3><a id="user-content-support-for-angularjs" class="anchor" aria-label="Permalink: Support for AngularJS" href="#support-for-angularjs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">When compiling AngularJS applications, you need to pass custom flags to the
Closure Compiler. This can be accomplished by adding the following to your
<a href="#closure_js_binary">closure_js_binary</a> rule:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="closure_js_binary(
    # ...
    defs = [
        &quot;--angular_pass&quot;,
        &quot;--export_local_property_definitions&quot;,
    ],
)"><pre><span class="pl-en">closure_js_binary</span>(
    <span class="pl-c"># ...</span>
    <span class="pl-s1">defs</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"--angular_pass"</span>,
        <span class="pl-s">"--export_local_property_definitions"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">closure_js_test</h2><a id="user-content-closure_js_test" class="anchor" aria-label="Permalink: closure_js_test" href="#closure_js_test"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;closure_js_test&quot;)
closure_js_test(name, srcs, data, deps, css, html, language, suppress,
                compilation_level, entry_points, defs)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"closure_js_test"</span>)
<span class="pl-en">closure_js_test</span>(<span class="pl-s1">name</span>, <span class="pl-s1">srcs</span>, <span class="pl-s1">data</span>, <span class="pl-s1">deps</span>, <span class="pl-s1">css</span>, <span class="pl-s1">html</span>, <span class="pl-s1">language</span>, <span class="pl-s1">suppress</span>,
                <span class="pl-s1">compilation_level</span>, <span class="pl-s1">entry_points</span>, <span class="pl-s1">defs</span>)</pre></div>
<p dir="auto">Runs JavaScript unit tests inside a headless web browser.</p>
<p dir="auto">This is a build macro that composes <a href="#closure_js_library">closure_js_library</a>, <a href="#closure_js_binary">closure_js_binary</a>,
and <a href="#phantomjs_test">phantomjs_test</a>.</p>
<p dir="auto">A test is defined as any function in the global namespace that begins with
<code>test</code>, <code>setUp</code>, or <code>tearDown</code>. You are not required to <code>@export</code> these
functions. If you don't have a global namespace, because you're using
<code>goog.module</code> or <code>goog.scope</code>, then you must register your test functions with
<code>goog.testing.testSuite</code>.</p>
<p dir="auto">Each test file should require <code>goog.testing.jsunit</code> and <code>goog.testing.asserts</code>
because they run the tests and provide useful <a href="https://github.com/google/closure-library/blob/master/closure/goog/testing/asserts.js#L1308">testing functions</a> such
as <code>assertEquals()</code>.</p>
<p dir="auto">Any JavaScript file related to testing is strongly recommended to contain a
<code>goog.setTestOnly()</code> statement in the file. However this is not required,
because some projects might not want to directly reference Closure Library
functions.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">No Network Access</h4><a id="user-content-no-network-access" class="anchor" aria-label="Permalink: No Network Access" href="#no-network-access"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Your test will run within a hermetically sealed environment. You are not allowed
to send HTTP requests to any external servers. It is expected that you'll use
Closure Library mocks for things like XHR. However a local HTTP server is
started up on a random port that allows to request runfiles under the
<code>/filez/WORKSPACE_NAME/</code> path.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism-2" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will be the outputted executable, <code>data</code> will contain
all transitive sources, data, and other runfiles.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments-2" class="anchor" aria-label="Permalink: Arguments" href="#arguments-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) A unique name for this rule.</p>
</li>
<li>
<p dir="auto"><strong>srcs:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; required) List of <code>_test.js</code> source files that
register test functions.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Direct dependency list passed along to
<a href="#closure_js_library">closure_js_library</a>.</p>
</li>
<li>
<p dir="auto"><strong>data:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Passed to <a href="#closure_js_library">closure_js_library</a>.</p>
</li>
<li>
<p dir="auto"><strong>css:</strong> Passed to <a href="#closure_js_binary">closure_js_binary</a>.</p>
</li>
<li>
<p dir="auto"><strong>html:</strong> Passed to <a href="#phantomjs_test">phantomjs_test</a>.</p>
</li>
<li>
<p dir="auto"><strong>language:</strong> Passed to <a href="#closure_js_binary">closure_js_binary</a>.</p>
</li>
<li>
<p dir="auto"><strong>compilation_level:</strong> Passed to <a href="#closure_js_binary">closure_js_binary</a>. Setting this to
<code>"WHITESPACE_ONLY"</code> will cause tests to run significantly faster (at the
expense of type checking.)</p>
</li>
<li>
<p dir="auto"><strong>suppress:</strong> Passed to <a href="#closure_js_library">closure_js_library</a>.</p>
</li>
<li>
<p dir="auto"><strong>entry_points:</strong> If a dict, the source file is looked up for the value to pass to <a href="#closure_js_binary">closure_js_binary</a>.  Otherwise, passed directly to <a href="#closure_js_binary">closure_js_binary</a>.</p>
</li>
<li>
<p dir="auto"><strong>defs:</strong> Passed to <a href="#closure_js_binary">closure_js_binary</a>.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">phantomjs_test</h2><a id="user-content-phantomjs_test" class="anchor" aria-label="Permalink: phantomjs_test" href="#phantomjs_test"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;phantomjs_test&quot;)
phantomjs_test(name, data, deps, html, harness, runner)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"phantomjs_test"</span>)
<span class="pl-en">phantomjs_test</span>(<span class="pl-s1">name</span>, <span class="pl-s1">data</span>, <span class="pl-s1">deps</span>, <span class="pl-s1">html</span>, <span class="pl-s1">harness</span>, <span class="pl-s1">runner</span>)</pre></div>
<p dir="auto">Runs PhantomJS (QtWebKit) for unit testing purposes.</p>
<p dir="auto">This is a low level rule. Please use the <a href="#closure_js_test">closure_js_test</a> macro if possible.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism-3" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will be the outputted executable, <code>data</code> will contain
all transitive sources, data, and other runfiles.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments-3" class="anchor" aria-label="Permalink: Arguments" href="#arguments-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) Unique name for this rule.</p>
</li>
<li>
<p dir="auto"><strong>data:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Additional runfiles for the local HTTP
server to serve, under the <code>/filez/</code> + repository path. This attribute should
not be necessary, because the transitive runfile data is already collected
from dependencies.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; required) Labels of Skylark rules exporting
<code>transitive_js_srcs</code>. Each source will be inserted into the webpage in its own
<code>&lt;script&gt;</code> tag based on a depth-first preordering.</p>
</li>
<li>
<p dir="auto"><strong>html:</strong> (Label; optional; default is
<code>"@rules_closure//closure/testing:empty.html"</code>) HTML file containing
DOM structure of virtual web page <em>before</em> <code>&lt;script&gt;</code> tags are automatically
inserted. Do not include a doctype in this file.</p>
</li>
<li>
<p dir="auto"><strong>harness:</strong> (Label; required; default is
<code>"@rules_closure//closure/testing:phantomjs_harness"</code>) JS binary or
library exporting a single source file, to be used as the PhantomJS outer
script.</p>
</li>
<li>
<p dir="auto"><strong>runner:</strong> (Label; optional; default is
<code>"@rules_closure//closure/testing:phantomjs_jsunit_runner"</code>) Same as
<code>deps</code> but guaranteed to be loaded inside the virtual web page last. This
should run whatever tests got loaded by <code>deps</code> and then invoke <code>callPhantom</code>
to report the result to the <code>harness</code>.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">closure_css_library</h2><a id="user-content-closure_css_library" class="anchor" aria-label="Permalink: closure_css_library" href="#closure_css_library"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;closure_css_library&quot;)
closure_css_library(name, srcs, data, deps)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"closure_css_library"</span>)
<span class="pl-en">closure_css_library</span>(<span class="pl-s1">name</span>, <span class="pl-s1">srcs</span>, <span class="pl-s1">data</span>, <span class="pl-s1">deps</span>)</pre></div>
<p dir="auto">Defines a set of CSS stylesheets.</p>
<p dir="auto">This rule does not compile your stylesheets; it is used in conjunction with
<a href="#closure_css_binary">closure_css_binary</a> which produces the minified CSS file.</p>
<p dir="auto">This rule should be referenced by any <a href="#closure_js_library">closure_js_library</a> rule whose sources
contain a <code>goog.getCssName('foo')</code> call if <code>foo</code> is a CSS class name defined by
this rule.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism-4" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will be the generated JS output files and <code>data</code> will
contain all transitive CSS/GSS sources and data.</p>
</li>
<li>
<p dir="auto"><a href="#closure_js_library">closure_js_library</a>: <code>srcs</code> is empty, <code>data</code> is the transitive CSS sources
and data, and <code>no_closure_library</code> is <code>True</code>. However the
closure_css_library rule does pass special information along when used as a
dep in closure_js_library. See its documentation to learn more.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments-4" class="anchor" aria-label="Permalink: Arguments" href="#arguments-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) A unique name for this rule. Convention states
that this end with <code>_lib</code>.</p>
</li>
<li>
<p dir="auto"><strong>srcs:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; required) A list of <code>.gss</code> or <code>.css</code> source files
that represent this library.</p>
<p dir="auto">The order of stylsheets is <code>srcs</code> is undefined. If a CSS file overrides
definitions in another CSS file, then each file must be specified in separate
<a href="#closure_css_library">closure_css_library</a> targets. That way Bazel can order your CSS definitions
based on the depth-first preordering of dependent rules.</p>
<p dir="auto">It is strongly recommended you use <code>@provide</code> and <code>@require</code> statements in
your stylesheets so the CSS compiler can assert that the ordering is accurate.</p>
</li>
<li>
<p dir="auto"><strong>data:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) Runfiles directly referenced by CSS
sources in this rule. For example, if the CSS has a <code>url(foo.png)</code> then the
data attribute of its rule should be set to <code>["foo.png"]</code> so the image is
available in the web server runfiles.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; optional) List of other <a href="#closure_css_library">closure_css_library</a>
targets on which the CSS files in <code>srcs</code> depend.</p>
</li>
<li>
<p dir="auto"><strong>orientation:</strong> (String; optional; default is <code>"LTR"</code>) Defines the text
direction for which this CSS was designed. This value can be:</p>
<ul dir="auto">
<li><code>LTR</code>: Outputs a sheet suitable for left to right display.</li>
<li><code>RTL</code>: Outputs a sheet suitable for right to left display.</li>
</ul>
<p dir="auto">An error will be raised if any <code>deps</code> do not have the same orientation. CSS
libraries with different orientations can be linked together by creating an
intermediary <a href="#closure_css_binary">closure_css_binary</a> that flips its orientation.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">closure_css_binary</h2><a id="user-content-closure_css_binary" class="anchor" aria-label="Permalink: closure_css_binary" href="#closure_css_binary"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_closure//closure:defs.bzl&quot;, &quot;closure_css_binary&quot;)
closure_css_binary(name, deps, renaming, debug, defs)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_closure//closure:defs.bzl"</span>, <span class="pl-s">"closure_css_binary"</span>)
<span class="pl-en">closure_css_binary</span>(<span class="pl-s1">name</span>, <span class="pl-s1">deps</span>, <span class="pl-s1">renaming</span>, <span class="pl-s1">debug</span>, <span class="pl-s1">defs</span>)</pre></div>
<p dir="auto">Turns stylesheets defined by <a href="#closure_css_library">closure_css_library</a> rules into a single minified
CSS file.</p>
<p dir="auto">Closure-specific syntax such as variables, functions, conditionals, and mixins
will be evaluated and turned into normal CSS. The documentation on using these
features can be found <a href="https://github.com/google/closure-stylesheets">here</a>.</p>
<p dir="auto">Unlike most CSS minifiers, this will minify class names by default. So this rule
can be referenced by the <code>css</code> flag of <a href="#closure_js_binary">closure_js_binary</a>, in order to let the
Closure Compiler know how to substitute the minified class names. See the
<code>renaming</code> documentation below for more information.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Implicit Output Targets</h4><a id="user-content-implicit-output-targets-1" class="anchor" aria-label="Permalink: Implicit Output Targets" href="#implicit-output-targets-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><em>name</em>.css: A minified CSS file defining the transitive closure of dependent
stylesheets compiled in a depth-first preordering.</p>
</li>
<li>
<p dir="auto"><em>name</em>.css.map: <a href="https://developer.chrome.com/devtools/docs/css-preprocessors" rel="nofollow">CSS sourcemap file</a>. This tells browsers like
Chrome and Firefox where your CSS definitions are located in their original
source files.</p>
</li>
<li>
<p dir="auto"><em>name</em>.css.js: JavaScript file containing a <code>goog.setCssNameMapping()</code>
statement which tells the Closure Compiler and Library how to minify CSS class
names. The use of this file is largely handled transparently by the build
system. The user should only need to worry about this file when rendering Soy
templates from Java code, because its contents will need to be parsed into a
map using a regular expression, which is then passed to the Soy Tofu Java
runtime.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Polymorphism</h4><a id="user-content-rule-polymorphism-5" class="anchor" aria-label="Permalink: Rule Polymorphism" href="#rule-polymorphism-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This rule can be referenced as though it were the following:</p>
<ul dir="auto">
<li>
<p dir="auto"><a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow">filegroup</a>: <code>srcs</code> will be the generated .css, .css.map, and .css.js output
files. <code>data</code> will contain all transitive CSS/GSS sources and data.</p>
</li>
<li>
<p dir="auto"><a href="#closure_css_library">closure_css_library</a>: <code>srcs</code> is the output .css file, <code>data</code> is the
transitive CSS sources and data, and <code>orientation</code> is the output orientation.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Arguments</h3><a id="user-content-arguments-5" class="anchor" aria-label="Permalink: Arguments" href="#arguments-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>name:</strong> (<a href="https://docs.bazel.build/versions/master/build-ref.html#name" rel="nofollow">Name</a>; required) A unique name for this rule. Convention states
that such rules be named <code>foo_bin</code> or <code>foo_dbg</code> if <code>debug = True</code>.</p>
</li>
<li>
<p dir="auto"><strong>deps:</strong> (List of <a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow">labels</a>; required) List of <a href="#closure_css_library">closure_css_library</a> rules to
compile. All dependencies must have their <code>orientation</code> attribute set to the
same value.</p>
</li>
<li>
<p dir="auto"><strong>renaming:</strong> (Boolean; optional; default is <code>True</code>) Enables CSS class name
minification. This is one of the most powerful features of the Closure Tools.
By default, this will turn class names like <code>.foo-bar</code> into things like
<code>.a-b</code>. If <code>debug = True</code> then it will be renamed <code>.foo_-bar_</code>.</p>
<p dir="auto">In order for this to work, you must update your JavaScript code to use the
<code>goog.getCssName("foo-bar")</code> when referencing class names. JavaScript
library targets that reference CSS classes must add the appropriate CSS
library to its <code>deps</code> attribute. The <code>css</code> attribute of the
<a href="#closure_js_binary">closure_js_binary</a> also needs to be updated to point to this CSS binary
target, so the build system can verify (at compile time) that your CSS and
JS binaries are both being compiled in a harmonious way.</p>
</li>
<li>
<p dir="auto"><strong>debug:</strong> (Boolean; optional; default is <code>False</code>) Enables debug mode, which
causes the compiled stylesheet to be pretty printed. If <code>renaming = True</code> then
class names will be renamed, but still readable to humans.</p>
</li>
<li>
<p dir="auto"><strong>orientation:</strong> (String; optional; default is <code>"NOCHANGE"</code>) Specify this
option to perform automatic right to left conversion of the input. You can
choose between:</p>
<ul dir="auto">
<li><code>NOCHANGE</code>: Uses same orientation as was specified in dependent libraries.</li>
<li><code>LTR</code>: Outputs a sheet suitable for left to right display.</li>
<li><code>RTL</code>: Outputs a sheet suitable for right to left display.</li>
</ul>
<p dir="auto">The input orientation is calculated from the <code>orientation</code> flag of all
<a href="#closure_css_library">closure_css_library</a> targets listed in <code>deps</code>. If the input orientation is
different than the requested output orientation, then 'left' and 'right'
values in direction sensitive style rules are flipped. If the input already
has the desired orientation, this option effectively does nothing except for
defining <code>GSS_LTR</code> and <code>GSS_RTL</code>, respectively.</p>
</li>
<li>
<p dir="auto"><strong>vendor:</strong> (String; optional; default is <code>None</code>) Creates
browser-vendor-specific output by stripping all proprietary browser-vendor
properties from the output except for those associated with this vendor. Valid
values are:</p>
<ul dir="auto">
<li><code>WEBKIT</code></li>
<li><code>MOZILLA</code></li>
<li><code>MICROSOFT</code></li>
<li><code>OPERA</code></li>
<li><code>KONQUEROR</code></li>
</ul>
<p dir="auto">The default behavior is to not strip any browser-vendor properties.</p>
</li>
<li>
<p dir="auto"><strong>defs:</strong> (List of strings; optional) Specifies additional flags to be passed
to the Closure Stylesheets compiler. To see what flags are available, run:
<code>bazel run //closure/stylesheets:ClosureCommandLineCompiler -- --help</code></p>
</li>
</ul>
</article></div>