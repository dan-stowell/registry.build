<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://github.com/libexpat/libexpat/actions/workflows/linux.yml"><img src="https://github.com/libexpat/libexpat/actions/workflows/linux.yml/badge.svg" alt="Run Linux CI tasks" style="max-width: 100%;"></a>
<a href="https://repology.org/metapackage/expat/versions" rel="nofollow"><img src="https://camo.githubusercontent.com/936feae91751338027c4315bd9240e1d81e0a17e7ab7ad454936c02c06c57ff1/68747470733a2f2f7265706f6c6f67792e6f72672f62616467652f74696e792d7265706f732f65787061742e737667" alt="Packaging status" data-canonical-src="https://repology.org/badge/tiny-repos/expat.svg" style="max-width: 100%;"></a>
<a href="https://sourceforge.net/projects/expat/files/" rel="nofollow"><img src="https://camo.githubusercontent.com/b0ee1e43546ebae6bda39b619f309c028bbcb0bec75bc769d9716990fa34c651/68747470733a2f2f696d672e736869656c64732e696f2f736f75726365666f7267652f64742f65787061743f6c6162656c3d446f776e6c6f616473253230536f75726365466f726765" alt="Downloads SourceForge" data-canonical-src="https://img.shields.io/sourceforge/dt/expat?label=Downloads%20SourceForge" style="max-width: 100%;"></a>
<a href="https://github.com/libexpat/libexpat/releases"><img src="https://camo.githubusercontent.com/fc5675a62daf2802cc61ee96e8710594273040be250817bb6f10b0357efc366e/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f646f776e6c6f6164732f6c696265787061742f6c696265787061742f746f74616c3f6c6162656c3d446f776e6c6f616473253230476974487562" alt="Downloads GitHub" data-canonical-src="https://img.shields.io/github/downloads/libexpat/libexpat/total?label=Downloads%20GitHub" style="max-width: 100%;"></a>
<a href="https://www.bestpractices.dev/projects/10205" rel="nofollow"><img src="https://camo.githubusercontent.com/73c0d3c6169a51def54c278ee35ed8c0cfaa176a73ad9254f8ab498a0bae256d/68747470733a2f2f7777772e626573747072616374696365732e6465762f70726f6a656374732f31303230352f6261646765" alt="OpenSSF Best Practices" data-canonical-src="https://www.bestpractices.dev/projects/10205/badge" style="max-width: 100%;"></a></p>
<div class="markdown-alert markdown-alert-caution" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-stop mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M4.47.22A.749.749 0 0 1 5 0h6c.199 0 .389.079.53.22l4.25 4.25c.141.14.22.331.22.53v6a.749.749 0 0 1-.22.53l-4.25 4.25A.749.749 0 0 1 11 16H5a.749.749 0 0 1-.53-.22L.22 11.53A.749.749 0 0 1 0 11V5c0-.199.079-.389.22-.53Zm.84 1.28L1.5 5.31v5.38l3.81 3.81h5.38l3.81-3.81V5.31L10.69 1.5ZM8 4a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 8 4Zm0 8a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>Caution</p>
<p dir="auto">Expat is <strong>understaffed</strong> and without funding.
There is a <a href="https://github.com/libexpat/libexpat/blob/master/expat/Changes">call for help with details</a>
at the top of the <code>Changes</code> file.</p>
</div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Expat, Release 2.7.1</h1><a id="user-content-expat-release-271" class="anchor" aria-label="Permalink: Expat, Release 2.7.1" href="#expat-release-271"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is Expat, a C99 library for parsing
<a href="https://www.w3.org/TR/2006/REC-xml-20060816/" rel="nofollow">XML 1.0 Fourth Edition</a>, started by
<a href="https://en.wikipedia.org/wiki/James_Clark_%28programmer%29" rel="nofollow">James Clark</a> in 1997.
Expat is a stream-oriented XML parser.  This means that you register
handlers with the parser before starting the parse.  These handlers
are called when the parser discovers the associated structures in the
document being parsed.  A start tag is an example of the kind of
structures for which you may register handlers.</p>
<p dir="auto">Expat supports the following C99 compilers:</p>
<ul dir="auto">
<li>GNU GCC &gt;=4.5 (for use from C) or GNU GCC &gt;=4.8.1 (for use from C++)</li>
<li>LLVM Clang &gt;=3.5</li>
<li>Microsoft Visual Studio &gt;=17.0/2022
(the oldest version supported by the <a href="https://github.com/actions/runner-images">official GitHub Actions Windows images</a>)</li>
</ul>
<p dir="auto">Windows users can use the
<a href="https://github.com/libexpat/libexpat/releases"><code>expat-win32bin-*.*.*.{exe,zip}</code> download</a>,
which includes both pre-compiled libraries and executables, and source code for
developers.</p>
<p dir="auto">Expat is <a href="https://www.gnu.org/philosophy/free-sw.en.html" rel="nofollow">free software</a>.
You may copy, distribute, and modify it under the terms of the License
contained in the file
<a href="https://github.com/libexpat/libexpat/blob/master/expat/COPYING"><code>COPYING</code></a>
distributed with this package.
This license is the same as the MIT/X Consortium license.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Using libexpat in your CMake-Based Project</h2><a id="user-content-using-libexpat-in-your-cmake-based-project" class="anchor" aria-label="Permalink: Using libexpat in your CMake-Based Project" href="#using-libexpat-in-your-cmake-based-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are three documented ways of using libexpat with CMake:</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">a) <code>find_package</code> with Module Mode</h3><a id="user-content-a-find_package-with-module-mode" class="anchor" aria-label="Permalink: a) find_package with Module Mode" href="#a-find_package-with-module-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This approach leverages CMake's own <a href="https://cmake.org/cmake/help/latest/module/FindEXPAT.html" rel="nofollow">module <code>FindEXPAT</code></a>.</p>
<p dir="auto">Notice the <em>uppercase</em> <code>EXPAT</code> in the following example:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake_minimum_required(VERSION 3.10)

project(hello VERSION 1.0.0)

find_package(EXPAT 2.2.8 MODULE REQUIRED)

add_executable(hello
    hello.c
)

target_link_libraries(hello PUBLIC EXPAT::EXPAT)"><pre><span class="pl-k">cmake_minimum_required</span>(<span class="pl-e">VERSION</span> 3.10)

<span class="pl-k">project</span>(hello <span class="pl-e">VERSION</span> 1.0.0)

<span class="pl-k">find_package</span>(EXPAT 2.2.8 MODULE REQUIRED)

<span class="pl-k">add_executable</span>(hello
    hello.c
)

<span class="pl-k">target_link_libraries</span>(hello <span class="pl-e">PUBLIC</span> EXPAT::EXPAT)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">b) <code>find_package</code> with Config Mode</h3><a id="user-content-b-find_package-with-config-mode" class="anchor" aria-label="Permalink: b) find_package with Config Mode" href="#b-find_package-with-config-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This approach requires files fromâ€¦</p>
<ul dir="auto">
<li>libexpat &gt;=2.2.8 where packaging uses the CMake build system
or</li>
<li>libexpat &gt;=2.3.0 where packaging uses the GNU Autotools build system
on Linux
or</li>
<li>libexpat &gt;=2.4.0 where packaging uses the GNU Autotools build system
on macOS or MinGW.</li>
</ul>
<p dir="auto">Notice the <em>lowercase</em> <code>expat</code> in the following example:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake_minimum_required(VERSION 3.10)

project(hello VERSION 1.0.0)

find_package(expat 2.2.8 CONFIG REQUIRED char dtd ns)

add_executable(hello
    hello.c
)

target_link_libraries(hello PUBLIC expat::expat)"><pre><span class="pl-k">cmake_minimum_required</span>(<span class="pl-e">VERSION</span> 3.10)

<span class="pl-k">project</span>(hello <span class="pl-e">VERSION</span> 1.0.0)

<span class="pl-k">find_package</span>(expat 2.2.8 CONFIG REQUIRED char dtd ns)

<span class="pl-k">add_executable</span>(hello
    hello.c
)

<span class="pl-k">target_link_libraries</span>(hello <span class="pl-e">PUBLIC</span> expat::expat)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">c) The <code>FetchContent</code> module</h3><a id="user-content-c-the-fetchcontent-module" class="anchor" aria-label="Permalink: c) The FetchContent module" href="#c-the-fetchcontent-module"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This approach â€” as demonstrated below â€” requires CMake &gt;=3.18 for both the
<a href="https://cmake.org/cmake/help/latest/module/FetchContent.html" rel="nofollow"><code>FetchContent</code> module</a>
and its support for the <code>SOURCE_SUBDIR</code> option to be available.</p>
<p dir="auto">Please note that:</p>
<ul dir="auto">
<li>Use of the <code>FetchContent</code> module with <em>non-release</em> SHA1s or <code>master</code>
of libexpat is neither advised nor considered officially supported.</li>
<li>Pinning to a specific commit is great for robust CI.</li>
<li>Pinning to a specific commit needs updating every time there is a new
release of libexpat â€” either manually or through automation â€”,
to not miss out on libexpat security updates.</li>
</ul>
<p dir="auto">For an example that pulls in libexpat via Git:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cmake_minimum_required(VERSION 3.18)

include(FetchContent)

project(hello VERSION 1.0.0)

FetchContent_Declare(
    expat
    GIT_REPOSITORY https://github.com/libexpat/libexpat/
    GIT_TAG        000000000_GIT_COMMIT_SHA1_HERE_000000000  # i.e. Git tag R_0_Y_Z
    SOURCE_SUBDIR  expat/
)

FetchContent_MakeAvailable(expat)

add_executable(hello
    hello.c
)

target_link_libraries(hello PUBLIC expat)"><pre><span class="pl-k">cmake_minimum_required</span>(<span class="pl-e">VERSION</span> 3.18)

<span class="pl-k">include</span>(FetchContent)

<span class="pl-k">project</span>(hello <span class="pl-e">VERSION</span> 1.0.0)

FetchContent_Declare(
    expat
    GIT_REPOSITORY https://github.com/libexpat/libexpat/
    GIT_TAG        000000000_GIT_COMMIT_SHA1_HERE_000000000  <span class="pl-c"># i.e. Git tag R_0_Y_Z</span>
    SOURCE_SUBDIR  expat/
)

FetchContent_MakeAvailable(expat)

<span class="pl-k">add_executable</span>(hello
    hello.c
)

<span class="pl-k">target_link_libraries</span>(hello <span class="pl-e">PUBLIC</span> expat)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Building from a Git Clone</h2><a id="user-content-building-from-a-git-clone" class="anchor" aria-label="Permalink: Building from a Git Clone" href="#building-from-a-git-clone"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">If you are building Expat from a check-out from the
<a href="https://github.com/libexpat/libexpat/">Git repository</a>,
you need to run a script that generates the configure script using the
GNU autoconf and libtool tools.  To do this, you need to have
autoconf 2.58 or newer. Run the script like this:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="./buildconf.sh"><pre><span class="pl-c1">./buildconf.sh</span></pre></div>
<p dir="auto">Once this has been done, follow the same instructions as for building
from a source distribution.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Building from a Source Distribution</h2><a id="user-content-building-from-a-source-distribution" class="anchor" aria-label="Permalink: Building from a Source Distribution" href="#building-from-a-source-distribution"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">a) Building with the configure script (i.e. GNU Autotools)</h3><a id="user-content-a-building-with-the-configure-script-ie-gnu-autotools" class="anchor" aria-label="Permalink: a) Building with the configure script (i.e. GNU Autotools)" href="#a-building-with-the-configure-script-ie-gnu-autotools"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To build Expat from a source distribution, you first run the
configuration shell script in the top level distribution directory:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="./configure"><pre><span class="pl-c1">./configure</span></pre></div>
<p dir="auto">There are many options which you may provide to configure (which you
can discover by running configure with the <code>--help</code> option).  But the
one of most interest is the one that sets the installation directory.
By default, the configure script will set things up to install
libexpat into <code>/usr/local/lib</code>, <code>expat.h</code> into <code>/usr/local/include</code>, and
<code>xmlwf</code> into <code>/usr/local/bin</code>.  If, for example, you'd prefer to install
into <code>/home/me/mystuff/lib</code>, <code>/home/me/mystuff/include</code>, and
<code>/home/me/mystuff/bin</code>, you can tell <code>configure</code> about that with:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="./configure --prefix=/home/me/mystuff"><pre><span class="pl-c1">./configure --prefix=/home/me/mystuff</span></pre></div>
<p dir="auto">Another interesting option is to enable 64-bit integer support for
line and column numbers and the over-all byte index:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="./configure CPPFLAGS=-DXML_LARGE_SIZE"><pre><span class="pl-c1">./configure CPPFLAGS=-DXML_LARGE_SIZE</span></pre></div>
<p dir="auto">However, such a modification would be a breaking change to the ABI
and is therefore not recommended for general use â€” e.g. as part of
a Linux distribution â€” but rather for builds with special requirements.</p>
<p dir="auto">After running the configure script, the <code>make</code> command will build
things and <code>make install</code> will install things into their proper
location.  Have a look at the <code>Makefile</code> to learn about additional
<code>make</code> options.  Note that you need to have write permission into
the directories into which things will be installed.</p>
<p dir="auto">If you are interested in building Expat to provide document
information in UTF-16 encoding rather than the default UTF-8, follow
these instructions (after having run <code>make distclean</code>).
Please note that we configure with <code>--without-xmlwf</code> as xmlwf does not
support this mode of compilation (yet):</p>
<ol dir="auto">
<li>
<p dir="auto">Mass-patch <code>Makefile.am</code> files to use <code>libexpatw.la</code> for a library name:
<br>
<code>find . -name Makefile.am -exec sed -e 's,libexpat\.la,libexpatw.la,' -e 's,libexpat_la,libexpatw_la,' -i.bak {} +</code></p>
</li>
<li>
<p dir="auto">Run <code>automake</code> to re-write <code>Makefile.in</code> files:<br>
<code>automake</code></p>
</li>
<li>
<p dir="auto">For UTF-16 output as unsigned short (and version/error strings as char),
run:<br>
<code>./configure CPPFLAGS=-DXML_UNICODE --without-xmlwf</code><br>
For UTF-16 output as <code>wchar_t</code> (incl. version/error strings), run:<br>
<code>./configure CFLAGS="-g -O2 -fshort-wchar" CPPFLAGS=-DXML_UNICODE_WCHAR_T --without-xmlwf</code>
<br>Note: The latter requires libc compiled with <code>-fshort-wchar</code>, as well.</p>
</li>
<li>
<p dir="auto">Run <code>make</code> (which excludes xmlwf).</p>
</li>
<li>
<p dir="auto">Run <code>make install</code> (again, excludes xmlwf).</p>
</li>
</ol>
<p dir="auto">Using <code>DESTDIR</code> is supported.  It works as follows:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="make install DESTDIR=/path/to/image"><pre><span class="pl-c1">make install DESTDIR=/path/to/image</span></pre></div>
<p dir="auto">overrides the in-makefile set <code>DESTDIR</code>, because variable-setting priority is</p>
<ol dir="auto">
<li>commandline</li>
<li>in-makefile</li>
<li>environment</li>
</ol>
<p dir="auto">Note: This only applies to the Expat library itself, building UTF-16 versions
of xmlwf and the tests is currently not supported.</p>
<p dir="auto">When using Expat with a project using autoconf for configuration, you
can use the probing macro in <code>conftools/expat.m4</code> to determine how to
include Expat.  See the comments at the top of that file for more
information.</p>
<p dir="auto">A reference manual is available in the file <code>doc/reference.html</code> in this
distribution.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">b) Building with CMake</h3><a id="user-content-b-building-with-cmake" class="anchor" aria-label="Permalink: b) Building with CMake" href="#b-building-with-cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The CMake build system is still <em>experimental</em> and may replace the primary
build system based on GNU Autotools at some point when it is ready.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Available Options</h4><a id="user-content-available-options" class="anchor" aria-label="Permalink: Available Options" href="#available-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For an idea of the available (non-advanced) options for building with CMake:</p>
<div class="highlight highlight-text-shell-session notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# rm -f CMakeCache.txt ; cmake -D_EXPAT_HELP=ON -LH . | grep -B1 ':.*=' | sed 's,^--$,,'
// Choose the type of build, options are: None Debug Release RelWithDebInfo MinSizeRel ...
CMAKE_BUILD_TYPE:STRING=

// Install path prefix, prepended onto install directories.
CMAKE_INSTALL_PREFIX:PATH=/usr/local

// Path to a program.
DOCBOOK_TO_MAN:FILEPATH=/usr/bin/docbook2x-man

// Build man page for xmlwf
EXPAT_BUILD_DOCS:BOOL=ON

// Build the examples for expat library
EXPAT_BUILD_EXAMPLES:BOOL=ON

// Build fuzzers for the expat library
EXPAT_BUILD_FUZZERS:BOOL=OFF

// Build pkg-config file
EXPAT_BUILD_PKGCONFIG:BOOL=ON

// Build the tests for expat library
EXPAT_BUILD_TESTS:BOOL=ON

// Build the xmlwf tool for expat library
EXPAT_BUILD_TOOLS:BOOL=ON

// Character type to use (char|ushort|wchar_t) [default=char]
EXPAT_CHAR_TYPE:STRING=char

// Install expat files in cmake install target
EXPAT_ENABLE_INSTALL:BOOL=ON

// Use /MT flag (static CRT) when compiling in MSVC
EXPAT_MSVC_STATIC_CRT:BOOL=OFF

// Build fuzzers via OSS-Fuzz for the expat library
EXPAT_OSSFUZZ_BUILD:BOOL=OFF

// Build a shared expat library
EXPAT_SHARED_LIBS:BOOL=ON

// Treat all compiler warnings as errors
EXPAT_WARNINGS_AS_ERRORS:BOOL=OFF

// Make use of getrandom function (ON|OFF|AUTO) [default=AUTO]
EXPAT_WITH_GETRANDOM:STRING=AUTO

// Utilize libbsd (for arc4random_buf)
EXPAT_WITH_LIBBSD:BOOL=OFF

// Make use of syscall SYS_getrandom (ON|OFF|AUTO) [default=AUTO]
EXPAT_WITH_SYS_GETRANDOM:STRING=AUTO"><pre># <span class="pl-s1">rm -f CMakeCache.txt <span class="pl-k">;</span> cmake -D_EXPAT_HELP=ON -LH <span class="pl-c1">.</span> <span class="pl-k">|</span> grep -B1 <span class="pl-s"><span class="pl-pds">'</span>:.*=<span class="pl-pds">'</span></span> <span class="pl-k">|</span> sed <span class="pl-s"><span class="pl-pds">'</span>s,^--$,,<span class="pl-pds">'</span></span></span>
<span class="pl-c1">// Choose the type of build, options are: None Debug Release RelWithDebInfo MinSizeRel ...</span>
<span class="pl-c1">CMAKE_BUILD_TYPE:STRING=</span>

<span class="pl-c1">// Install path prefix, prepended onto install directories.</span>
<span class="pl-c1">CMAKE_INSTALL_PREFIX:PATH=/usr/local</span>

<span class="pl-c1">// Path to a program.</span>
<span class="pl-c1">DOCBOOK_TO_MAN:FILEPATH=/usr/bin/docbook2x-man</span>

<span class="pl-c1">// Build man page for xmlwf</span>
<span class="pl-c1">EXPAT_BUILD_DOCS:BOOL=ON</span>

<span class="pl-c1">// Build the examples for expat library</span>
<span class="pl-c1">EXPAT_BUILD_EXAMPLES:BOOL=ON</span>

<span class="pl-c1">// Build fuzzers for the expat library</span>
<span class="pl-c1">EXPAT_BUILD_FUZZERS:BOOL=OFF</span>

<span class="pl-c1">// Build pkg-config file</span>
<span class="pl-c1">EXPAT_BUILD_PKGCONFIG:BOOL=ON</span>

<span class="pl-c1">// Build the tests for expat library</span>
<span class="pl-c1">EXPAT_BUILD_TESTS:BOOL=ON</span>

<span class="pl-c1">// Build the xmlwf tool for expat library</span>
<span class="pl-c1">EXPAT_BUILD_TOOLS:BOOL=ON</span>

<span class="pl-c1">// Character type to use (char|ushort|wchar_t) [default=char]</span>
<span class="pl-c1">EXPAT_CHAR_TYPE:STRING=char</span>

<span class="pl-c1">// Install expat files in cmake install target</span>
<span class="pl-c1">EXPAT_ENABLE_INSTALL:BOOL=ON</span>

<span class="pl-c1">// Use /MT flag (static CRT) when compiling in MSVC</span>
<span class="pl-c1">EXPAT_MSVC_STATIC_CRT:BOOL=OFF</span>

<span class="pl-c1">// Build fuzzers via OSS-Fuzz for the expat library</span>
<span class="pl-c1">EXPAT_OSSFUZZ_BUILD:BOOL=OFF</span>

<span class="pl-c1">// Build a shared expat library</span>
<span class="pl-c1">EXPAT_SHARED_LIBS:BOOL=ON</span>

<span class="pl-c1">// Treat all compiler warnings as errors</span>
<span class="pl-c1">EXPAT_WARNINGS_AS_ERRORS:BOOL=OFF</span>

<span class="pl-c1">// Make use of getrandom function (ON|OFF|AUTO) [default=AUTO]</span>
<span class="pl-c1">EXPAT_WITH_GETRANDOM:STRING=AUTO</span>

<span class="pl-c1">// Utilize libbsd (for arc4random_buf)</span>
<span class="pl-c1">EXPAT_WITH_LIBBSD:BOOL=OFF</span>

<span class="pl-c1">// Make use of syscall SYS_getrandom (ON|OFF|AUTO) [default=AUTO]</span>
<span class="pl-c1">EXPAT_WITH_SYS_GETRANDOM:STRING=AUTO</span></pre></div>
</article></div>