<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">README.md</h1><a id="user-content-readmemd" class="anchor" aria-label="Permalink: README.md" href="#readmemd"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">cc_resources Rule</h2><a id="user-content-cc_resources-rule" class="anchor" aria-label="Permalink: cc_resources Rule" href="#cc_resources-rule"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>cc_resources</code> rule in Bazel is designed for converting binary files into C/C++ source files and headers. This rule generates a pair of <code>.cpp</code> and <code>.h</code> files for each input binary file. These generated files define a C-compatible struct with the name, size, and data of the resource, which can then be used in your C/C++ code.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Usage</h3><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Here is a brief overview of how to use the <code>cc_resources</code> rule in your Bazel build files.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_cc_resources&quot;, version = &quot;0.2.0&quot;)
# load(&quot;@rules_cc_resources//rules:defs.bzl&quot;, &quot;cc_resources&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_cc_resources"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.2.0"</span>)
<span class="pl-c"># load("@rules_cc_resources//rules:defs.bzl", "cc_resources")</span></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Rule Definition</h4><a id="user-content-rule-definition" class="anchor" aria-label="Permalink: Rule Definition" href="#rule-definition"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You should define the <code>cc_resources</code> rule in your <code>BUILD.bazel</code> file with the required attributes:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cc_resources(
    name = &quot;my_resources&quot;,
    srcs = [&quot;path/to/resource1.bin&quot;, &quot;path/to/resource2.bin&quot;],
    out_prefix = &quot;my_res&quot;,  # Optional prefix for generated file names
    data_type = &quot;uchar&quot;,    # Optional data type for the array (default: &quot;uchar&quot;)
)"><pre><span class="pl-en">cc_resources</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"my_resources"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"path/to/resource1.bin"</span>, <span class="pl-s">"path/to/resource2.bin"</span>],
    <span class="pl-s1">out_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"my_res"</span>,  <span class="pl-c"># Optional prefix for generated file names</span>
    <span class="pl-s1">data_type</span> <span class="pl-c1">=</span> <span class="pl-s">"uchar"</span>,    <span class="pl-c"># Optional data type for the array (default: "uchar")</span>
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Attributes</h3><a id="user-content-attributes" class="anchor" aria-label="Permalink: Attributes" href="#attributes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><code>srcs</code>: A mandatory list of input binary files that need to be converted. These files will be processed and transformed into C/C++ source files.</p>
</li>
<li>
<p dir="auto"><code>out_prefix</code>: An optional string that specifies a prefix for the output file names and the corresponding C variable names. For example, if <code>out_prefix</code> is set to <code>ui</code> and the input is <code>icon.png</code>, the outputs will be named <code>ui_icon.h</code> and <code>ui_icon.cpp</code>, and the resource name will be <code>ui_icon</code>.</p>
</li>
<li>
<p dir="auto"><code>data_type</code>: An optional string that specifies the data type for the generated array. Available options are:</p>
<ul dir="auto">
<li><code>"char"</code>: Signed char array, suitable for text data</li>
<li><code>"uchar"</code>: Unsigned char array (default), suitable for binary data</li>
<li><code>"uint"</code>: Unsigned int array, reduces generated source file size by combining 4 bytes into one integer</li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Output</h3><a id="user-content-output" class="anchor" aria-label="Permalink: Output" href="#output"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">When you invoke the <code>cc_resources</code> rule, it generates:</p>
<ul dir="auto">
<li><code>.h</code> files containing the C-compatible struct definitions, including resource metadata.</li>
<li><code>.cpp</code> files implementing the logic to handle these resources.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Examples</h3><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Basic usage with default settings:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_cc_resources//rules:defs.bzl&quot;, &quot;cc_resources&quot;)

cc_resources(
    name = &quot;image_resources&quot;,
    srcs = [&quot;images/logo.png&quot;, &quot;images/background.png&quot;],
    out_prefix = &quot;assets&quot;
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_cc_resources//rules:defs.bzl"</span>, <span class="pl-s">"cc_resources"</span>)

<span class="pl-en">cc_resources</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"image_resources"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"images/logo.png"</span>, <span class="pl-s">"images/background.png"</span>],
    <span class="pl-s1">out_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"assets"</span>
)</pre></div>
<p dir="auto">Using unsigned int type to reduce generated file size:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cc_resources(
    name = &quot;large_resources&quot;,
    srcs = [&quot;data/large_file.bin&quot;],
    out_prefix = &quot;data&quot;,
    data_type = &quot;uint&quot;  # Combines 4 bytes into one unsigned int
)"><pre><span class="pl-en">cc_resources</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"large_resources"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"data/large_file.bin"</span>],
    <span class="pl-s1">out_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"data"</span>,
    <span class="pl-s1">data_type</span> <span class="pl-c1">=</span> <span class="pl-s">"uint"</span>  <span class="pl-c"># Combines 4 bytes into one unsigned int</span>
)</pre></div>
<p dir="auto">Text data handling:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="cc_resources(
    name = &quot;text_resources&quot;,
    srcs = [&quot;text/strings.txt&quot;],
    out_prefix = &quot;text&quot;,
    data_type = &quot;char&quot;  # Uses signed char for text data
)"><pre><span class="pl-en">cc_resources</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"text_resources"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"text/strings.txt"</span>],
    <span class="pl-s1">out_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"text"</span>,
    <span class="pl-s1">data_type</span> <span class="pl-c1">=</span> <span class="pl-s">"char"</span>  <span class="pl-c"># Uses signed char for text data</span>
)</pre></div>
<p dir="auto">This will produce the following files:</p>
<ul dir="auto">
<li><code>assets_logo.h</code> and <code>assets_logo.cpp</code></li>
<li><code>assets_background.h</code> and <code>assets_background.cpp</code></li>
<li><code>data_large_file.h</code> and <code>data_large_file.cpp</code></li>
<li><code>text_strings.h</code> and <code>text_strings.cpp</code></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Data Type Selection Guide</h3><a id="user-content-data-type-selection-guide" class="anchor" aria-label="Permalink: Data Type Selection Guide" href="#data-type-selection-guide"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto">Use <code>"uchar"</code> (default) when:</p>
<ul dir="auto">
<li>Working with general binary data</li>
<li>Maximum compatibility is needed</li>
<li>Individual byte access is important</li>
</ul>
</li>
<li>
<p dir="auto">Use <code>"uint"</code> when:</p>
<ul dir="auto">
<li>You have large binary files</li>
<li>You want to reduce the generated source file size</li>
<li>Memory alignment is not a concern</li>
</ul>
</li>
<li>
<p dir="auto">Use <code>"char"</code> when:</p>
<ul dir="auto">
<li>Working primarily with text data</li>
<li>Sign information is important</li>
<li>You need to handle ASCII/text data</li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Conclusion</h3><a id="user-content-conclusion" class="anchor" aria-label="Permalink: Conclusion" href="#conclusion"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>cc_resources</code> rule facilitates the integration of binary resources into C/C++ projects by automating the generation of corresponding source files, thereby streamlining resource management in Bazel builds. With the flexible data type options, you can optimize the generated code size and choose the most appropriate representation for your data.</p>
</article></div>