<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text">

<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Nixpkgs rules for Bazel</h1><a id="user-content-nixpkgs-rules-for-bazel" class="anchor" aria-label="Permalink: Nixpkgs rules for Bazel" href="#nixpkgs-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/tweag/rules_nixpkgs/actions/workflows/workflow.yaml"><img src="https://github.com/tweag/rules_nixpkgs/actions/workflows/workflow.yaml/badge.svg?event=schedule" alt="Continuous integration" style="max-width: 100%;"></a></p>
<p dir="auto">Use <a href="https://nixos.org/nix" rel="nofollow">Nix</a> and the <a href="https://github.com/NixOS/nixpkgs">Nixpkgs</a> package set to import
external dependencies (like system packages) into <a href="https://bazel.build" rel="nofollow">Bazel</a>
hermetically. If the version of any dependency changes, Bazel will
correctly rebuild targets, and only those targets that use the
external dependencies that changed.</p>
<p dir="auto">Links:</p>
<ul dir="auto">
<li><a href="https://www.tweag.io/posts/2018-03-15-bazel-nix.html" rel="nofollow">Nix + Bazel = fully reproducible, incremental
builds</a> (blog post)</li>
<li><a href="https://www.youtube.com/watch?v=7-K_RmDasEg&amp;t=2030s" rel="nofollow">Nix + Bazel</a> (lightning talk)</li>
</ul>
<p dir="auto">See <a href="/examples/toolchains">examples</a> for how to use <code>rules_nixpkgs</code> with different toolchains.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Rules</h2><a id="user-content-rules" class="anchor" aria-label="Permalink: Rules" href="#rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="#nixpkgs_git_repository">nixpkgs_git_repository</a></li>
<li><a href="#nixpkgs_http_repository">nixpkgs_http_repository</a></li>
<li><a href="#nixpkgs_local_repository">nixpkgs_local_repository</a></li>
<li><a href="#nixpkgs_package">nixpkgs_package</a></li>
<li><a href="#nixpkgs_flake_package">nixpkgs_flake_package</a></li>
<li><a href="#nixpkgs_cc_configure">nixpkgs_cc_configure</a></li>
<li><a href="#nixpkgs_java_configure">nixpkgs_java_configure</a></li>
<li><a href="#nixpkgs_python_configure">nixpkgs_python_configure</a></li>
<li><a href="#nixpkgs_python_repository">nixpkgs_python_repository</a></li>
<li><a href="toolchains/go/README.md#nixpkgs_go_configure">nixpkgs_go_configure</a></li>
<li><a href="#nixpkgs_rust_configure">nixpkgs_rust_configure</a></li>
<li><a href="#nixpkgs_sh_posix_configure">nixpkgs_sh_posix_configure</a></li>
<li><a href="#nixpkgs_nodejs_configure">nixpkgs_nodejs_configure</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Setup</h2><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>WORKSPACE</code> file, and select a <code>$COMMIT</code> accordingly.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

http_archive(
    name = &quot;io_tweag_rules_nixpkgs&quot;,
    strip_prefix = &quot;rules_nixpkgs-$COMMIT&quot;,
    urls = [&quot;https://github.com/tweag/rules_nixpkgs/archive/$COMMIT.tar.gz&quot;],
)

load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:repositories.bzl&quot;, &quot;rules_nixpkgs_dependencies&quot;)
rules_nixpkgs_dependencies()

load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl&quot;, &quot;nixpkgs_git_repository&quot;, &quot;nixpkgs_package&quot;, &quot;nixpkgs_cc_configure&quot;)

load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:toolchains/go.bzl&quot;, &quot;nixpkgs_go_configure&quot;) # optional"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"io_tweag_rules_nixpkgs"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs-$COMMIT"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [<span class="pl-s">"https://github.com/tweag/rules_nixpkgs/archive/$COMMIT.tar.gz"</span>],
)

<span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:repositories.bzl"</span>, <span class="pl-s">"rules_nixpkgs_dependencies"</span>)
<span class="pl-en">rules_nixpkgs_dependencies</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl"</span>, <span class="pl-s">"nixpkgs_git_repository"</span>, <span class="pl-s">"nixpkgs_package"</span>, <span class="pl-s">"nixpkgs_cc_configure"</span>)

<span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:toolchains/go.bzl"</span>, <span class="pl-s">"nixpkgs_go_configure"</span>) <span class="pl-c"># optional</span></pre></div>
<p dir="auto">If you use <code>rules_nixpkgs</code> to configure a toolchain, then you will also need to
configure the build platform to include the
<code>@rules_nixpkgs_core//constraints:support_nix</code> constraint. For
example by adding the following to <code>.bazelrc</code>:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --host_platform=@rules_nixpkgs_core//platforms:host"><pre class="notranslate"><code>build --host_platform=@rules_nixpkgs_core//platforms:host
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Example</h2><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="nixpkgs_git_repository(
    name = &quot;nixpkgs&quot;,
    revision = &quot;17.09&quot;, # Any tag or commit hash
    sha256 = &quot;&quot; # optional sha to verify package integrity!
)

nixpkgs_package(
    name = &quot;hello&quot;,
    repositories = { &quot;nixpkgs&quot;: &quot;@nixpkgs//:default.nix&quot; }
)"><pre><span class="pl-en">nixpkgs_git_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs"</span>,
    <span class="pl-s1">revision</span> <span class="pl-c1">=</span> <span class="pl-s">"17.09"</span>, <span class="pl-c"># Any tag or commit hash</span>
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">""</span> <span class="pl-c"># optional sha to verify package integrity!</span>
)

<span class="pl-en">nixpkgs_package</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"hello"</span>,
    <span class="pl-s1">repositories</span> <span class="pl-c1">=</span> { <span class="pl-s">"nixpkgs"</span>: <span class="pl-s">"@nixpkgs//:default.nix"</span> }
)</pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Migration from older releases</h2><a id="user-content-migration-from-older-releases" class="anchor" aria-label="Permalink: Migration from older releases" href="#migration-from-older-releases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto"><code>path</code> Attribute (removed in 0.3)</h3><a id="user-content-path-attribute-removed-in-03" class="anchor" aria-label="Permalink: path Attribute (removed in 0.3)" href="#path-attribute-removed-in-03"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>path</code> was an attribute from the early days of <code>rules_nixpkgs</code>, and
its ability to reference arbitrary paths is a danger to build hermeticity.</p>
<p dir="auto">Replace it with either <code>nixpkgs_git_repository</code> if you need
a specific version of <code>nixpkgs</code>. If you absolutely <em>must</em> depend on a
local folder, use Bazel's
<a href="https://docs.bazel.build/versions/master/be/workspace.html#local_repository" rel="nofollow"><code>local_repository</code> workspace rule</a>.
Both approaches work well with the <code>repositories</code> attribute of <code>nixpkgs_package</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="local_repository(
  name = &quot;local-nixpkgs&quot;,
  path = &quot;/path/to/nixpkgs&quot;,
)

nixpkgs_package(
  name = &quot;somepackage&quot;,
  repositories = {
    &quot;nixpkgs&quot;: &quot;@local-nixpkgs//:default.nix&quot;,
  },
)"><pre><span class="pl-en">local_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"local-nixpkgs"</span>,
  <span class="pl-s1">path</span> <span class="pl-c1">=</span> <span class="pl-s">"/path/to/nixpkgs"</span>,
)

<span class="pl-en">nixpkgs_package</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"somepackage"</span>,
  <span class="pl-s1">repositories</span> <span class="pl-c1">=</span> {
    <span class="pl-s">"nixpkgs"</span>: <span class="pl-s">"@local-nixpkgs//:default.nix"</span>,
  },
)</pre></div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Reference documentation</h1><a id="user-content-reference-documentation" class="anchor" aria-label="Permalink: Reference documentation" href="#reference-documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a id="user-content-#nixpkgs_cc_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_cc_configure</h3><a id="user-content-nixpkgs_cc_configure" class="anchor" aria-label="Permalink: nixpkgs_cc_configure" href="#nixpkgs_cc_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_cc_configure(<a href="#nixpkgs_cc_configure-name">name</a>, <a href="#nixpkgs_cc_configure-attribute_path">attribute_path</a>, <a href="#nixpkgs_cc_configure-nix_file">nix_file</a>, <a href="#nixpkgs_cc_configure-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_cc_configure-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_cc_configure-repositories">repositories</a>,
                     <a href="#nixpkgs_cc_configure-repository">repository</a>, <a href="#nixpkgs_cc_configure-nixopts">nixopts</a>, <a href="#nixpkgs_cc_configure-quiet">quiet</a>, <a href="#nixpkgs_cc_configure-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_cc_configure-exec_constraints">exec_constraints</a>,
                     <a href="#nixpkgs_cc_configure-target_constraints">target_constraints</a>, <a href="#nixpkgs_cc_configure-register">register</a>, <a href="#nixpkgs_cc_configure-cc_lang">cc_lang</a>, <a href="#nixpkgs_cc_configure-cc_std">cc_std</a>, <a href="#nixpkgs_cc_configure-cross_cpu">cross_cpu</a>, <a href="#nixpkgs_cc_configure-apple_sdk_path">apple_sdk_path</a>)
</pre>
<p dir="auto">Use a CC toolchain from Nixpkgs. No-op if not a nix-based platform.</p>
<p dir="auto">By default, Bazel auto-configures a CC toolchain from commands (e.g.
<code>gcc</code>) available in the environment. To make builds more hermetic, use
this rule to specify explicitly which commands the toolchain should use.</p>
<p dir="auto">Specifically, it builds a Nix derivation that provides the CC toolchain
tools in the <code>bin/</code> path and constructs a CC toolchain that uses those
tools. Tools that aren't found are replaced by <code>${coreutils}/bin/false</code>.
You can inspect the resulting <code>@&lt;name&gt;_info//:CC_TOOLCHAIN_INFO</code> to see
which tools were discovered.</p>
<p dir="auto">If you specify the <code>nix_file</code> or <code>nix_file_content</code> argument, the CC
toolchain is discovered by evaluating the corresponding expression. In
addition, you may use the <code>attribute_path</code> argument to select an attribute
from the result of the expression to use as the CC toolchain (see example below).</p>
<p dir="auto">If neither the <code>nix_file</code> nor <code>nix_file_content</code> argument is used, the
toolchain is discovered from the <code>stdenv.cc</code> and the <code>stdenv.cc.bintools</code>
attributes of the given <code>&lt;nixpkgs&gt;</code> repository.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# use GCC 11
nixpkgs_cc_configure(
  repository = &quot;@nixpkgs&quot;,
  nix_file_content = &quot;(import &lt;nixpkgs&gt; {}).gcc11&quot;,
)"><pre class="notranslate"><code># use GCC 11
nixpkgs_cc_configure(
  repository = "@nixpkgs",
  nix_file_content = "(import &lt;nixpkgs&gt; {}).gcc11",
)
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# use GCC 11 (same result as above)
nixpkgs_cc_configure(
  repository = &quot;@nixpkgs&quot;,
  attribute_path = &quot;gcc11&quot;,
  nix_file_content = &quot;import &lt;nixpkgs&gt; {}&quot;,
)"><pre class="notranslate"><code># use GCC 11 (same result as above)
nixpkgs_cc_configure(
  repository = "@nixpkgs",
  attribute_path = "gcc11",
  nix_file_content = "import &lt;nixpkgs&gt; {}",
)
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# alternate usage without specifying `nix_file` or `nix_file_content`
nixpkgs_cc_configure(
  repository = &quot;@nixpkgs&quot;,
  attribute_path = &quot;gcc11&quot;,
)"><pre class="notranslate"><code># alternate usage without specifying `nix_file` or `nix_file_content`
nixpkgs_cc_configure(
  repository = "@nixpkgs",
  attribute_path = "gcc11",
)
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# use the `stdenv.cc` compiler (the default of the given @nixpkgs repository)
nixpkgs_cc_configure(
  repository = &quot;@nixpkgs&quot;,
)"><pre class="notranslate"><code># use the `stdenv.cc` compiler (the default of the given @nixpkgs repository)
nixpkgs_cc_configure(
  repository = "@nixpkgs",
)
</code></pre></div>
<p dir="auto">This rule depends on <a href="https://github.com/bazelbuild/rules_cc"><code>rules_cc</code></a>.</p>
<p dir="auto"><strong>Note:</strong>
You need to configure <code>--crosstool_top=@&lt;name&gt;//:toolchain</code> to activate
this toolchain.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters" class="anchor" aria-label="Permalink: Parameters" href="#parameters"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_cc_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"local_config_cc"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-attribute_path">
<td><code>attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">optional, string, Obtain the toolchain from the Nix expression under this attribute path. Uses default repository if no <code>nix_file</code> or <code>nix_file_content</code> is provided.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">optional, Label, Obtain the toolchain from the Nix expression defined in this file. Specify only one of <code>nix_file</code> or <code>nix_file_content</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">optional, string, Obtain the toolchain from the given Nix expression. Specify only one of <code>nix_file</code> or <code>nix_file_content</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">optional, list of Label, Additional files that the Nix expression depends on.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
<p dir="auto">
</p><p dir="auto">dict of Label to string, Provides <code>&lt;nixpkgs&gt;</code> and other repositories. Specify one of <code>repositories</code> or <code>repository</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Label, Provides <code>&lt;nixpkgs&gt;</code>. Specify one of <code>repositories</code> or <code>repository</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">optional, list of string, Extra flags to pass when calling Nix. See <code>nixopts</code> attribute to <code>nixpkgs_package</code> for further details.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">bool, Whether to hide <code>nix-build</code> output.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">bool, Whether to fail if <code>nix-build</code> is not available.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the execution platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the target platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">bool, enabled by default, Whether to register (with <code>register_toolchains</code>) the generated toolchain and install it as the default cc_toolchain.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-cc_lang">
<td><code>cc_lang</code></td>
<td>
<p dir="auto">optional.
default is <code>"c++"</code></p>
<p dir="auto">
</p><p dir="auto">string, <code>"c++"</code> by default. Used to populate <code>CXX_FLAG</code> so the compiler is called in C++ mode. Can be set to <code>"none"</code> together with appropriate <code>copts</code> in the <code>cc_library</code> call: see above.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-cc_std">
<td><code>cc_std</code></td>
<td>
<p dir="auto">optional.
default is <code>"c++0x"</code></p>
<p dir="auto">
</p><p dir="auto">string, <code>"c++0x"</code> by default. Used to populate <code>CXX_FLAG</code> so the compiler uses the given language standard. Can be set to <code>"none"</code> together with appropriate <code>copts</code> in the <code>cc_library</code> call: see above.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-cross_cpu">
<td><code>cross_cpu</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">string, <code>""</code> by default. Used if you want to add a cross compilation C/C++ toolchain. Set this to the CPU architecture for the target CPU. For example x86_64, would be k8.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_cc_configure-apple_sdk_path">
<td><code>apple_sdk_path</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">string, <code>""</code> by default. Obtain the default nix <code>apple-sdk</code> for the toolchain form the Nix expression under this attribute path.  Uses default repository if no <code>nix_file</code> or <code>nix_file_content</code> is provided.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_flake_package"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_flake_package</h3><a id="user-content-nixpkgs_flake_package" class="anchor" aria-label="Permalink: nixpkgs_flake_package" href="#nixpkgs_flake_package"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_flake_package(<a href="#nixpkgs_flake_package-name">name</a>, <a href="#nixpkgs_flake_package-nix_flake_file">nix_flake_file</a>, <a href="#nixpkgs_flake_package-nix_flake_lock_file">nix_flake_lock_file</a>, <a href="#nixpkgs_flake_package-nix_flake_file_deps">nix_flake_file_deps</a>, <a href="#nixpkgs_flake_package-package">package</a>,
                      <a href="#nixpkgs_flake_package-build_file">build_file</a>, <a href="#nixpkgs_flake_package-build_file_content">build_file_content</a>, <a href="#nixpkgs_flake_package-nixopts">nixopts</a>, <a href="#nixpkgs_flake_package-quiet">quiet</a>, <a href="#nixpkgs_flake_package-fail_not_supported">fail_not_supported</a>,
                      <a href="#nixpkgs_flake_package-legacy_path_syntax">legacy_path_syntax</a>, <a href="#nixpkgs_flake_package-kwargs">kwargs</a>)
</pre>
<p dir="auto">Make the content of a local Nix Flake package available in the Bazel workspace.</p>
<p dir="auto"><strong>IMPORTANT NOTE</strong>: Calling <code>nix build</code> copies the entirety of the Nix Flake
into the Nix Store.  When using the <code>path:</code> syntax, this means the directory
containing <code>flake.nix</code> and any subdirectories.  Without specifying <code>path:</code>
Nix may infer that the flake is the Git repository and copy the entire thing.
As a consequence, you may want to isolate your flake from the rest of the
repository to minimize the amount of unnecessary data that gets copied into
the Nix Store whenever the flake is rebuilt.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-1" class="anchor" aria-label="Permalink: Parameters" href="#parameters-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_flake_package-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">A unique name for this repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-nix_flake_file">
<td><code>nix_flake_file</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">Label to <code>flake.nix</code> that will be evaluated.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-nix_flake_lock_file">
<td><code>nix_flake_lock_file</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">Label to <code>flake.lock</code> that corresponds to <code>nix_flake_file</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-nix_flake_file_deps">
<td><code>nix_flake_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">Additional dependencies of <code>nix_flake_file</code> if any.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-package">
<td><code>package</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Nix Flake package to make available.  The default package will be used if not specified.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-build_file">
<td><code>build_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">The file to use as the BUILD file for this repository. See <a href="#nixpkgs_package-build_file"><code>nixpkgs_package</code></a> for more information.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-build_file_content">
<td><code>build_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">Like <code>build_file</code>, but a string of the contents instead of a file name. See <a href="#nixpkgs_package-build_file_content"><code>nixpkgs_package</code></a> for more information.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">Extra flags to pass when calling Nix. See <a href="#nixpkgs_package-nixopts"><code>nixpkgs_package</code></a> for more information.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">Whether to hide the output of the Nix command.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">If set to <code>True</code> (default) this rule will fail on platforms which do not support Nix (e.g. Windows). If set to <code>False</code> calling this rule will succeed but no output will be generated.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-legacy_path_syntax">
<td><code>legacy_path_syntax</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">If set to True (not default), the Nix Flake invocation will directly call <code>nix build &lt;path&gt;</code> instead of <code>nix build path:&lt;path&gt;</code> which may involve copying the entirety of the Git repo into the Nix Store instead of just the path and its children.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_flake_package-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
<p dir="auto">
</p><p dir="auto">Common rule arguments.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_git_repository"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_git_repository</h3><a id="user-content-nixpkgs_git_repository" class="anchor" aria-label="Permalink: nixpkgs_git_repository" href="#nixpkgs_git_repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_git_repository(<a href="#nixpkgs_git_repository-name">name</a>, <a href="#nixpkgs_git_repository-revision">revision</a>, <a href="#nixpkgs_git_repository-remote">remote</a>, <a href="#nixpkgs_git_repository-sha256">sha256</a>, <a href="#nixpkgs_git_repository-kwargs">kwargs</a>)
</pre>
<p dir="auto">Name a specific revision of Nixpkgs on GitHub or a local checkout.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-2" class="anchor" aria-label="Permalink: Parameters" href="#parameters-2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_git_repository-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A unique name for this repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_git_repository-revision">
<td><code>revision</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">Git commit hash or tag identifying the version of Nixpkgs to use.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_git_repository-remote">
<td><code>remote</code></td>
<td>
<p dir="auto">optional.
default is <code>"<a href="https://github.com/NixOS/nixpkgs">https://github.com/NixOS/nixpkgs</a>"</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">The URI of the remote Git repository. This must be a HTTP URL. There is
currently no support for authentication. Defaults to <a href="https://github.com/NixOS/nixpkgs">upstream
nixpkgs</a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_git_repository-sha256">
<td><code>sha256</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">The SHA256 used to verify the integrity of the repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_git_repository-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
<p dir="auto">
</p><p dir="auto">Additional arguments to forward to the underlying repository rule.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_http_repository"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_http_repository</h3><a id="user-content-nixpkgs_http_repository" class="anchor" aria-label="Permalink: nixpkgs_http_repository" href="#nixpkgs_http_repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_http_repository(<a href="#nixpkgs_http_repository-name">name</a>, <a href="#nixpkgs_http_repository-url">url</a>, <a href="#nixpkgs_http_repository-urls">urls</a>, <a href="#nixpkgs_http_repository-auth">auth</a>, <a href="#nixpkgs_http_repository-strip_prefix">strip_prefix</a>, <a href="#nixpkgs_http_repository-integrity">integrity</a>, <a href="#nixpkgs_http_repository-sha256">sha256</a>, <a href="#nixpkgs_http_repository-kwargs">kwargs</a>)
</pre>
<p dir="auto">Download a Nixpkgs repository over HTTP.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-3" class="anchor" aria-label="Permalink: Parameters" href="#parameters-3"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_http_repository-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A unique name for this repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-url">
<td><code>url</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A URL to download the repository from.</p>
<p dir="auto">This must be a file, http or https URL. Redirections are followed.</p>
<p dir="auto">More flexibility can be achieved by the urls parameter that allows
to specify alternative URLs to fetch from.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-urls">
<td><code>urls</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">List of String</p>
<p dir="auto">A list of URLs to download the repository from.</p>
<p dir="auto">Each entry must be a file, http or https URL. Redirections are followed.</p>
<p dir="auto">URLs are tried in order until one succeeds, so you should list local mirrors first.
If all downloads fail, the rule will fail.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-auth">
<td><code>auth</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Dict of String</p>
<p dir="auto">An optional dict mapping host names to custom authorization patterns.</p>
<p dir="auto">If a URL's host name is present in this dict the value will be used as a pattern when
generating the authorization header for the http request. This enables the use of custom
authorization schemes used in a lot of common cloud storage providers.</p>
<p dir="auto">The pattern currently supports 2 tokens: <code>&lt;login&gt;</code> and
<code>&lt;password&gt;</code>, which are replaced with their equivalent value
in the netrc file for the same host name. After formatting, the result is set
as the value for the <code>Authorization</code> field of the HTTP request.</p>
<p dir="auto">Example attribute and netrc for a http download to an oauth2 enabled API using a bearer token:</p>
<pre>auth_patterns = {
    "storage.cloudprovider.com": "Bearer &lt;password&gt;"
}
</pre>
<p dir="auto">netrc:</p>
<pre>machine storage.cloudprovider.com
        password RANDOM-TOKEN
</pre>
<p dir="auto">The final HTTP request would have the following header:</p>
<pre>Authorization: Bearer RANDOM-TOKEN
</pre>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-strip_prefix">
<td><code>strip_prefix</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A directory prefix to strip from the extracted files.</p>
<p dir="auto">Many archives contain a top-level directory that contains all of the useful
files in archive. This field can be used to strip it from all of the
extracted files.</p>
<p dir="auto">For example, suppose you are using <code>nixpkgs-22.11.zip</code>, which contains
the directory <code>nixpkgs-22.11/</code> under which there is the <code>default.nix</code>
file and the <code>pkgs/</code> directory. Specify <code>strip_prefix = "nixpkgs-22.11"</code> to use the <code>nixpkgs-22.11</code> directory as your top-level
directory.</p>
<p dir="auto">Note that if there are files outside of this directory, they will be
discarded and inaccessible (e.g., a top-level license file). This includes
files/directories that start with the prefix but are not in the directory
(e.g., <code>nixpkgs-22.11.release-notes</code>). If the specified prefix does not
match a directory in the archive, Bazel will return an error.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-integrity">
<td><code>integrity</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">Expected checksum in Subresource Integrity format of the file downloaded.</p>
<p dir="auto">This must match the checksum of the file downloaded. <em>It is a security risk
to omit the checksum as remote files can change.</em> At best omitting this
field will make your build non-hermetic. It is optional to make development
easier but either this attribute or <code>sha256</code> should be set before shipping.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-sha256">
<td><code>sha256</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String
The expected SHA-256 of the file downloaded.</p>
<p dir="auto">This must match the SHA-256 of the file downloaded. <em>It is a security risk
to omit the SHA-256 as remote files can change.</em> At best omitting this
field will make your build non-hermetic. It is optional to make development
easier but should be set before shipping.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_http_repository-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
<p dir="auto">
</p><p dir="auto">Additional arguments to forward to the underlying repository rule.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_java_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_java_configure</h3><a id="user-content-nixpkgs_java_configure" class="anchor" aria-label="Permalink: nixpkgs_java_configure" href="#nixpkgs_java_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_java_configure(<a href="#nixpkgs_java_configure-name">name</a>, <a href="#nixpkgs_java_configure-attribute_path">attribute_path</a>, <a href="#nixpkgs_java_configure-java_home_path">java_home_path</a>, <a href="#nixpkgs_java_configure-repository">repository</a>, <a href="#nixpkgs_java_configure-repositories">repositories</a>, <a href="#nixpkgs_java_configure-nix_file">nix_file</a>,
                       <a href="#nixpkgs_java_configure-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_java_configure-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_java_configure-nixopts">nixopts</a>, <a href="#nixpkgs_java_configure-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_java_configure-quiet">quiet</a>, <a href="#nixpkgs_java_configure-toolchain">toolchain</a>,
                       <a href="#nixpkgs_java_configure-register">register</a>, <a href="#nixpkgs_java_configure-toolchain_name">toolchain_name</a>, <a href="#nixpkgs_java_configure-toolchain_version">toolchain_version</a>, <a href="#nixpkgs_java_configure-exec_constraints">exec_constraints</a>,
                       <a href="#nixpkgs_java_configure-target_constraints">target_constraints</a>)
</pre>
<p dir="auto">Define a Java runtime provided by nixpkgs.</p>
<p dir="auto">Creates a <code>nixpkgs_package</code> for a <code>java_runtime</code> instance. Optionally,
you can also create &amp; register a Java toolchain. This only works with Bazel &gt;= 5.0
Bazel can use this instance to run JVM binaries and tests, refer to the
<a href="https://docs.bazel.build/versions/4.0.0/bazel-and-java.html#configuring-the-jdk" rel="nofollow">Bazel documentation</a> for details.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Example</h4><a id="user-content-example-1" class="anchor" aria-label="Permalink: Example" href="#example-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">Bazel 4</h5><a id="user-content-bazel-4" class="anchor" aria-label="Permalink: Bazel 4" href="#bazel-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>WORKSPACE</code> file to import a JDK from nixpkgs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl&quot;, &quot;nixpkgs_java_configure&quot;)
nixpkgs_java_configure(
    attribute_path = &quot;jdk11.home&quot;,
    repository = &quot;@nixpkgs&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl"</span>, <span class="pl-s">"nixpkgs_java_configure"</span>)
<span class="pl-en">nixpkgs_java_configure</span>(
    <span class="pl-s1">attribute_path</span> <span class="pl-c1">=</span> <span class="pl-s">"jdk11.home"</span>,
    <span class="pl-s1">repository</span> <span class="pl-c1">=</span> <span class="pl-s">"@nixpkgs"</span>,
)</pre></div>
<p dir="auto">Add the following configuration to <code>.bazelrc</code> to enable this Java runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --javabase=@nixpkgs_java_runtime//:runtime
build --host_javabase=@nixpkgs_java_runtime//:runtime
# Adjust this to match the Java version provided by this runtime.
# See `bazel query 'kind(java_toolchain, @bazel_tools//tools/jdk:all)'` for available options.
build --java_toolchain=@bazel_tools//tools/jdk:toolchain_java11
build --host_java_toolchain=@bazel_tools//tools/jdk:toolchain_java11"><pre class="notranslate"><code>build --javabase=@nixpkgs_java_runtime//:runtime
build --host_javabase=@nixpkgs_java_runtime//:runtime
# Adjust this to match the Java version provided by this runtime.
# See `bazel query 'kind(java_toolchain, @bazel_tools//tools/jdk:all)'` for available options.
build --java_toolchain=@bazel_tools//tools/jdk:toolchain_java11
build --host_java_toolchain=@bazel_tools//tools/jdk:toolchain_java11
</code></pre></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">Bazel 5</h5><a id="user-content-bazel-5" class="anchor" aria-label="Permalink: Bazel 5" href="#bazel-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>WORKSPACE</code> file to import a JDK from nixpkgs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl&quot;, &quot;nixpkgs_java_configure&quot;)
nixpkgs_java_configure(
    attribute_path = &quot;jdk11.home&quot;,
    repository = &quot;@nixpkgs&quot;,
    toolchain = True,
    toolchain_name = &quot;nixpkgs_java&quot;,
    toolchain_version = &quot;11&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl"</span>, <span class="pl-s">"nixpkgs_java_configure"</span>)
<span class="pl-en">nixpkgs_java_configure</span>(
    <span class="pl-s1">attribute_path</span> <span class="pl-c1">=</span> <span class="pl-s">"jdk11.home"</span>,
    <span class="pl-s1">repository</span> <span class="pl-c1">=</span> <span class="pl-s">"@nixpkgs"</span>,
    <span class="pl-s1">toolchain</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">toolchain_name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java"</span>,
    <span class="pl-s1">toolchain_version</span> <span class="pl-c1">=</span> <span class="pl-s">"11"</span>,
)</pre></div>
<p dir="auto">Add the following configuration to <code>.bazelrc</code> to enable this Java runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --host_platform=@io_tweag_rules_nixpkgs//nixpkgs/platforms:host
build --java_runtime_version=nixpkgs_java
build --tool_java_runtime_version=nixpkgs_java"><pre class="notranslate"><code>build --host_platform=@io_tweag_rules_nixpkgs//nixpkgs/platforms:host
build --java_runtime_version=nixpkgs_java
build --tool_java_runtime_version=nixpkgs_java
</code></pre></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">Bazel 6</h5><a id="user-content-bazel-6" class="anchor" aria-label="Permalink: Bazel 6" href="#bazel-6"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">with with <a href="https://bazel.build/versions/6.5.0/external/overview#bzlmod" rel="nofollow">Bzlmod</a></h4><a id="user-content-with-with-bzlmod" class="anchor" aria-label="Permalink: with with Bzlmod" href="#with-with-bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>MODULE.bazel</code> file to depend on <code>rules_nixpkgs</code>, <code>rules_nixpkgs_java</code>, and nixpgks:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_nixpkgs_core&quot;, version = &quot;0.13.0&quot;)
bazel_dep(name = &quot;rules_nixpkgs_java&quot;, version = &quot;0.13.0&quot;)
bazel_dep(name = &quot;rules_java&quot;, version = &quot;7.3.1&quot;)
bazel_dep(name = &quot;platforms&quot;, version = &quot;0.0.9&quot;)

nix_repo = use_extension(&quot;@rules_nixpkgs_core//extensions:repository.bzl&quot;, &quot;nix_repo&quot;)
nix_repo.github(
    name = &quot;nixpkgs&quot;,
    org = &quot;NixOS&quot;,
    repo = &quot;nixpkgs&quot;,
    commit = &quot;ff0dbd94265ac470dda06a657d5fe49de93b4599&quot;,
    sha256 = &quot;1bf0f88ee9181dd993a38d73cb120d0435e8411ea9e95b58475d4426c0948e98&quot;,
)
use_repo(nix_repo, &quot;nixpkgs&quot;)

non_module_dependencies = use_extension(&quot;//:non_module_dependencies.bzl&quot;, &quot;non_module_dependencies&quot;)
use_repo(non_module_dependencies, &quot;nixpkgs_java_runtime_toolchain&quot;)

register_toolchains(&quot;@nixpkgs_java_runtime_toolchain//:all&quot;)

archive_override(
    module_name = &quot;rules_nixpkgs_java&quot;,
    urls = &quot;https://github.com/tweag/rules_nixpkgs/releases/download/v0.13.0/rules_nixpkgs-0.13.0.tar.gz&quot;,
    integrity = &quot;&quot;,
    strip_prefix = &quot;rules_nixpkgs-0.13.0/toolchains/java&quot;,
)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_core"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.13.0"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_java"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.13.0"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_java"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"7.3.1"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"platforms"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.0.9"</span>)

<span class="pl-s1">nix_repo</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_nixpkgs_core//extensions:repository.bzl"</span>, <span class="pl-s">"nix_repo"</span>)
<span class="pl-s1">nix_repo</span>.<span class="pl-c1">github</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs"</span>,
    <span class="pl-s1">org</span> <span class="pl-c1">=</span> <span class="pl-s">"NixOS"</span>,
    <span class="pl-s1">repo</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs"</span>,
    <span class="pl-s1">commit</span> <span class="pl-c1">=</span> <span class="pl-s">"ff0dbd94265ac470dda06a657d5fe49de93b4599"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"1bf0f88ee9181dd993a38d73cb120d0435e8411ea9e95b58475d4426c0948e98"</span>,
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">nix_repo</span>, <span class="pl-s">"nixpkgs"</span>)

<span class="pl-s1">non_module_dependencies</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"//:non_module_dependencies.bzl"</span>, <span class="pl-s">"non_module_dependencies"</span>)
<span class="pl-en">use_repo</span>(<span class="pl-s1">non_module_dependencies</span>, <span class="pl-s">"nixpkgs_java_runtime_toolchain"</span>)

<span class="pl-en">register_toolchains</span>(<span class="pl-s">"@nixpkgs_java_runtime_toolchain//:all"</span>)

<span class="pl-en">archive_override</span>(
    <span class="pl-s1">module_name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_java"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/tweag/rules_nixpkgs/releases/download/v0.13.0/rules_nixpkgs-0.13.0.tar.gz"</span>,
    <span class="pl-s1">integrity</span> <span class="pl-c1">=</span> <span class="pl-s">""</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs-0.13.0/toolchains/java"</span>,
)</pre></div>
<p dir="auto">Add the following to a <code>.bzl</code> file, like <code>non_module_dependencies.bzl</code>, to import a JDK from nixpkgs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_nixpkgs_java//:java.bzl&quot;, &quot;nixpkgs_java_configure&quot;)

def _non_module_dependencies_impl(_ctx):
    nixpkgs_java_configure(
        name = &quot;nixpkgs_java_runtime&quot;,
        attribute_path = &quot;openjdk19.home&quot;,
        repository = &quot;@nixpkgs&quot;,
        toolchain = True,
        toolchain_name = &quot;nixpkgs_java&quot;,
        toolchain_version = &quot;19&quot;,
        register = False,
    )

non_module_dependencies = module_extension(
    implementation = _non_module_dependencies_impl,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_nixpkgs_java//:java.bzl"</span>, <span class="pl-s">"nixpkgs_java_configure"</span>)

<span class="pl-k">def</span> <span class="pl-en">_non_module_dependencies_impl</span>(<span class="pl-s1">_ctx</span>):
    <span class="pl-en">nixpkgs_java_configure</span>(
        <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java_runtime"</span>,
        <span class="pl-s1">attribute_path</span> <span class="pl-c1">=</span> <span class="pl-s">"openjdk19.home"</span>,
        <span class="pl-s1">repository</span> <span class="pl-c1">=</span> <span class="pl-s">"@nixpkgs"</span>,
        <span class="pl-s1">toolchain</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
        <span class="pl-s1">toolchain_name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java"</span>,
        <span class="pl-s1">toolchain_version</span> <span class="pl-c1">=</span> <span class="pl-s">"19"</span>,
        <span class="pl-s1">register</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span>,
    )

<span class="pl-s1">non_module_dependencies</span> <span class="pl-c1">=</span> <span class="pl-en">module_extension</span>(
    <span class="pl-s1">implementation</span> <span class="pl-c1">=</span> <span class="pl-s1">_non_module_dependencies_impl</span>,
)</pre></div>
<p dir="auto">Add the following configuration to <code>.bazelrc</code> to enable this Java runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="common --enable_bzlmod
build --host_platform=@rules_nixpkgs_core//platforms:host
build --java_runtime_version=nixpkgs_java_19
build --tool_java_runtime_version=nixpkgs_java_19
build --java_language_version=19
build --tool_java_language_version=19"><pre class="notranslate"><code>common --enable_bzlmod
build --host_platform=@rules_nixpkgs_core//platforms:host
build --java_runtime_version=nixpkgs_java_19
build --tool_java_runtime_version=nixpkgs_java_19
build --java_language_version=19
build --tool_java_language_version=19
</code></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">with <code>WORKSPACE</code></h4><a id="user-content-with-workspace" class="anchor" aria-label="Permalink: with WORKSPACE" href="#with-workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>WORKSPACE</code> file to import a JDK from nixpkgs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl&quot;, &quot;nixpkgs_java_configure&quot;)
nixpkgs_java_configure(
    attribute_path = &quot;jdk11.home&quot;,
    repository = &quot;@nixpkgs&quot;,
    toolchain = True,
    toolchain_name = &quot;nixpkgs_java&quot;,
    toolchain_version = &quot;11&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@io_tweag_rules_nixpkgs//nixpkgs:nixpkgs.bzl"</span>, <span class="pl-s">"nixpkgs_java_configure"</span>)
<span class="pl-en">nixpkgs_java_configure</span>(
    <span class="pl-s1">attribute_path</span> <span class="pl-c1">=</span> <span class="pl-s">"jdk11.home"</span>,
    <span class="pl-s1">repository</span> <span class="pl-c1">=</span> <span class="pl-s">"@nixpkgs"</span>,
    <span class="pl-s1">toolchain</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">toolchain_name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java"</span>,
    <span class="pl-s1">toolchain_version</span> <span class="pl-c1">=</span> <span class="pl-s">"11"</span>,
)</pre></div>
<p dir="auto">Add the following configuration to <code>.bazelrc</code> to enable this Java runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --host_platform=@io_tweag_rules_nixpkgs//nixpkgs/platforms:host
build --java_runtime_version=nixpkgs_java_11
build --tool_java_runtime_version=nixpkgs_java_11
build --java_language_version=11
build --tool_java_language_version=11"><pre class="notranslate"><code>build --host_platform=@io_tweag_rules_nixpkgs//nixpkgs/platforms:host
build --java_runtime_version=nixpkgs_java_11
build --tool_java_runtime_version=nixpkgs_java_11
build --java_language_version=11
build --tool_java_language_version=11
</code></pre></div>
<div class="markdown-heading" dir="auto"><h5 class="heading-element" dir="auto">Bazel 7 with <a href="https://bazel.build/versions/7.0.0/external/overview#bzlmod" rel="nofollow">Bzlmod</a></h5><a id="user-content-bazel-7-with-bzlmod" class="anchor" aria-label="Permalink: Bazel 7 with Bzlmod" href="#bazel-7-with-bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <code>MODULE.bazel</code> file to depend on <code>rules_nixpkgs</code>, <code>rules_nixpkgs_java</code>, and nixpgks:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_nixpkgs_core&quot;, version = &quot;0.13.0&quot;)
bazel_dep(name = &quot;rules_nixpkgs_java&quot;, version = &quot;0.13.0&quot;)
bazel_dep(name = &quot;rules_java&quot;, version = &quot;7.5.0&quot;)
bazel_dep(name = &quot;platforms&quot;, version = &quot;0.0.9&quot;)

nix_repo = use_extension(&quot;@rules_nixpkgs_core//extensions:repository.bzl&quot;, &quot;nix_repo&quot;)
nix_repo.github(
    name = &quot;nixpkgs&quot;,
    org = &quot;NixOS&quot;,
    repo = &quot;nixpkgs&quot;,
    commit = &quot;ff0dbd94265ac470dda06a657d5fe49de93b4599&quot;,
    sha256 = &quot;1bf0f88ee9181dd993a38d73cb120d0435e8411ea9e95b58475d4426c0948e98&quot;,
)
use_repo(nix_repo, &quot;nixpkgs&quot;)

non_module_dependencies = use_extension(&quot;//:non_module_dependencies.bzl&quot;, &quot;non_module_dependencies&quot;)
use_repo(non_module_dependencies, &quot;nixpkgs_java_runtime_toolchain&quot;)

register_toolchains(&quot;@nixpkgs_java_runtime_toolchain//:all&quot;)

archive_override(
    module_name = &quot;rules_nixpkgs_java&quot;,
    urls = &quot;https://github.com/tweag/rules_nixpkgs/releases/download/v0.13.0/rules_nixpkgs-0.13.0.tar.gz&quot;,
    integrity = &quot;&quot;,
    strip_prefix = &quot;rules_nixpkgs-0.13.0/toolchains/java&quot;,
)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_core"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.13.0"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_java"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.13.0"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_java"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"7.5.0"</span>)
<span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"platforms"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"0.0.9"</span>)

<span class="pl-s1">nix_repo</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_nixpkgs_core//extensions:repository.bzl"</span>, <span class="pl-s">"nix_repo"</span>)
<span class="pl-s1">nix_repo</span>.<span class="pl-c1">github</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs"</span>,
    <span class="pl-s1">org</span> <span class="pl-c1">=</span> <span class="pl-s">"NixOS"</span>,
    <span class="pl-s1">repo</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs"</span>,
    <span class="pl-s1">commit</span> <span class="pl-c1">=</span> <span class="pl-s">"ff0dbd94265ac470dda06a657d5fe49de93b4599"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"1bf0f88ee9181dd993a38d73cb120d0435e8411ea9e95b58475d4426c0948e98"</span>,
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">nix_repo</span>, <span class="pl-s">"nixpkgs"</span>)

<span class="pl-s1">non_module_dependencies</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"//:non_module_dependencies.bzl"</span>, <span class="pl-s">"non_module_dependencies"</span>)
<span class="pl-en">use_repo</span>(<span class="pl-s1">non_module_dependencies</span>, <span class="pl-s">"nixpkgs_java_runtime_toolchain"</span>)

<span class="pl-en">register_toolchains</span>(<span class="pl-s">"@nixpkgs_java_runtime_toolchain//:all"</span>)

<span class="pl-en">archive_override</span>(
    <span class="pl-s1">module_name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs_java"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/tweag/rules_nixpkgs/releases/download/v0.13.0/rules_nixpkgs-0.13.0.tar.gz"</span>,
    <span class="pl-s1">integrity</span> <span class="pl-c1">=</span> <span class="pl-s">""</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_nixpkgs-0.13.0/toolchains/java"</span>,
)</pre></div>
<p dir="auto">Add the following to a <code>.bzl</code> file, like <code>non_module_dependencies.bzl</code>, to import a JDK from nixpkgs:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_nixpkgs_java//:java.bzl&quot;, &quot;nixpkgs_java_configure&quot;)

def _non_module_dependencies_impl(_ctx):
    nixpkgs_java_configure(
        name = &quot;nixpkgs_java_runtime&quot;,
        attribute_path = &quot;openjdk19.home&quot;,
        repository = &quot;@nixpkgs&quot;,
        toolchain = True,
        toolchain_name = &quot;nixpkgs_java&quot;,
        toolchain_version = &quot;19&quot;,
        register = False,
    )

non_module_dependencies = module_extension(
    implementation = _non_module_dependencies_impl,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_nixpkgs_java//:java.bzl"</span>, <span class="pl-s">"nixpkgs_java_configure"</span>)

<span class="pl-k">def</span> <span class="pl-en">_non_module_dependencies_impl</span>(<span class="pl-s1">_ctx</span>):
    <span class="pl-en">nixpkgs_java_configure</span>(
        <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java_runtime"</span>,
        <span class="pl-s1">attribute_path</span> <span class="pl-c1">=</span> <span class="pl-s">"openjdk19.home"</span>,
        <span class="pl-s1">repository</span> <span class="pl-c1">=</span> <span class="pl-s">"@nixpkgs"</span>,
        <span class="pl-s1">toolchain</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
        <span class="pl-s1">toolchain_name</span> <span class="pl-c1">=</span> <span class="pl-s">"nixpkgs_java"</span>,
        <span class="pl-s1">toolchain_version</span> <span class="pl-c1">=</span> <span class="pl-s">"19"</span>,
        <span class="pl-s1">register</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span>,
    )

<span class="pl-s1">non_module_dependencies</span> <span class="pl-c1">=</span> <span class="pl-en">module_extension</span>(
    <span class="pl-s1">implementation</span> <span class="pl-c1">=</span> <span class="pl-s1">_non_module_dependencies_impl</span>,
)</pre></div>
<p dir="auto">Add the following configuration to <code>.bazelrc</code> to enable this Java runtime:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="build --host_platform=@rules_nixpkgs_core//platforms:host
build --java_runtime_version=nixpkgs_java_19
build --tool_java_runtime_version=nixpkgs_java_19
build --java_language_version=19
build --tool_java_language_version=19
build --extra_toolchains=@nixpkgs_java_runtime_toolchain//:all # necessary on NixOS only"><pre class="notranslate"><code>build --host_platform=@rules_nixpkgs_core//platforms:host
build --java_runtime_version=nixpkgs_java_19
build --tool_java_runtime_version=nixpkgs_java_19
build --java_language_version=19
build --tool_java_language_version=19
build --extra_toolchains=@nixpkgs_java_runtime_toolchain//:all # necessary on NixOS only
</code></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-4" class="anchor" aria-label="Permalink: Parameters" href="#parameters-4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_java_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_java_runtime"</code></p>
<p dir="auto">
</p><p dir="auto">The name-prefix for the created external repositories.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-attribute_path">
<td><code>attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">string, The nixpkgs attribute path for <code>jdk.home</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-java_home_path">
<td><code>java_home_path</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">optional, string, The path to <code>JAVA_HOME</code> within the package.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repository"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repositories"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">optional, Label, Obtain the runtime from the Nix expression defined in this file. Specify only one of <code>nix_file</code> or <code>nix_file_content</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">optional, string, Obtain the runtime from the given Nix expression. Specify only one of <code>nix_file</code> or <code>nix_file_content</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nix_file_deps"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nixopts"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-fail_not_supported"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-quiet"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-toolchain">
<td><code>toolchain</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">Create a Bazel toolchain based on the Java runtime.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Register the created toolchain. Requires <code>toolchain</code> to be <code>True</code>. Defaults to the value of <code>toolchain</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-toolchain_name">
<td><code>toolchain_name</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">The name of the toolchain that can be used in --java_runtime_version.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-toolchain_version">
<td><code>toolchain_version</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">The version of the toolchain that can be used in --java_runtime_version.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the execution platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_java_configure-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the target platform.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_local_repository"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_local_repository</h3><a id="user-content-nixpkgs_local_repository" class="anchor" aria-label="Permalink: nixpkgs_local_repository" href="#nixpkgs_local_repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_local_repository(<a href="#nixpkgs_local_repository-name">name</a>, <a href="#nixpkgs_local_repository-nix_file">nix_file</a>, <a href="#nixpkgs_local_repository-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_local_repository-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_local_repository-nix_flake_lock_file">nix_flake_lock_file</a>,
                         <a href="#nixpkgs_local_repository-kwargs">kwargs</a>)
</pre>
<p dir="auto">Create an external repository representing the content of Nixpkgs.</p>
<p dir="auto">Based on a Nix expression stored locally or provided inline. One of
<code>nix_file</code> or <code>nix_file_content</code> must be provided.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-5" class="anchor" aria-label="Permalink: Parameters" href="#parameters-5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_local_repository-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A unique name for this repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_local_repository-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Label</p>
<p dir="auto">A file containing an expression for a Nix derivation.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_local_repository-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">List of labels</p>
<p dir="auto">Dependencies of <code>nix_file</code> if any.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_local_repository-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">An expression for a Nix derivation.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_local_repository-nix_flake_lock_file">
<td><code>nix_flake_lock_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">String</p>
<p dir="auto">A flake lock file that can be used on the provided nixpkgs repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_local_repository-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
<p dir="auto">
</p><p dir="auto">Additional arguments to forward to the underlying repository rule.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_nodejs_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_nodejs_configure</h3><a id="user-content-nixpkgs_nodejs_configure" class="anchor" aria-label="Permalink: nixpkgs_nodejs_configure" href="#nixpkgs_nodejs_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_nodejs_configure(<a href="#nixpkgs_nodejs_configure-name">name</a>, <a href="#nixpkgs_nodejs_configure-attribute_path">attribute_path</a>, <a href="#nixpkgs_nodejs_configure-repository">repository</a>, <a href="#nixpkgs_nodejs_configure-repositories">repositories</a>, <a href="#nixpkgs_nodejs_configure-nix_platform">nix_platform</a>, <a href="#nixpkgs_nodejs_configure-nix_file">nix_file</a>,
                         <a href="#nixpkgs_nodejs_configure-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_nodejs_configure-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_nodejs_configure-nixopts">nixopts</a>, <a href="#nixpkgs_nodejs_configure-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_nodejs_configure-quiet">quiet</a>,
                         <a href="#nixpkgs_nodejs_configure-exec_constraints">exec_constraints</a>, <a href="#nixpkgs_nodejs_configure-target_constraints">target_constraints</a>, <a href="#nixpkgs_nodejs_configure-register">register</a>)
</pre>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-6" class="anchor" aria-label="Permalink: Parameters" href="#parameters-6"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_nodejs_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_nodejs"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-attribute_path">
<td><code>attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>"nodejs"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-nix_platform">
<td><code>nix_platform</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_nodejs_configure_platforms"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_nodejs_configure_platforms</h3><a id="user-content-nixpkgs_nodejs_configure_platforms" class="anchor" aria-label="Permalink: nixpkgs_nodejs_configure_platforms" href="#nixpkgs_nodejs_configure_platforms"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_nodejs_configure_platforms(<a href="#nixpkgs_nodejs_configure_platforms-name">name</a>, <a href="#nixpkgs_nodejs_configure_platforms-platforms_mapping">platforms_mapping</a>, <a href="#nixpkgs_nodejs_configure_platforms-attribute_path">attribute_path</a>, <a href="#nixpkgs_nodejs_configure_platforms-repository">repository</a>,
                                   <a href="#nixpkgs_nodejs_configure_platforms-repositories">repositories</a>, <a href="#nixpkgs_nodejs_configure_platforms-nix_platform">nix_platform</a>, <a href="#nixpkgs_nodejs_configure_platforms-nix_file">nix_file</a>, <a href="#nixpkgs_nodejs_configure_platforms-nix_file_content">nix_file_content</a>,
                                   <a href="#nixpkgs_nodejs_configure_platforms-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_nodejs_configure_platforms-nixopts">nixopts</a>, <a href="#nixpkgs_nodejs_configure_platforms-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_nodejs_configure_platforms-quiet">quiet</a>,
                                   <a href="#nixpkgs_nodejs_configure_platforms-exec_constraints">exec_constraints</a>, <a href="#nixpkgs_nodejs_configure_platforms-target_constraints">target_constraints</a>, <a href="#nixpkgs_nodejs_configure_platforms-register">register</a>, <a href="#nixpkgs_nodejs_configure_platforms-kwargs">kwargs</a>)
</pre>
<p dir="auto">Runs nixpkgs_nodejs_configure for each platform.</p>
<p dir="auto">Since rules_nodejs adds platform suffix to repository name, this can be helpful
if one wants to use npm_install and reference js dependencies from npm repo.
See the example directory.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-7" class="anchor" aria-label="Permalink: Parameters" href="#parameters-7"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_nodejs"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-platforms_mapping">
<td><code>platforms_mapping</code></td>
<td>
<p dir="auto">optional.
default is <code>{"aarch64-darwin": struct(exec_constraints = ["@platforms//os:macos", "@platforms//cpu:arm64"], rules_nodejs_platform = "darwin_arm64", target_constraints = ["@platforms//os:macos", "@platforms//cpu:arm64"]), "x86_64-linux": struct(exec_constraints = ["@platforms//os:linux", "@platforms//cpu:x86_64"], rules_nodejs_platform = "linux_amd64", target_constraints = ["@platforms//os:linux", "@platforms//cpu:x86_64"]), "x86_64-darwin": struct(exec_constraints = ["@platforms//os:macos", "@platforms//cpu:x86_64"], rules_nodejs_platform = "darwin_amd64", target_constraints = ["@platforms//os:macos", "@platforms//cpu:x86_64"]), "aarch64-linux": struct(exec_constraints = ["@platforms//os:linux", "@platforms//cpu:arm64"], rules_nodejs_platform = "linux_arm64", target_constraints = ["@platforms//os:linux", "@platforms//cpu:arm64"])}</code></p>
<p dir="auto">
</p><p dir="auto">struct describing mapping between nix platform and rules_nodejs bazel platform with
target and exec constraints</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-attribute_path">
<td><code>attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>"nodejs"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-nix_platform">
<td><code>nix_platform</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_nodejs_configure_platforms-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_package"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_package</h3><a id="user-content-nixpkgs_package" class="anchor" aria-label="Permalink: nixpkgs_package" href="#nixpkgs_package"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_package(<a href="#nixpkgs_package-name">name</a>, <a href="#nixpkgs_package-attribute_path">attribute_path</a>, <a href="#nixpkgs_package-nix_file">nix_file</a>, <a href="#nixpkgs_package-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_package-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_package-repository">repository</a>,
                <a href="#nixpkgs_package-repositories">repositories</a>, <a href="#nixpkgs_package-build_file">build_file</a>, <a href="#nixpkgs_package-build_file_content">build_file_content</a>, <a href="#nixpkgs_package-nixopts">nixopts</a>, <a href="#nixpkgs_package-quiet">quiet</a>, <a href="#nixpkgs_package-fail_not_supported">fail_not_supported</a>,
                <a href="#nixpkgs_package-kwargs">kwargs</a>)
</pre>
<p dir="auto">Make the content of a Nixpkgs package available in the Bazel workspace.</p>
<p dir="auto">If <code>repositories</code> is not specified, you must provide a nixpkgs clone in <code>nix_file</code> or <code>nix_file_content</code>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-8" class="anchor" aria-label="Permalink: Parameters" href="#parameters-8"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_package-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">A unique name for this repository.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-attribute_path">
<td><code>attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">Select an attribute from the top-level Nix expression being evaluated. The attribute path is a sequence of attribute names separated by dots.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">A file containing an expression for a Nix derivation.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">Dependencies of <code>nix_file</code> if any.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">An expression for a Nix derivation.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">A repository label identifying which Nixpkgs to use. Equivalent to <code>repositories = { "nixpkgs": ...}</code></p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
<p dir="auto">
</p><p dir="auto">A dictionary mapping <code>NIX_PATH</code> entries to repository labels.</p>
<p dir="auto">Setting it to</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="repositories = { &quot;myrepo&quot; : &quot;//:myrepo&quot; }"><pre class="notranslate"><code>repositories = { "myrepo" : "//:myrepo" }
</code></pre></div>
<p dir="auto">for example would replace all instances of <code>&lt;myrepo&gt;</code> in the called nix code by the path to the target <code>"//:myrepo"</code>. See the <a href="https://nixos.org/nix/manual/#env-NIX_PATH" rel="nofollow">relevant section in the nix manual</a> for more information.</p>
<p dir="auto">Specify one of <code>repository</code> or <code>repositories</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-build_file">
<td><code>build_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">The file to use as the BUILD file for this repository.</p>
<p dir="auto">Its contents are copied into the file <code>BUILD</code> in root of the nix output folder. The Label does not need to be named <code>BUILD</code>, but can be.</p>
<p dir="auto">For common use cases we provide filegroups that expose certain files as targets:</p>
<dl>
  <dt><code>:bin</code></dt>
  <dd>Everything in the <code>bin/</code> directory.</dd>
  <dt><code>:lib</code></dt>
  <dd>All <code>.so</code>, <code>.dylib</code> and <code>.a</code> files that can be found in subdirectories of <code>lib/</code>.</dd>
  <dt><code>:include</code></dt>
  <dd>All <code>.h</code>, <code>.hh</code>, <code>.hpp</code> and <code>.hxx</code> files that can be found in subdirectories of <code>include/</code>.</dd>
</dl>
<p dir="auto">If you need different files from the nix package, you can reference them like this:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="package(default_visibility = [ &quot;//visibility:public&quot; ])
filegroup(
    name = &quot;our-docs&quot;,
    srcs = glob([&quot;share/doc/ourpackage/**/*&quot;]),
)"><pre class="notranslate"><code>package(default_visibility = [ "//visibility:public" ])
filegroup(
    name = "our-docs",
    srcs = glob(["share/doc/ourpackage/**/*"]),
)
</code></pre></div>
<p dir="auto">See the bazel documentation of <a href="https://docs.bazel.build/versions/master/be/general.html#filegroup" rel="nofollow"><code>filegroup</code></a> and <a href="https://docs.bazel.build/versions/master/be/functions.html#glob" rel="nofollow"><code>glob</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-build_file_content">
<td><code>build_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>""</code></p>
<p dir="auto">
</p><p dir="auto">Like <code>build_file</code>, but a string of the contents instead of a file name.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">Extra flags to pass when calling Nix.</p>
<p dir="auto">Subject to location expansion, any instance of <code>$(location LABEL)</code> will be replaced by the path to the file referenced by <code>LABEL</code> relative to the workspace root.</p>
<p dir="auto">Note, labels to external workspaces will resolve to paths that contain <code>~</code> characters if the Bazel flag <code>--enable_bzlmod</code> is true. Nix does not support <code>~</code> characters in path literals at the time of writing, see <a href="https://github.com/NixOS/nix/issues/7742" data-hovercard-type="issue" data-hovercard-url="/NixOS/nix/issues/7742/hovercard">#7742</a>. Meaning, the result of location expansion may not form a valid Nix path literal. Use <code>./$${"$(location @for//:example)"}</code> to work around this limitation if you need to pass a path argument via <code>--arg</code>, or pass the resulting path as a string value using <code>--argstr</code> and combine it with an additional <code>--arg workspace_root ./.</code> argument using <code>workspace_root + ("/" + path_str)</code>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">Whether to hide the output of the Nix command.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">If set to <code>True</code> (default) this rule will fail on platforms which do not support Nix (e.g. Windows). If set to <code>False</code> calling this rule will succeed but no output will be generated.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_package-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_python_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_python_configure</h3><a id="user-content-nixpkgs_python_configure" class="anchor" aria-label="Permalink: nixpkgs_python_configure" href="#nixpkgs_python_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_python_configure(<a href="#nixpkgs_python_configure-name">name</a>, <a href="#nixpkgs_python_configure-python3_attribute_path">python3_attribute_path</a>, <a href="#nixpkgs_python_configure-python3_bin_path">python3_bin_path</a>, <a href="#nixpkgs_python_configure-repository">repository</a>, <a href="#nixpkgs_python_configure-repositories">repositories</a>,
                         <a href="#nixpkgs_python_configure-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_python_configure-nixopts">nixopts</a>, <a href="#nixpkgs_python_configure-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_python_configure-quiet">quiet</a>, <a href="#nixpkgs_python_configure-exec_constraints">exec_constraints</a>,
                         <a href="#nixpkgs_python_configure-target_constraints">target_constraints</a>, <a href="#nixpkgs_python_configure-register">register</a>)
</pre>
<p dir="auto">Define and register a Python toolchain provided by nixpkgs.</p>
<p dir="auto">Creates <code>nixpkgs_package</code>s for Python 2 or 3 <code>py_runtime</code> instances and a
corresponding <code>py_runtime_pair</code> and <code>toolchain</code>. The toolchain is
automatically registered and uses the constraint:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="&quot;@io_tweag_rules_nixpkgs//nixpkgs/constraints:support_nix&quot;"><pre class="notranslate"><code>"@io_tweag_rules_nixpkgs//nixpkgs/constraints:support_nix"
</code></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-9" class="anchor" aria-label="Permalink: Parameters" href="#parameters-9"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_python_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_python_toolchain"</code></p>
<p dir="auto">
</p><p dir="auto">The name-prefix for the created external repositories.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-python3_attribute_path">
<td><code>python3_attribute_path</code></td>
<td>
<p dir="auto">optional.
default is <code>"python3"</code></p>
<p dir="auto">
</p><p dir="auto">The nixpkgs attribute path for python3.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-python3_bin_path">
<td><code>python3_bin_path</code></td>
<td>
<p dir="auto">optional.
default is <code>"bin/python"</code></p>
<p dir="auto">
</p><p dir="auto">The path to the interpreter within the package.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repository"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repositories"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nix_file_deps"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nixopts"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-fail_not_supported"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-quiet"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the execution platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the target platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_python_repository"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_python_repository</h3><a id="user-content-nixpkgs_python_repository" class="anchor" aria-label="Permalink: nixpkgs_python_repository" href="#nixpkgs_python_repository"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_python_repository(<a href="#nixpkgs_python_repository-name">name</a>, <a href="#nixpkgs_python_repository-repository">repository</a>, <a href="#nixpkgs_python_repository-repositories">repositories</a>, <a href="#nixpkgs_python_repository-nix_file">nix_file</a>, <a href="#nixpkgs_python_repository-nix_file_deps">nix_file_deps</a>, <a href="#nixpkgs_python_repository-quiet">quiet</a>)
</pre>
<p dir="auto">Define a collection of python packages based on a nix file.</p>
<p dir="auto">The only entry point is a <a href="#nixpkgs_python_repository-nix_file"><code>nix_file</code></a>
which should expose a <code>pkgs</code> and a <code>python</code> attributes. <code>python</code> is the
python interpreter, and <code>pkgs</code> a set of python packages that will be made
available to bazel.</p>
<p dir="auto"><g-emoji class="g-emoji" alias="warning">⚠️</g-emoji> All the packages in <code>pkgs</code> are built by this rule. It is
therefore not a good idea to expose something as big as <code>pkgs.python3</code> as
provided by nixpkgs.</p>
<p dir="auto">This rule is instead intended to expose an ad-hoc set of packages for your
project, as can be built by poetry2nix, mach-nix, dream2nix or by manually
picking the python packages you need from nixpkgs.</p>
<p dir="auto">The format is generic to support the many ways to generate such packages
sets with nixpkgs. See our python <a href="/testing/toolchains/python"><code>tests</code></a> and
<a href="/examples/toolchains/python"><code>examples</code></a> to get started.</p>
<p dir="auto">This rule is intended to mimic as closely as possible the <a href="https://github.com/bazelbuild/rules_python#using-the-package-installation-rules">rules_python
API</a>.
<code>nixpkgs_python_repository</code> should be a drop-in replacement of <code>pip_parse</code>.
As such, it also provides a <code>requirement</code> function.</p>
<p dir="auto"><g-emoji class="g-emoji" alias="warning">⚠️</g-emoji> Using the <code>requirement</code> fucntion inherits the same advantages and
limitations as the one in rules_python. All the function does is create a
label of the form <code>@{nixpkgs_python_repository_name}//:{package_name}</code>.
While depending on such a label directly will work, the layout may change
in the future. To be on the safe side, define and import your own
<code>requirement</code> function if you need to play with these labels.</p>
<p dir="auto"><g-emoji class="g-emoji" alias="warning">⚠️</g-emoji> Just as with rules_python, nothing is done to enforce consistency
between the version of python used to generate this repository and the one
configured in your toolchain, even if you use nixpkgs_python_toolchain. You
should ensure they both use the same python from the same nixpkgs version.</p>
<p dir="auto"><g-emoji class="g-emoji" alias="warning">⚠️</g-emoji> packages names exposed by this rule are determined by the <code>pname</code>
attribute of the corresponding nix package. These may vary slightly from
names used by rules_python. Should this be a problem, you can provide you
own <code>requirement</code> function, for example one that lowercases its argument.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-10" class="anchor" aria-label="Permalink: Parameters" href="#parameters-10"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_python_repository-name">
<td><code>name</code></td>
<td>
<p dir="auto">required.</p>
<p dir="auto">
</p><p dir="auto">The name for the created package set.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_repository-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repository"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_repository-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-repositories"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_repository-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nix_file"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_repository-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-nix_file_deps"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_python_repository-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
<p dir="auto">
</p><p dir="auto">See <a href="#nixpkgs_package-quiet"><code>nixpkgs_package</code></a>.</p>
<p dir="auto"></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_rust_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_rust_configure</h3><a id="user-content-nixpkgs_rust_configure" class="anchor" aria-label="Permalink: nixpkgs_rust_configure" href="#nixpkgs_rust_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_rust_configure(<a href="#nixpkgs_rust_configure-name">name</a>, <a href="#nixpkgs_rust_configure-default_edition">default_edition</a>, <a href="#nixpkgs_rust_configure-repository">repository</a>, <a href="#nixpkgs_rust_configure-repositories">repositories</a>, <a href="#nixpkgs_rust_configure-nix_file">nix_file</a>, <a href="#nixpkgs_rust_configure-nix_file_deps">nix_file_deps</a>,
                       <a href="#nixpkgs_rust_configure-nix_file_content">nix_file_content</a>, <a href="#nixpkgs_rust_configure-nixopts">nixopts</a>, <a href="#nixpkgs_rust_configure-fail_not_supported">fail_not_supported</a>, <a href="#nixpkgs_rust_configure-quiet">quiet</a>, <a href="#nixpkgs_rust_configure-exec_constraints">exec_constraints</a>,
                       <a href="#nixpkgs_rust_configure-target_constraints">target_constraints</a>, <a href="#nixpkgs_rust_configure-register">register</a>)
</pre>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-11" class="anchor" aria-label="Permalink: Parameters" href="#parameters-11"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_rust_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_rust"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-default_edition">
<td><code>default_edition</code></td>
<td>
<p dir="auto">optional.
default is <code>"2018"</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-repository">
<td><code>repository</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-repositories">
<td><code>repositories</code></td>
<td>
<p dir="auto">optional.
default is <code>{}</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-nix_file">
<td><code>nix_file</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-nix_file_deps">
<td><code>nix_file_deps</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-nix_file_content">
<td><code>nix_file_content</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-nixopts">
<td><code>nixopts</code></td>
<td>
<p dir="auto">optional.
default is <code>[]</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-fail_not_supported">
<td><code>fail_not_supported</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-quiet">
<td><code>quiet</code></td>
<td>
<p dir="auto">optional.
default is <code>False</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-target_constraints">
<td><code>target_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
</td>
</tr>
<tr id="user-content-nixpkgs_rust_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><a id="user-content-#nixpkgs_sh_posix_configure"></a></p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">nixpkgs_sh_posix_configure</h3><a id="user-content-nixpkgs_sh_posix_configure" class="anchor" aria-label="Permalink: nixpkgs_sh_posix_configure" href="#nixpkgs_sh_posix_configure"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<pre>nixpkgs_sh_posix_configure(<a href="#nixpkgs_sh_posix_configure-name">name</a>, <a href="#nixpkgs_sh_posix_configure-packages">packages</a>, <a href="#nixpkgs_sh_posix_configure-exec_constraints">exec_constraints</a>, <a href="#nixpkgs_sh_posix_configure-register">register</a>, <a href="#nixpkgs_sh_posix_configure-kwargs">kwargs</a>)
</pre>
<p dir="auto">Create a POSIX toolchain from nixpkgs.</p>
<p dir="auto">Loads the given Nix packages, scans them for standard Unix tools, and
generates a corresponding <code>sh_posix_toolchain</code>.</p>
<p dir="auto">Make sure to call <code>nixpkgs_sh_posix_configure</code> before <code>sh_posix_configure</code>,
if you use both. Otherwise, the local toolchain will always be chosen in
favor of the nixpkgs one.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Parameters</h4><a id="user-content-parameters-12" class="anchor" aria-label="Permalink: Parameters" href="#parameters-12"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>




<tbody>
<tr id="user-content-nixpkgs_sh_posix_configure-name">
<td><code>name</code></td>
<td>
<p dir="auto">optional.
default is <code>"nixpkgs_sh_posix_config"</code></p>
<p dir="auto">
</p><p dir="auto">Name prefix for the generated repositories.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_sh_posix_configure-packages">
<td><code>packages</code></td>
<td>
<p dir="auto">optional.
default is <code>["stdenv.initialPath"]</code></p>
<p dir="auto">
</p><p dir="auto">List of Nix attribute paths to draw Unix tools from.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_sh_posix_configure-exec_constraints">
<td><code>exec_constraints</code></td>
<td>
<p dir="auto">optional.
default is <code>None</code></p>
<p dir="auto">
</p><p dir="auto">Constraints for the execution platform.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_sh_posix_configure-register">
<td><code>register</code></td>
<td>
<p dir="auto">optional.
default is <code>True</code></p>
<p dir="auto">
</p><p dir="auto">Automatically register the generated toolchain if set to True.</p>
<p dir="auto"></p>
</td>
</tr>
<tr id="user-content-nixpkgs_sh_posix_configure-kwargs">
<td><code>kwargs</code></td>
<td>
<p dir="auto">optional.</p>
</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
</article></div>