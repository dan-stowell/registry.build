<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">iOS Rules for <a href="https://bazel.build" rel="nofollow">Bazel</a></h1><a id="user-content-ios-rules-for-bazel" class="anchor" aria-label="Permalink: iOS Rules for Bazel" href="#ios-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/bazel-ios/rules_ios/workflows/CI-master/badge.svg"><img src="https://github.com/bazel-ios/rules_ios/workflows/CI-master/badge.svg" alt="master" style="max-width: 100%;"></a></p>
<p dir="auto"><code>rules_ios</code> is <a href="https://bazel-ios.github.io/" rel="nofollow">community developed Bazel rules</a>
that enable you to do iOS development with Bazel end to end.</p>
<p dir="auto">It seamlessly Bazel builds iOS applications originally written under Xcode with
minimal-to-no code changes. It often re-uses ideas and code from <code>rules_swift</code>
and <code>rules_apple</code> and it isn't tied to untested or unused features. It generates
Xcode projects that <em>just work</em> and makes using Apple Silicon with Bazel a
breeze.</p>
<p dir="auto"><em>Learn more at <a href="https://bazel-ios.github.io/" rel="nofollow">bazel-ios.github.io</a></em></p>
<p dir="auto"><em>Looking for the CocoaPods/Carthage rules?</em> <a href="#cocoapods-and-carthage">See this section</a>.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Reference documentation</h2><a id="user-content-reference-documentation" class="anchor" aria-label="Permalink: Reference documentation" href="#reference-documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/bazel-ios/rules_ios/tree/master/docs">Click here</a>
for the documentation.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Supported Bazel versions</h2><a id="user-content-supported-bazel-versions" class="anchor" aria-label="Permalink: Supported Bazel versions" href="#supported-bazel-versions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">rules_ios depends on <a href="https://github.com/bazelbuild/rules_apple">rules_apple</a> and <a href="https://github.com/bazelbuild/rules_swift">rules_swift</a> which are often affected by changes in Bazel
itself. This means you generally need to update these rules and rules_ios as you
update Bazel.</p>
<p dir="auto">See the following table for supported release versions.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th align="center">Bazel release</th>
<th align="center">Minimum supported rules version</th>
<th align="center">Final supported rules version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">7.*</td>
<td align="center">4.4.0</td>
<td align="center">current</td>
</tr>
<tr>
<td align="center">6.*</td>
<td align="center">2.0.0</td>
<td align="center">5.3.0</td>
</tr>
<tr>
<td align="center">5.*</td>
<td align="center">1.0.0</td>
<td align="center">3.2.2</td>
</tr>
<tr>
<td align="center">4.*</td>
<td align="center">1.0.0</td>
<td align="center">1.0.0</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Supported <a href="https://github.com/bazelbuild/rules_apple">rules_apple</a> versions</h2><a id="user-content-supported-rules_apple-versions" class="anchor" aria-label="Permalink: Supported rules_apple versions" href="#supported-rules_apple-versions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">rules_ios depends on <a href="https://github.com/bazelbuild/rules_apple">rules_apple</a>, we attempt to maintain compatibility with
most versions of rules_apple until it becomes too difficult to do so.</p>
<p dir="auto">See the following table for supported rules_apple release versions.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th align="center">rules_apple release</th>
<th align="center">Minimum supported rules version</th>
<th align="center">Final supported rules version</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">3.15.0</td>
<td align="center">5.3.0</td>
<td align="center">current</td>
</tr>
<tr>
<td align="center">3.*</td>
<td align="center">3.*</td>
<td align="center">4.2.1</td>
</tr>
<tr>
<td align="center">2.*</td>
<td align="center">2.*</td>
<td align="center">3.2.2</td>
</tr>
<tr>
<td align="center">1.*</td>
<td align="center">1.0.0</td>
<td align="center">3.2.2</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Getting started</h2><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bzlmod setup</h3><a id="user-content-bzlmod-setup" class="anchor" aria-label="Permalink: Bzlmod setup" href="#bzlmod-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the Bazel module to your <code>MODULE.bazel</code> file:
See the <a href="https://github.com/bazel-ios/rules_ios/releases/latest">latest release</a> for an up-to-date snippet!</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;rules_ios&quot;, version = &quot;x.x.x&quot;, repo_name = &quot;build_bazel_rules_ios&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_ios"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"x.x.x"</span>, <span class="pl-s1">repo_name</span> <span class="pl-c1">=</span> <span class="pl-s">"build_bazel_rules_ios"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">WORKSPACE setup</h3><a id="user-content-workspace-setup" class="anchor" aria-label="Permalink: WORKSPACE setup" href="#workspace-setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following lines to your <code>WORKSPACE</code> file.
See the <a href="https://github.com/bazel-ios/rules_ios/releases/latest">latest release</a> for an up-to-date snippet!</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

# See https://github.com/bazel-ios/rules_ios/releases/latest
http_archive(
    name = &quot;build_bazel_rules_ios&quot;,
    sha256 = &quot;4faa33a671f615500d3ec0d04d89e390103bcc1abb5e973c8fb1c2510af85985&quot;,
    url = &quot;https://github.com/bazel-ios/rules_ios/releases/download/1.0.1/rules_ios.1.0.1.tar.gz&quot;,
)

load(
    &quot;@build_bazel_rules_ios//rules:repositories.bzl&quot;,
    &quot;rules_ios_dependencies&quot;
)

rules_ios_dependencies()

load(
    &quot;@build_bazel_rules_apple//apple:repositories.bzl&quot;,
    &quot;apple_rules_dependencies&quot;,
)

apple_rules_dependencies()

load(
    &quot;@build_bazel_rules_swift//swift:repositories.bzl&quot;,
    &quot;swift_rules_dependencies&quot;,
)

swift_rules_dependencies()

load(
    &quot;@build_bazel_apple_support//lib:repositories.bzl&quot;,
    &quot;apple_support_dependencies&quot;,
)

apple_support_dependencies()

load(
    &quot;@com_google_protobuf//:protobuf_deps.bzl&quot;,
    &quot;protobuf_deps&quot;,
)

protobuf_deps()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-c"># See https://github.com/bazel-ios/rules_ios/releases/latest</span>
<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"build_bazel_rules_ios"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"4faa33a671f615500d3ec0d04d89e390103bcc1abb5e973c8fb1c2510af85985"</span>,
    <span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/bazel-ios/rules_ios/releases/download/1.0.1/rules_ios.1.0.1.tar.gz"</span>,
)

<span class="pl-en">load</span>(
    <span class="pl-s">"@build_bazel_rules_ios//rules:repositories.bzl"</span>,
    <span class="pl-s">"rules_ios_dependencies"</span>
)

<span class="pl-en">rules_ios_dependencies</span>()

<span class="pl-en">load</span>(
    <span class="pl-s">"@build_bazel_rules_apple//apple:repositories.bzl"</span>,
    <span class="pl-s">"apple_rules_dependencies"</span>,
)

<span class="pl-en">apple_rules_dependencies</span>()

<span class="pl-en">load</span>(
    <span class="pl-s">"@build_bazel_rules_swift//swift:repositories.bzl"</span>,
    <span class="pl-s">"swift_rules_dependencies"</span>,
)

<span class="pl-en">swift_rules_dependencies</span>()

<span class="pl-en">load</span>(
    <span class="pl-s">"@build_bazel_apple_support//lib:repositories.bzl"</span>,
    <span class="pl-s">"apple_support_dependencies"</span>,
)

<span class="pl-en">apple_support_dependencies</span>()

<span class="pl-en">load</span>(
    <span class="pl-s">"@com_google_protobuf//:protobuf_deps.bzl"</span>,
    <span class="pl-s">"protobuf_deps"</span>,
)

<span class="pl-en">protobuf_deps</span>()</pre></div>
<p dir="auto">rules_ios pulls a vetted sha of <code>rules_apple</code> and <code>rules_swift</code> - you can find the versions in <a href="https://github.com/bazel-ios/rules_ios/tree/master/rules/repositories.bzl"><code>repositories.bzl</code></a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">iOS applications</h3><a id="user-content-ios-applications" class="anchor" aria-label="Permalink: iOS applications" href="#ios-applications"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">rules_ios supports all the primitives like apps, extensions, app clips, and widgets</p>
<p dir="auto">For example, create an iOS app like so:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@build_bazel_rules_ios//rules:app.bzl&quot;, &quot;ios_application&quot;)

ios_application(
    name = &quot;iOS-App&quot;,
    srcs = glob([&quot;*.swift&quot;]),
    bundle_id = &quot;com.example.ios-app&quot;,
    minimum_os_version = &quot;12.0&quot;,
    visibility = [&quot;//visibility:public&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@build_bazel_rules_ios//rules:app.bzl"</span>, <span class="pl-s">"ios_application"</span>)

<span class="pl-en">ios_application</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"iOS-App"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"*.swift"</span>]),
    <span class="pl-s1">bundle_id</span> <span class="pl-c1">=</span> <span class="pl-s">"com.example.ios-app"</span>,
    <span class="pl-s1">minimum_os_version</span> <span class="pl-c1">=</span> <span class="pl-s">"12.0"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Xcode project generation</h3><a id="user-content-xcode-project-generation" class="anchor" aria-label="Permalink: Xcode project generation" href="#xcode-project-generation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See <a href="https://github.com/MobileNativeFoundation/rules_xcodeproj">rules_xcodeproj</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Frameworks</h3><a id="user-content-frameworks" class="anchor" aria-label="Permalink: Frameworks" href="#frameworks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Static frameworks with Xcode semantics - easily port existing apps to Bazel</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Builds a static framework
apple_framework(
    name = &quot;Static&quot;,
    srcs = glob([&quot;static/*.swift&quot;]),
    bundle_id = &quot;com.example.b&quot;,
    data = [&quot;Static.txt&quot;],
    infoplists = [&quot;Info.plist&quot;],
    platforms = {&quot;ios&quot;: &quot;12.0&quot;},
    deps = [&quot;//tests/ios/frameworks/dynamic/c&quot;],
)"><pre><span class="pl-c"># Builds a static framework</span>
<span class="pl-en">apple_framework</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"Static"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"static/*.swift"</span>]),
    <span class="pl-s1">bundle_id</span> <span class="pl-c1">=</span> <span class="pl-s">"com.example.b"</span>,
    <span class="pl-s1">data</span> <span class="pl-c1">=</span> [<span class="pl-s">"Static.txt"</span>],
    <span class="pl-s1">infoplists</span> <span class="pl-c1">=</span> [<span class="pl-s">"Info.plist"</span>],
    <span class="pl-s1">platforms</span> <span class="pl-c1">=</span> {<span class="pl-s">"ios"</span>: <span class="pl-s">"12.0"</span>},
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"//tests/ios/frameworks/dynamic/c"</span>],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Dynamic iOS frameworks</h3><a id="user-content-dynamic-ios-frameworks" class="anchor" aria-label="Permalink: Dynamic iOS frameworks" href="#dynamic-ios-frameworks"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">rules_ios builds frameworks as static or dynamic - just flip
<code>link_dynamic</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="apple_framework(
    name = &quot;Dynamic&quot;,
    srcs = glob([&quot;dynamic/*.swift&quot;]),
    bundle_id = &quot;com.example.a&quot;,
    infoplists = [&quot;Info.plist&quot;],
    link_dynamic = True,
    platforms = {&quot;ios&quot;: &quot;12.0&quot;},
    deps = [&quot;:Static&quot;],
)"><pre><span class="pl-en">apple_framework</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"Dynamic"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> <span class="pl-en">glob</span>([<span class="pl-s">"dynamic/*.swift"</span>]),
    <span class="pl-s1">bundle_id</span> <span class="pl-c1">=</span> <span class="pl-s">"com.example.a"</span>,
    <span class="pl-s1">infoplists</span> <span class="pl-c1">=</span> [<span class="pl-s">"Info.plist"</span>],
    <span class="pl-s1">link_dynamic</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">platforms</span> <span class="pl-c1">=</span> {<span class="pl-s">"ios"</span>: <span class="pl-s">"12.0"</span>},
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">":Static"</span>],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Testing - UI / Unit</h3><a id="user-content-testing---ui--unit" class="anchor" aria-label="Permalink: Testing - UI / Unit" href="#testing---ui--unit"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Easily test iOS applications with Bazel - ui and unit testing rules</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;//rules:test.bzl&quot;, &quot;ios_unit_test&quot;)

ios_unit_test(
    name = &quot;Unhosted&quot;,
    srcs = [&quot;some.swift&quot;],
    minimum_os_version = &quot;12.0&quot;,
    deps = [&quot;:Dynamic&quot;]
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"//rules:test.bzl"</span>, <span class="pl-s">"ios_unit_test"</span>)

<span class="pl-en">ios_unit_test</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"Unhosted"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"some.swift"</span>],
    <span class="pl-s1">minimum_os_version</span> <span class="pl-c1">=</span> <span class="pl-s">"12.0"</span>,
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">":Dynamic"</span>]
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Apple Silicon ready</h3><a id="user-content-apple-silicon-ready" class="anchor" aria-label="Permalink: Apple Silicon ready" href="#apple-silicon-ready"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>Automatically run legacy deps on Apple Silicon - it <em>just works</em> by running <a href="https://github.com/bogo/arm64-to-sim">arm64-to-sim</a> and more.</li>
<li>Testing mechanisms to easily test in ephemeral VMs</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See the <a href="https://github.com/bazel-ios/rules_ios/tree/master/tests">tests</a>
directory for tested use cases.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Special notes about debugging xcode projects</h2><a id="user-content-special-notes-about-debugging-xcode-projects" class="anchor" aria-label="Permalink: Special notes about debugging xcode projects" href="#special-notes-about-debugging-xcode-projects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Debugging does not work in sandbox mode, due to issue <a href="https://github.com/bazel-ios/rules_ios/issues/108" data-hovercard-type="issue" data-hovercard-url="/bazel-ios/rules_ios/issues/108/hovercard">#108</a>. The workaround for now is to disable sandboxing in the .bazelrc file.</p>
<p dir="auto">Bazel version required by current rules is <a href="https://github.com/bazel-ios/rules_ios/blob/master/.bazelversion">here</a></p>
<p dir="auto"><strong>Xcode 13</strong> and above supported, to find the last <code>SHA</code> with support for older versions see the list of git tags.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">CocoaPods and Carthage</h2><a id="user-content-cocoapods-and-carthage" class="anchor" aria-label="Permalink: CocoaPods and Carthage" href="#cocoapods-and-carthage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The existing CocoaPods and Carthage rules have been removed for maintenance reasons, instead use these other solutions:</p>
<ul dir="auto">
<li>For CocoaPods: <a href="https://github.com/bazel-ios/cocoapods-bazel">cocoapods-bazel</a></li>
<li>For Carthage: <a href="https://github.com/bazelbuild/rules_apple/blob/master/doc/rules-apple.md#apple_dynamic_framework_import">apple_framework_import</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Contributing</h2><a id="user-content-contributing" class="anchor" aria-label="Permalink: Contributing" href="#contributing"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For information on contributing / maintaining this repository see: <a href="./CONTRIBUTING.md">CONTRIBUTING.md</a></p>
</article></div>