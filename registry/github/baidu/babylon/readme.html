<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><strong><a href="README.en.md">[English]</a></strong></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Babylon</h1><a id="user-content-babylon" class="anchor" aria-label="Permalink: Babylon" href="#babylon"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://github.com/baidu/babylon/actions/workflows/ci.yml"><img src="https://github.com/baidu/babylon/actions/workflows/ci.yml/badge.svg" alt="CI" style="max-width: 100%;"></a>
<a href="https://coveralls.io/github/baidu/babylon" rel="nofollow"><img src="https://camo.githubusercontent.com/58d64a3ffffff4baabfeec8d0b9187a07276d56446c066454a2aaa0fd3c744c4/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f62616964752f626162796c6f6e2f62616467652e737667" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/baidu/babylon/badge.svg" style="max-width: 100%;"></a></p>
<p dir="auto">Babylon是一个用于支持C++高性能服务端开发的基础库，从内存和并行管理角度提供了大量的基础组件。广泛应用在对性能有严苛要求的场景，典型例如搜索推荐引擎，自动驾驶车载计算等场景</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">核心功能</h2><a id="user-content-核心功能" class="anchor" aria-label="Permalink: 核心功能" href="#核心功能"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>高效的应用级内存池机制
<ul dir="auto">
<li>兼容并扩展了<a href="https://en.cppreference.com/w/cpp/memory/memory_resource" rel="nofollow">std::pmr::memory_resource</a>机制</li>
<li>整合并增强了<a href="https://protobuf.dev/reference/cpp/arenas" rel="nofollow">google::protobuf::Arena</a>机制</li>
<li>在对象池结合内存池使用的情况下提供了保留容量清理和重建的机制</li>
</ul>
</li>
<li>组件式并行计算框架
<ul dir="auto">
<li>基于无锁DAG推导的高性能自动组件并行框架</li>
<li>依照执行流天然生成数据流管理方案，复杂计算图场景下提供安全的数据竞争管理</li>
<li>微流水线并行机制，提供上限更好的并行化能力</li>
</ul>
</li>
<li>并行开发基础组件
<ul dir="auto">
<li>wait-free级别的并发安全容器（vector/queue/hash_table/...）</li>
<li>可遍历的线程缓存开发框架</li>
<li>可扩展支持线程/协程的同步原语（future/mutex/...）</li>
</ul>
</li>
<li>应用/框架搭建基础工具
<ul dir="auto">
<li>IOC组件开发框架</li>
<li>C++对象序列化框架</li>
<li>零拷贝/零分配异步日志框架</li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">编译并使用</h2><a id="user-content-编译并使用" class="anchor" aria-label="Permalink: 编译并使用" href="#编译并使用"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">支持平台和编译器</h3><a id="user-content-支持平台和编译器" class="anchor" aria-label="Permalink: 支持平台和编译器" href="#支持平台和编译器"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>OS: Linux</li>
<li>CPU: x86-64/aarch64</li>
<li>COMPILER: gcc/clang</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bazel</h3><a id="user-content-bazel" class="anchor" aria-label="Permalink: Bazel" href="#bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Babylon使用<a href="https://bazel.build" rel="nofollow">Bazel</a>进行构建并使用<a href="https://bazel.build/external/module" rel="nofollow">bzlmod</a>进行依赖管理，考虑到目前Bazel生态整体处于bzlmod的转换周期，Babylon也依然兼容<a href="https://bazel.build/rules/lib/globals/workspace" rel="nofollow">workspace</a>依赖管理模式</p>
<ul dir="auto">
<li><a href="example/depend-use-bzlmod">Depend with bazel use bzlmod</a></li>
<li><a href="example/depend-use-workspace">Depend with bazel use workspace</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">CMake</h3><a id="user-content-cmake" class="anchor" aria-label="Permalink: CMake" href="#cmake"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Babylon也支持使用<a href="https://cmake.org" rel="nofollow">CMake</a>进行构建，并支持通过<a href="https://cmake.org/cmake/help/latest/command/find_package.html" rel="nofollow">find_package</a>、<a href="https://cmake.org/cmake/help/latest/command/add_subdirectory.html" rel="nofollow">add_subdirectory</a>或<a href="https://cmake.org/cmake/help/latest/module/FetchContent.html" rel="nofollow">FetchContent</a>进行依赖引入</p>
<ul dir="auto">
<li><a href="example/depend-use-cmake-fetch">Depend with cmake use FetchContent</a></li>
<li><a href="example/depend-use-cmake-find">Depend with cmake use find_package</a></li>
<li><a href="example/depend-use-cmake-subdir">Depend with cmake use add_subdirectory</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">模块功能文档</h2><a id="user-content-模块功能文档" class="anchor" aria-label="Permalink: 模块功能文档" href="#模块功能文档"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="docs/any.zh-cn.md">:any</a></li>
<li><a href="docs/anyflow/README.zh-cn.md">:anyflow</a></li>
<li><a href="docs/application_context.zh-cn.md">:application_context</a></li>
<li><a href="docs/concurrent/README.zh-cn.md">:concurrent</a></li>
<li><a href="docs/coroutine/README.zh-cn.md">:coroutine</a></li>
<li><a href="docs/executor.zh-cn.md">:executor</a></li>
<li><a href="docs/future.zh-cn.md">:future</a></li>
<li><a href="docs/logging/README.zh-cn.md">:logging</a>
<ul dir="auto">
<li><a href="example/use-async-logger">Use async logger</a></li>
<li><a href="example/use-with-glog">Use with glog</a></li>
</ul>
</li>
<li><a href="docs/reusable/README.zh-cn.md">:reusable</a></li>
<li><a href="docs/serialization.zh-cn.md">:serialization</a></li>
<li><a href="docs/time.zh-cn.md">:time</a></li>
<li>Protobuf <a href="docs/arenastring.zh-cn.md">arenastring</a> patch</li>
<li>Typical usage with <a href="https://github.com/apache/brpc">brpc</a>
<ul dir="auto">
<li>use <a href="docs/future.zh-cn.md">:future</a> with bthread: <a href="example/use-with-bthread">example/use-with-bthread</a></li>
<li>use <a href="docs/reusable/memory_resource.zh-cn.md">:reusable_memory_resource</a> for rpc server: <a href="example/use-arena-with-brpc">example/use-arena-with-brpc</a></li>
<li>use <a href="docs/concurrent/counter.zh-cn.md">:concurrent_counter</a> implement bvar: <a href="example/use-counter-with-bvar">example/use-counter-with-bvar</a></li>
</ul>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">整体设计思路</h2><a id="user-content-整体设计思路" class="anchor" aria-label="Permalink: 整体设计思路" href="#整体设计思路"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://mp.weixin.qq.com/s?__biz=Mzg5MjU0NTI5OQ==&amp;mid=2247489076&amp;idx=1&amp;sn=748bf716d94d5ed2739ea8a9385cd4a6&amp;chksm=c03d2648f74aaf5e11298cf450c3453a273eb6d2161bc90e411b6d62fa0c1b96a45e411af805&amp;scene=178&amp;cur_album_id=1693053794688761860#rd" rel="nofollow">百度C++工程师的那些极限优化（内存篇）</a></li>
<li><a href="https://mp.weixin.qq.com/s/0Ofo8ak7-UXuuOoD0KIHwA" rel="nofollow">百度C++工程师的那些极限优化（并发篇）</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">如何贡献</h2><a id="user-content-如何贡献" class="anchor" aria-label="Permalink: 如何贡献" href="#如何贡献"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">如果你遇到问题或需要新功能，欢迎创建issue。</p>
<p dir="auto">如果你可以解决某个issue, 欢迎发送PR。</p>
<p dir="auto">发送PR前请确认有对应的单测代码。</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">致谢</h2><a id="user-content-致谢" class="anchor" aria-label="Permalink: 致谢" href="#致谢"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="https://comate.baidu.com/zh/powerSource" rel="nofollow"><img src="https://camo.githubusercontent.com/f799d7337ab09815551d38ec263bcadd2f0b7d51bc6b6cd350782e93c1a980bf/68747470733a2f2f636f6d6174652e62616964752e636f6d2f696d616765732f706f776572736f757263652f706f776572736f757263652d6c696768742d7a682d312e706e67" alt="文心快码源力计划标志" data-canonical-src="https://comate.baidu.com/images/powersource/powersource-light-zh-1.png" style="max-width: 100%;"></a></p>
</article></div>