<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto"><a href="https://travis-ci.org/marcohu/rules_antlr" rel="nofollow"><img src="https://camo.githubusercontent.com/787fb8a2a89d7e61d54b74132e950073f1c7a7a55cbd23aa207765b2e9705750/68747470733a2f2f7472617669732d63692e6f72672f6d6172636f68752f72756c65735f616e746c722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/marcohu/rules_antlr.png?branch=master" style="max-width: 100%;"></a>
<a href="https://java.oracle.com" rel="nofollow"><img src="https://camo.githubusercontent.com/b7436e263c1678b58ca46e4283c72d9d875bc909166b84fad660b70e410f81f0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6a6176612d382b2d3463376539662e737667" alt="Java 8+" data-canonical-src="https://img.shields.io/badge/java-8+-4c7e9f.svg" style="max-width: 100%;"></a>
<a href="https://github.com/marcohu/rules_antlr/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/29ba86e33d6c73f556fd517b07ad76acf76b1352e87e1e681e9c51c9501e7dba/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865322d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/license-Apache2-blue.svg" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">ANTLR Rules for Bazel</h1><a id="user-content-antlr-rules-for-bazel" class="anchor" aria-label="Permalink: ANTLR Rules for Bazel" href="#antlr-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">These build rules are used for processing <a href="https://www.antlr.org" rel="nofollow">ANTLR</a>
grammars with <a href="https://bazel.build/" rel="nofollow">Bazel</a>.</p>
<ul dir="auto">
<li><a href="#matrix">Support Matrix</a></li>
<li><a href="#setup">Workspace Setup</a>
<ul dir="auto">
<li><a href="docs/setup.md#setup">Details</a></li>
</ul>
</li>
<li><a href="#build-rules">Build Rules</a>
<ul dir="auto">
<li><a href="#java-example">Java Example</a></li>
</ul>
</li>
</ul>
<p dir="auto"><a name="user-content-matrix"></a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Support Matrix</h2><a id="user-content-support-matrix" class="anchor" aria-label="Permalink: Support Matrix" href="#support-matrix"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th align="center">antlr4</th>
<th align="center">antlr3</th>
<th align="center">antlr2</th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td align="center"></td>
<td align="center">Gen</td>
<td align="center">Gen</td>
</tr>
<tr>
<td>C++</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
</tr>
<tr>
<td>Go</td>
<td align="center">Gen + Runtime</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Java</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
</tr>
<tr>
<td>ObjC</td>
<td align="center"></td>
<td align="center">Gen</td>
<td align="center"></td>
</tr>
<tr>
<td>Python2</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
</tr>
<tr>
<td>Python3</td>
<td align="center">Gen + Runtime</td>
<td align="center">Gen + Runtime</td>
<td align="center"></td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">Gen: Code Generation<br>
Runtime: Runtime Library bundled</p>
<p dir="auto"><a name="user-content-setup"></a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Setup</h2><a id="user-content-setup" class="anchor" aria-label="Permalink: Setup" href="#setup"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Add the following to your <a href="https://docs.bazel.build/versions/master/build-ref.html#workspace" rel="nofollow"><code>WORKSPACE</code></a>
file to include the external repository and load the necessary Java dependencies for the
<a href="docs/antlr4.md#antlr"><code>antlr</code></a> rule:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

http_archive(
    name = &quot;rules_antlr&quot;,
    sha256 = &quot;26e6a83c665cf6c1093b628b3a749071322f0f70305d12ede30909695ed85591&quot;,
    strip_prefix = &quot;rules_antlr-0.5.0&quot;,
    urls = [&quot;https://github.com/marcohu/rules_antlr/archive/0.5.0.tar.gz&quot;],
)

load(&quot;@rules_antlr//antlr:repositories.bzl&quot;, &quot;rules_antlr_dependencies&quot;)
rules_antlr_dependencies(&quot;4.8&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_antlr"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"26e6a83c665cf6c1093b628b3a749071322f0f70305d12ede30909695ed85591"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_antlr-0.5.0"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [<span class="pl-s">"https://github.com/marcohu/rules_antlr/archive/0.5.0.tar.gz"</span>],
)

<span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:repositories.bzl"</span>, <span class="pl-s">"rules_antlr_dependencies"</span>)
<span class="pl-en">rules_antlr_dependencies</span>(<span class="pl-s">"4.8"</span>)</pre></div>
<p dir="auto">More detailed instructions can be found in the <a href="docs/setup.md#setup">Setup</a> document.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Build Rules</h3><a id="user-content-build-rules" class="anchor" aria-label="Permalink: Build Rules" href="#build-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To add ANTLR code generation to your <a href="https://docs.bazel.build/versions/master/build-ref.html#BUILD_files" rel="nofollow">BUILD</a> files, you first have to load the extension for the desired ANTLR release.</p>
<p dir="auto">For ANTLR 4:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_antlr//antlr:antlr4.bzl&quot;, &quot;antlr&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr4.bzl"</span>, <span class="pl-s">"antlr"</span>)</pre></div>
<p dir="auto">For ANTLR 3:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_antlr//antlr:antlr3.bzl&quot;, &quot;antlr&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr3.bzl"</span>, <span class="pl-s">"antlr"</span>)</pre></div>
<p dir="auto">For ANTLR 2:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_antlr//antlr:antlr2.bzl&quot;, &quot;antlr&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr2.bzl"</span>, <span class="pl-s">"antlr"</span>)</pre></div>
<p dir="auto">You can then invoke the rule:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="antlr(
    name = &quot;parser&quot;,
    srcs = [&quot;Hello.g4&quot;],
    package = &quot;hello.world&quot;,
)"><pre><span class="pl-en">antlr</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"parser"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"Hello.g4"</span>],
    <span class="pl-s1">package</span> <span class="pl-c1">=</span> <span class="pl-s">"hello.world"</span>,
)</pre></div>
<p dir="auto">It's also possible to use different ANTLR versions in the same file via aliasing:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_antlr//antlr:antlr4.bzl&quot;, antlr4 = &quot;antlr&quot;)
load(&quot;@rules_antlr//antlr:antlr3.bzl&quot;, antlr3 = &quot;antlr&quot;)

antlr4(
    name = &quot;parser&quot;,
    srcs = [&quot;Hello.g4&quot;],
    package = &quot;hello.world&quot;,
)

antlr3(
    name = &quot;old_parser&quot;,
    srcs = [&quot;OldHello.g&quot;],
    package = &quot;hello.world&quot;,
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr4.bzl"</span>, <span class="pl-s1">antlr4</span> <span class="pl-c1">=</span> <span class="pl-s">"antlr"</span>)
<span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr3.bzl"</span>, <span class="pl-s1">antlr3</span> <span class="pl-c1">=</span> <span class="pl-s">"antlr"</span>)

<span class="pl-en">antlr4</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"parser"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"Hello.g4"</span>],
    <span class="pl-s1">package</span> <span class="pl-c1">=</span> <span class="pl-s">"hello.world"</span>,
)

<span class="pl-en">antlr3</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"old_parser"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"OldHello.g"</span>],
    <span class="pl-s1">package</span> <span class="pl-c1">=</span> <span class="pl-s">"hello.world"</span>,
)</pre></div>
<p dir="auto">Refer to the rule reference documentation for the available rules and attributes:</p>
<ul dir="auto">
<li><a href="docs/antlr4.md#antlr">ANTLR 4</a></li>
<li><a href="docs/antlr3.md#antlr">ANTLR 3</a></li>
<li><a href="docs/antlr2.md#antlr">ANTLR 2</a></li>
</ul>
<p dir="auto"><a name="user-content-java-example"></a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Basic Java Example</h2><a id="user-content-basic-java-example" class="anchor" aria-label="Permalink: Basic Java Example" href="#basic-java-example"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Suppose you have the following directory structure for a simple ANTLR project:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="HelloWorld/
└── src
    └── main
        └── antlr4
            ├── BUILD
            └── Hello.g4
WORKSPACE"><pre class="notranslate"><code>HelloWorld/
└── src
    └── main
        └── antlr4
            ├── BUILD
            └── Hello.g4
WORKSPACE
</code></pre></div>
<p dir="auto"><code>HelloWorld/src/main/antlr4/Hello.g4</code></p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="grammar Hello;
r  : 'hello' ID;
ID : [a-z]+;
WS : [ \t\r\n]+ -&gt; skip;"><pre class="notranslate"><code>grammar Hello;
r  : 'hello' ID;
ID : [a-z]+;
WS : [ \t\r\n]+ -&gt; skip;
</code></pre></div>
<p dir="auto">To add code generation to a BUILD file, you load the desired build rule and create a new antlr target. The output—here a .jar file with the generated source files—can be used as input for other rules.</p>
<p dir="auto"><code>HelloWorld/src/main/antlr4/BUILD</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_antlr//antlr:antlr4.bzl&quot;, &quot;antlr&quot;)

antlr(
    name = &quot;parser&quot;,
    srcs = [&quot;Hello.g4&quot;],
    package = &quot;hello.world&quot;,
    visibility = [&quot;//visibility:public&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_antlr//antlr:antlr4.bzl"</span>, <span class="pl-s">"antlr"</span>)

<span class="pl-en">antlr</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"parser"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">"Hello.g4"</span>],
    <span class="pl-s1">package</span> <span class="pl-c1">=</span> <span class="pl-s">"hello.world"</span>,
    <span class="pl-s1">visibility</span> <span class="pl-c1">=</span> [<span class="pl-s">"//visibility:public"</span>],
)</pre></div>
<p dir="auto">Building the project generates the lexer/parser files:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="$ bazel build //HelloWorld/...
INFO: Analyzed 2 targets (23 packages loaded, 400 targets configured).
INFO: Found 2 targets...
INFO: Elapsed time: 15.295s, Critical Path: 14.37s
INFO: 8 processes: 6 processwrapper-sandbox, 2 worker.
INFO: Build completed successfully, 12 total actions"><pre class="notranslate"><code>$ bazel build //HelloWorld/...
INFO: Analyzed 2 targets (23 packages loaded, 400 targets configured).
INFO: Found 2 targets...
INFO: Elapsed time: 15.295s, Critical Path: 14.37s
INFO: 8 processes: 6 processwrapper-sandbox, 2 worker.
INFO: Build completed successfully, 12 total actions
</code></pre></div>
<p dir="auto">To compile the generated files, add the generating target as input for the
<a href="https://docs.bazel.build/versions/master/be/java.html#java_library" rel="nofollow"><code>java_library</code></a> or
<a href="https://docs.bazel.build/versions/master/be/java.html#java_binary" rel="nofollow"><code>java_binary</code></a> rules
and reference the required ANTLR dependency:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@rules_java//java:defs.bzl&quot;, &quot;java_library&quot;)

java_library(
    name = &quot;HelloWorld&quot;,
    srcs = [&quot;:parser&quot;],
    deps = [&quot;@antlr4_runtime//jar&quot;],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@rules_java//java:defs.bzl"</span>, <span class="pl-s">"java_library"</span>)

<span class="pl-en">java_library</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"HelloWorld"</span>,
    <span class="pl-s1">srcs</span> <span class="pl-c1">=</span> [<span class="pl-s">":parser"</span>],
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"@antlr4_runtime//jar"</span>],
)</pre></div>
<p dir="auto">Refer to the <a href="examples">examples</a> directory for further samples.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Project Layout</h2><a id="user-content-project-layout" class="anchor" aria-label="Permalink: Project Layout" href="#project-layout"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">ANTLR rules will store all generated source files in a <code>target-name.srcjar</code> zip archive
below your workspace
<a href="https://docs.bazel.build/versions/master/output_directories.html#documentation-of-the-current-bazel-output-directory-layout" rel="nofollow"><code>bazel-bin</code></a>
folder. Depending on the ANTLR version, there are three ways to control namespacing and
directory structure for generated code, all with their pros and cons.</p>
<ol dir="auto">
<li>
<p dir="auto">The <a href="docs/antlr4.md#antlr-package"><code>package</code></a> rule attribute (<a href="docs/antlr4.md#antlr"><code>antlr4</code></a>
only). Setting the namespace via the <a href="docs/antlr4.md#antlr-package"><code>package</code></a> attribute
will generate the corresponding target language specific namespacing code (where
applicable) and puts the generated source files below a corresponding directory structure.
To not create the directory structure, set the <a href="docs/antlr4.md#antlr-layout"><code>layout</code></a> attribute to
<code>flat</code>.<br>Very expressive and allows language independent grammars, but only available
with ANTLR 4, requires several runs for different namespaces, might complicate refactoring
and can conflict with language specific code in <code>@header {...}</code> sections as they are
mutually exclusive.</p>
</li>
<li>
<p dir="auto">Language specific application code in grammar <code>@header {...}</code> section. To not create
the corresponding directory structure, set the <a href="docs/antlr4.md#antlr-layout"><code>layout</code></a>
attribute to <code>flat</code>.<br>Allows different namespaces to be processed in a single run and
will not require changes to build files upon refactoring, but ties grammars to a specific
language and can conflict with the <a href="docs/antlr4.md#antlr-package"><code>package</code></a> attribute as
they are mutually exclusive.</p>
</li>
<li>
<p dir="auto">The project layout (<a href="docs/antlr4.md#antlr"><code>antlr4</code></a> only). Putting your grammars below
a common project directory will determine namespace and corresponding directory structure
for the generated source files from the relative project path. ANTLR rules uses different
defaults for the different target languages (see below), but you can define the root
directory yourself via the <a href="docs/antlr4.md#antlr-layout"><code>layout</code></a> attribute.<br>Allows
different namespaces to be processed in a single run without language coupling, but
requires conformity to a specific (albeit configurable) project layout and the
<a href="docs/antlr4.md#antlr-layout"><code>layout</code></a> attribute for certain languages.</p>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Common Project Directories</h3><a id="user-content-common-project-directories" class="anchor" aria-label="Permalink: Common Project Directories" href="#common-project-directories"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <a href="docs/antlr4.md#antlr"><code>antlr4</code></a> rule supports a common directory layout to figure out namespacing from the relative directory structure. The table below lists the default paths for the different target languages. The version number at the end is optional.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Language</th>
<th>Default Directory<span></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>C</td>
<td><code>src/antlr4</code></td>
</tr>
<tr>
<td>Cpp</td>
<td><code>src/antlr4</code></td>
</tr>
<tr>
<td>CSharp, CSharp2, CSharp3</td>
<td><code>src/antlr4</code></td>
</tr>
<tr>
<td>Go</td>
<td> </td>
</tr>
<tr>
<td>Java</td>
<td><code>src/main/antlr4</code></td>
</tr>
<tr>
<td>JavaScript</td>
<td><code>src/antlr4</code></td>
</tr>
<tr>
<td>Python, Python2, Python3</td>
<td><code>src/antlr4</code></td>
</tr>
<tr>
<td>Swift</td>
<td> </td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">For languages with no default, you would have to set your preference with the
<a href="docs/antlr4.md#antlr-layout"><code>layout</code></a> attribute.</p>
</article></div>