<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">BazelPods <a href="https://bazel.build/" rel="nofollow"><img src="https://user-images.githubusercontent.com/51409210/188334195-d558f4b3-cafb-4501-8dc7-ed4771508a09.svg" alt="bazel-icon" style="max-width: 100%; height: auto;"></a> + <a href="https://cocoapods.org/" rel="nofollow"><img src="https://user-images.githubusercontent.com/51409210/188334178-cbb1e7c9-aee3-4802-bcd2-81292d47d02d.png" alt="favicon" style="max-width: 100%; height: auto;"></a></h1><a id="user-content-bazelpods---" class="anchor" aria-label="Permalink: BazelPods  + " href="#bazelpods---"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="https://github.com/BazelPods/BazelPods/actions/workflows/snapshot_tests.yml/badge.svg?branch=main"><img src="https://github.com/BazelPods/BazelPods/actions/workflows/snapshot_tests.yml/badge.svg?branch=main" alt="Snapshot tests status" style="max-width: 100%; height: auto;"></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/BazelPods/BazelPods/actions/workflows/integration_tests_static.yml/badge.svg?branch=main"><img src="https://github.com/BazelPods/BazelPods/actions/workflows/integration_tests_static.yml/badge.svg?branch=main" alt="Integration tests static status" style="max-width: 100%; height: auto;"></a> <a target="_blank" rel="noopener noreferrer" href="https://github.com/BazelPods/BazelPods/actions/workflows/integration_tests_dynamic.yml/badge.svg?branch=main"><img src="https://github.com/BazelPods/BazelPods/actions/workflows/integration_tests_dynamic.yml/badge.svg?branch=main" alt="Integration tests dynamic status" style="max-width: 100%; height: auto;"></a></p>
<p dir="auto">One more way to build CocoaPods with Bazel. It generates Bazel's <code>BUILD</code> files for pods using awesome <a href="https://github.com/bazel-ios/rules_ios">rules_ios</a>.<br>
Core idea, Podspec parser, Starlark compiler are forked from <a href="https://github.com/bazel-xcode/PodToBUILD">PodToBUILD</a></p>
<h1 dir="auto"></h1>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">⚙️ Status and features</h3><a id="user-content-️-status-and-features" class="anchor" aria-label="Permalink: ⚙️ Status and features" href="#️-status-and-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th></th>
<th>iOS</th>
<th>macOS</th>
<th>watchOS</th>
<th>tvOS</th>
</tr>
</thead>
<tbody>
<tr>
<td>static library</td>
<td>✅</td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>dynamic (<code>use_framework!</code>)</td>
<td>✅</td>
<td>🔜</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>vendored static libs</td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>vendored frameworks</td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>vendored xcframeworks</td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>bundles and resources</td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td><a href="https://github.com/MobileNativeFoundation/rules_xcodeproj">rules_xcodeproj</a></td>
<td>✅</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>tests specs</td>
<td>Beta</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
<tr>
<td>app specs</td>
<td>Beta</td>
<td>❓</td>
<td>❓</td>
<td>❓</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h6 class="heading-element" dir="auto">✅ - full support (report issues if no),  🔜 - not yet supported, ❓ - unknown, ❌ - not supported</h6><a id="user-content----full-support-report-issues-if-no-----not-yet-supported----unknown----not-supported" class="anchor" aria-label="Permalink: ✅ - full support (report issues if no),  🔜 - not yet supported, ❓ - unknown, ❌ - not supported" href="#---full-support-report-issues-if-no-----not-yet-supported----unknown----not-supported"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Completed task" checked=""> Autodetect vendored frameworks and libs architectures and ignore unsupported</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Completed task" checked=""> Local pods with custom paths, private pods (resolved by CocoaPods)</li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" aria-label="Completed task" checked=""> Test and app specs 🚀</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">🎸 Let's rock</h3><a id="user-content--lets-rock" class="anchor" aria-label="Permalink: 🎸 Let's rock" href="#-lets-rock"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Don't forget to setup <a href="https://github.com/bazel-ios/rules_ios"><code>rules_ios</code></a> and <a href="https://github.com/bazelbuild/rules_apple"><code>rules_apple</code></a> first.</p>
<p dir="auto">Add <code>BazelPods</code> to your <code>MODULE.bazel</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel_dep(name = &quot;bazelpods&quot;, version = &quot;&lt;version&gt;&quot;)"><pre><span class="pl-en">bazel_dep</span>(<span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"bazelpods"</span>, <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"&lt;version&gt;"</span>)</pre></div>
<p dir="auto">Add <code>BazelPods</code> to your <code>WORKSPACE</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="http_archive(
    name = &quot;bazelpods&quot;,
    sha256 = &quot;&lt;sha256&gt;&quot;,
    url = &quot;https://github.com/sergeykhliustin/BazelPods/releases/download/&lt;version&gt;/release.tar.gz&quot;
)

load(&quot;@bazelpods//:repositories.bzl&quot;, &quot;bazelpods_dependencies&quot;)

bazelpods_dependencies()"><pre><span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"bazelpods"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"&lt;sha256&gt;"</span>,
    <span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/sergeykhliustin/BazelPods/releases/download/&lt;version&gt;/release.tar.gz"</span>
)

<span class="pl-en">load</span>(<span class="pl-s">"@bazelpods//:repositories.bzl"</span>, <span class="pl-s">"bazelpods_dependencies"</span>)

<span class="pl-en">bazelpods_dependencies</span>()</pre></div>
<p dir="auto">Add <code>post_install</code> action to your <code>Podfile</code> and run <code>pod install</code></p>
<div class="highlight highlight-source-ruby notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="post_install do |installer|
  puts &quot;Generating Pods.json&quot;
  development_pods = installer.sandbox.development_pods
  mapped_pods = installer.analysis_result.specifications.reduce({}) { |result, spec|
    result[spec.name] = {
      name: spec.name,
      podspec: &quot;#{spec.defined_in_file.to_s}&quot;,
      development_path: development_pods[spec.name]
    }
    result
  }
  File.open('Pods/Pods.json', 'w') { |file|
    file.write(JSON.pretty_generate(mapped_pods))
  }
end"><pre><span class="pl-en">post_install</span> <span class="pl-k">do</span> |<span class="pl-s1">installer</span>|
  <span class="pl-en">puts</span> <span class="pl-s">"Generating Pods.json"</span>
  <span class="pl-s1">development_pods</span> <span class="pl-c1">=</span> <span class="pl-s1">installer</span><span class="pl-kos">.</span><span class="pl-en">sandbox</span><span class="pl-kos">.</span><span class="pl-s1">development_pods</span>
  <span class="pl-s1">mapped_pods</span> <span class="pl-c1">=</span> <span class="pl-s1">installer</span><span class="pl-kos">.</span><span class="pl-en">analysis_result</span><span class="pl-kos">.</span><span class="pl-en">specifications</span><span class="pl-kos">.</span><span class="pl-en">reduce</span><span class="pl-kos">(</span><span class="pl-kos">{</span><span class="pl-kos">}</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">result</span><span class="pl-kos">,</span> <span class="pl-s1">spec</span>|
    <span class="pl-s1">result</span><span class="pl-kos">[</span><span class="pl-s1">spec</span><span class="pl-kos">.</span><span class="pl-en">name</span><span class="pl-kos">]</span> <span class="pl-c1">=</span> <span class="pl-kos">{</span>
      <span class="pl-pds">name</span>: <span class="pl-s1">spec</span><span class="pl-kos">.</span><span class="pl-en">name</span><span class="pl-kos">,</span>
      <span class="pl-pds">podspec</span>: <span class="pl-s">"<span class="pl-s1"><span class="pl-kos">#{</span><span class="pl-s1">spec</span><span class="pl-kos">.</span><span class="pl-en">defined_in_file</span><span class="pl-kos">.</span><span class="pl-en">to_s</span><span class="pl-kos">}</span></span>"</span><span class="pl-kos">,</span>
      <span class="pl-pds">development_path</span>: <span class="pl-s1">development_pods</span><span class="pl-kos">[</span><span class="pl-s1">spec</span><span class="pl-kos">.</span><span class="pl-en">name</span><span class="pl-kos">]</span>
    <span class="pl-kos">}</span>
    <span class="pl-s1">result</span>
  <span class="pl-kos">}</span>
  <span class="pl-v">File</span><span class="pl-kos">.</span><span class="pl-en">open</span><span class="pl-kos">(</span><span class="pl-s">'Pods/Pods.json'</span><span class="pl-kos">,</span> <span class="pl-s">'w'</span><span class="pl-kos">)</span> <span class="pl-kos">{</span> |<span class="pl-s1">file</span>|
    <span class="pl-s1">file</span><span class="pl-kos">.</span><span class="pl-en">write</span><span class="pl-kos">(</span><span class="pl-c1">JSON</span><span class="pl-kos">.</span><span class="pl-en">pretty_generate</span><span class="pl-kos">(</span><span class="pl-s1">mapped_pods</span><span class="pl-kos">)</span><span class="pl-kos">)</span>
  <span class="pl-kos">}</span>
<span class="pl-k">end</span></pre></div>
<p dir="auto">Run <code>BazelPods</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run @bazelpods//:bazelpods -- --src $PWD"><pre>bazel run @bazelpods//:bazelpods -- --src <span class="pl-smi">$PWD</span></pre></div>
<div class="markdown-heading" dir="auto"><h6 class="heading-element" dir="auto">See full list of command line options <a href="#%EF%B8%8F-command-line-options">below</a></h6><a id="user-content-see-full-list-of-command-line-options-below" class="anchor" aria-label="Permalink: See full list of command line options below" href="#see-full-list-of-command-line-options-below"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Now you can add first level dependencies to your app as <code>//Pods/&lt;pod_name&gt;</code><br>
Note: if you have multiplatform setup (<code>--platform</code> with more than 1 option), use <code>//Pods/&lt;pod_name&gt;:&lt;pod_name&gt;_&lt;platform&gt;</code><br>
Enjoy :)</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Patches</h4><a id="user-content-patches" class="anchor" aria-label="Permalink: Patches" href="#patches"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">You can specify patches to use in order you want. Also you can use same patch several times.</p>
<ul dir="auto">
<li><code>bundle_deduplicate</code> checks if final bundle will contain bundles with same name and avoids them.<br>
For example, <a href="https://github.com/CocoaPods/Specs/blob/master/Specs/a/d/d/GoogleMaps/7.3.0/GoogleMaps.podspec.json">GoogleMaps</a> contains <code>GoogleMaps.bundle</code> in <code>resources</code> and vendored <code>GoogleMaps.xcframework</code> also contains same bundle.</li>
<li><code>arm64_to_sim</code> patches legacy frameworks and libraries to support arm64 simulator. Read more <a href="https://github.com/bogo/arm64-to-sim">arm64-to-sim</a>. By default will run only on arm64 host machine. Use <code>arm64_to_sim_forced</code> to override.</li>
<li><code>user_options</code> applies options from <code>--user-options</code>. If not specified but <code>--user-options</code> not empty will be applied in the end.</li>
<li><code>missing_sdks</code> scans all sources for <code>import</code>, <code>@import</code> and <code>#import</code> to find missing sdk frameworks and adds them to final configuration.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">⌨️ Command line options</h3><a id="user-content-️-command-line-options" class="anchor" aria-label="Permalink: ⌨️ Command line options" href="#️-command-line-options"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Generate</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="OVERVIEW: Generates BUILD files for pods

USAGE: bazelpods generate [&lt;options&gt;] --src &lt;src&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically. (values: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options)
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic', 'data', 'objc_defines', 'runner', 'test_host', 'timeout',
                          'objc_copts', 'swift_copts', 'cc_copts', 'linkopts'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
                          For test specs:
                          'SomePod/UnitTests.runner := //:SomeTestsRunner'
                          'SomePod/UnitTests.test_host := //:SomeTestHostApp'
                          'SomePod/UnitTests.timeout := eternal'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (values: debug, info, warning, error, none; default: info)
  --use-bundler           Option to use `bundle exec` for `pod` calls
  --tests-timeout &lt;tests-timeout&gt;
                          (Optional) Default timeout for test targets (short|moderate|long|eternal) (values: short, moderate, long, eternal)
  --pods-json &lt;pods-json&gt; Pods.json (default: Pods/Pods.json)
  --print-output          Print BUILD files contents to terminal output
  --dry-run               Dry run. Files will not be written
  -d, --diff              Print diff between previous and new generated BUILD files
  -a, --add-podspec       Will add podspec.json to the pod directory. Just for debugging purposes.
  --color &lt;color&gt;         Logs color (auto|yes|no) (default: auto)
  -h, --help              Show help information."><pre class="notranslate"><code>OVERVIEW: Generates BUILD files for pods

USAGE: bazelpods generate [&lt;options&gt;] --src &lt;src&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically. (values: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options)
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic', 'data', 'objc_defines', 'runner', 'test_host', 'timeout',
                          'objc_copts', 'swift_copts', 'cc_copts', 'linkopts'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
                          For test specs:
                          'SomePod/UnitTests.runner := //:SomeTestsRunner'
                          'SomePod/UnitTests.test_host := //:SomeTestHostApp'
                          'SomePod/UnitTests.timeout := eternal'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (values: debug, info, warning, error, none; default: info)
  --use-bundler           Option to use `bundle exec` for `pod` calls
  --tests-timeout &lt;tests-timeout&gt;
                          (Optional) Default timeout for test targets (short|moderate|long|eternal) (values: short, moderate, long, eternal)
  --pods-json &lt;pods-json&gt; Pods.json (default: Pods/Pods.json)
  --print-output          Print BUILD files contents to terminal output
  --dry-run               Dry run. Files will not be written
  -d, --diff              Print diff between previous and new generated BUILD files
  -a, --add-podspec       Will add podspec.json to the pod directory. Just for debugging purposes.
  --color &lt;color&gt;         Logs color (auto|yes|no) (default: auto)
  -h, --help              Show help information.
</code></pre></div>
<p dir="auto">Compile</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="OVERVIEW: Compiles podspec.json to BUILD file

USAGE: bazelpods compile [&lt;options&gt;] --src &lt;src&gt; --podspec &lt;podspec&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically. (values: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options)
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic', 'data', 'objc_defines', 'runner', 'test_host', 'timeout',
                          'objc_copts', 'swift_copts', 'cc_copts', 'linkopts'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
                          For test specs:
                          'SomePod/UnitTests.runner := //:SomeTestsRunner'
                          'SomePod/UnitTests.test_host := //:SomeTestHostApp'
                          'SomePod/UnitTests.timeout := eternal'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (values: debug, info, warning, error, none; default: info)
  --use-bundler           Option to use `bundle exec` for `pod` calls
  --tests-timeout &lt;tests-timeout&gt;
                          (Optional) Default timeout for test targets (short|moderate|long|eternal) (values: short, moderate, long, eternal)
  --podspec &lt;podspec&gt;     podspec.json
  --subspecs &lt;subspecs&gt;   Subspecs list
  -h, --help              Show help information."><pre class="notranslate"><code>OVERVIEW: Compiles podspec.json to BUILD file

USAGE: bazelpods compile [&lt;options&gt;] --src &lt;src&gt; --podspec &lt;podspec&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically. (values: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options)
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic', 'data', 'objc_defines', 'runner', 'test_host', 'timeout',
                          'objc_copts', 'swift_copts', 'cc_copts', 'linkopts'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
                          For test specs:
                          'SomePod/UnitTests.runner := //:SomeTestsRunner'
                          'SomePod/UnitTests.test_host := //:SomeTestHostApp'
                          'SomePod/UnitTests.timeout := eternal'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (values: debug, info, warning, error, none; default: info)
  --use-bundler           Option to use `bundle exec` for `pod` calls
  --tests-timeout &lt;tests-timeout&gt;
                          (Optional) Default timeout for test targets (short|moderate|long|eternal) (values: short, moderate, long, eternal)
  --podspec &lt;podspec&gt;     podspec.json
  --subspecs &lt;subspecs&gt;   Subspecs list
  -h, --help              Show help information.
</code></pre></div>
<p dir="auto">arm64sim. Parses all pods same way like <code>generate</code> and replaces frameworks and libraries with patched if required.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="OVERVIEW: Converts existing frameworks and static libs to arm64 simulator

USAGE: bazelpods arm64sim [&lt;options&gt;] --src &lt;src&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically.
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (default: info)
  --pods-json &lt;pods-json&gt; Pods.json (default: Pods/Pods.json)
  --subspecs &lt;subspecs&gt;   Subspecs list
  --force                 By default it will run only on arm64 host. Use this option to override.
  -h, --help              Show help information."><pre class="notranslate"><code>OVERVIEW: Converts existing frameworks and static libs to arm64 simulator

USAGE: bazelpods arm64sim [&lt;options&gt;] --src &lt;src&gt;

OPTIONS:
  --src &lt;src&gt;             Sources root where Pods directory located (or renamed by podsRoot)
  --platforms &lt;platforms&gt; Space separated platforms.
                          Valid values are: ios, osx, tvos, watchos. (default: ios)
  --min-ios &lt;min-ios&gt;     Minimum iOS version (default: 13.0)
  --patches &lt;patches&gt;     Patches. It will be applied in the order listed here.
                          Available options: bundle_deduplicate, arm64_to_sim, arm64_to_sim_forced, missing_sdks, user_options.
                          user_options requires --user-options configured.
                          If 'user_options' not specified, but --user_options exist, user_options patch are applied automatically.
  --user-options &lt;user-options&gt;
                          User extra options.
                          Supported fields: 'sdk_frameworks', 'sdk_dylibs', 'weak_sdk_frameworks', 'vendored_libraries', 'vendored_frameworks', 'vendored_xcframeworks', 'testonly', 'link_dynamic'.
                          Supported operators: '+=' (append), '-=' (delete), ':=' (replace).
                          Example:
                          'SomePod.sdk_dylibs += something,something'
                          'SomePod.testonly := true'
                          Platform specific:
                          'SomePod.platform_ios.sdk_dylibs += something,something'
  --deps-prefix &lt;deps-prefix&gt;
                          Dependencies prefix (default: //Pods)
  --pods-root &lt;pods-root&gt; Pods root relative to workspace. Used for headers search paths (default: Pods)
  -f, --frameworks        Packaging pods in dynamic frameworks if possible (same as `use_frameworks!`)
  --no-concurrency        Disable concurrency.
  --log-level &lt;log-level&gt; Log level (debug|info|warning|error|none) (default: info)
  --pods-json &lt;pods-json&gt; Pods.json (default: Pods/Pods.json)
  --subspecs &lt;subspecs&gt;   Subspecs list
  --force                 By default it will run only on arm64 host. Use this option to override.
  -h, --help              Show help information.
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">🤔 History and motivation</h3><a id="user-content--history-and-motivation" class="anchor" aria-label="Permalink: 🤔 History and motivation" href="#-history-and-motivation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are two existing wonderful alternatives to this project: <a href="https://github.com/bazel-ios/cocoapods-bazel">cocoapods-bazel</a> and <a href="https://github.com/pinterest/PodToBUILD">PodToBUILD</a>.</p>
<p dir="auto"><code>cocoapods-bazel</code> generates BUILD files based on targets from <code>Pods.xcodeproj</code>.<br>
As a result of this, we will have some aggregated targets needed for Xcode but redundant for Bazel.<br>
These targets cause issues with resources and module name resolving.<br>
For example, currently, it's not working out of the box for a custom Firebase setup.</p>
<p dir="auto"><code>PodToBUILD</code>'s main idea is to generate BUILD files directly from .podspec info and <strong>it's great!</strong><br>
Unfortunately, out of the box, it cannot resolve the whole dependency tree with private pods as Cocoapods do.<br>
We can solve it by letting Cocoapods do its work and vendorise pods after. (something like <a href="https://github.com/pinterest/PodToBUILD/pull/216/files">this</a>)<br>
Another problem is "mixed code" (Swift + Objective-C). It's still <a href="https://github.com/pinterest/PodToBUILD#does-it-work-with-swift"><code>in development</code></a>, so you cannot resolve it with reasonable effort.<br>
Meanwhile, <a href="https://github.com/bazel-ios/rules_ios"><code>rules_ios</code></a> already supports it.</p>
<p dir="auto"><code>BazelPods</code> uses best of all worlds.<br>
Let Cocoapods download, resolve and setup everything for us. After that, BazelPods will generate <code>BUILD</code> files from .podspecs with only needed subspecs with rules from <a href="https://github.com/bazel-ios/rules_ios"><code>rules_ios</code></a>. Written in Swift, so it will do it really fast.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Contributing and issues</h2><a id="user-content-contributing-and-issues" class="anchor" aria-label="Permalink: Contributing and issues" href="#contributing-and-issues"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>make xcodeproj</code>
Just contribute and report your issues</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Credits</h2><a id="user-content-credits" class="anchor" aria-label="Permalink: Credits" href="#credits"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/pinterest/PodToBUILD"><code>PodToBUILD</code></a></li>
<li><a href="https://github.com/bazel-ios/rules_ios"><code>rules_ios</code></a></li>
<li><a href="https://github.com/bazel-ios/cocoapods-bazel"><code>cocoapods-bazel</code></a></li>
<li><a href="https://github.com/WeijunDeng/xcodeproj2bazel"><code>xcodeproj2bazel</code></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h6 class="heading-element" dir="auto">Powered by <a href="https://github.com/sergeykhliustin">sergeykhliustin</a></h6><a id="user-content-powered-by-sergeykhliustin" class="anchor" aria-label="Permalink: Powered by sergeykhliustin" href="#powered-by-sergeykhliustin"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
</article></div>