<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Ruby Rules for Bazel</h1><a id="user-content-ruby-rules-for-bazel" class="anchor" aria-label="Permalink: Ruby Rules for Bazel" href="#ruby-rules-for-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This repository hosts <a href="https://www.ruby-lang.org" rel="nofollow">Ruby</a> language ruleset for <a href="https://bazel.build" rel="nofollow">Bazel</a>.</p>
<p dir="auto">The ruleset is known to work with:</p>
<ul dir="auto">
<li>Bazel 8 using WORKSPACE and Bzlmod <em>(tested on CI)</em>.</li>
<li>Bazel 7 using WORKSPACE and Bzlmod <em>(no longer tested on CI)</em>.</li>
<li>Bazel 6 using WORKSPACE and Bzlmod <em>(no longer tested on CI)</em>.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Getting Started</h2><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting Started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">WORKSPACE</h3><a id="user-content-workspace" class="anchor" aria-label="Permalink: WORKSPACE" href="#workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Install the ruleset following WORKSPACE instructions on the <a href="https://github.com/bazel-contrib/rules_ruby/releases/tag/v0.3.0">latest release</a>.</li>
<li>Download and install Ruby:</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# WORKSPACE
load(&quot;@rules_ruby//ruby:deps.bzl&quot;, &quot;rb_register_toolchains&quot;)

rb_register_toolchains(
    version = &quot;3.1.6&quot;,
    # alternatively, load version from .ruby-version file
    # version_file = &quot;//:.ruby-version&quot;,
)"><pre><span class="pl-c"># WORKSPACE</span>
<span class="pl-en">load</span>(<span class="pl-s">"@rules_ruby//ruby:deps.bzl"</span>, <span class="pl-s">"rb_register_toolchains"</span>)

<span class="pl-en">rb_register_toolchains</span>(
    <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"3.1.6"</span>,
    <span class="pl-c"># alternatively, load version from .ruby-version file</span>
    <span class="pl-c"># version_file = "//:.ruby-version",</span>
)</pre></div>
<ol start="3" dir="auto">
<li><em>(Optional)</em> Download and install Bundler dependencies:</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# WORKSPACE
load(&quot;@rules_ruby//ruby:deps.bzl&quot;, &quot;rb_bundle_fetch&quot;)

rb_bundle_fetch(
    name = &quot;bundle&quot;,
    gemfile = &quot;//:Gemfile&quot;,
    gemfile_lock = &quot;//:Gemfile.lock&quot;,
)"><pre><span class="pl-c"># WORKSPACE</span>
<span class="pl-en">load</span>(<span class="pl-s">"@rules_ruby//ruby:deps.bzl"</span>, <span class="pl-s">"rb_bundle_fetch"</span>)

<span class="pl-en">rb_bundle_fetch</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"bundle"</span>,
    <span class="pl-s1">gemfile</span> <span class="pl-c1">=</span> <span class="pl-s">"//:Gemfile"</span>,
    <span class="pl-s1">gemfile_lock</span> <span class="pl-c1">=</span> <span class="pl-s">"//:Gemfile.lock"</span>,
)</pre></div>
<ol start="4" dir="auto">
<li>Start defining your library, binary and test targets in <code>BUILD</code> files.</li>
</ol>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bzlmod</h3><a id="user-content-bzlmod" class="anchor" aria-label="Permalink: Bzlmod" href="#bzlmod"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ol dir="auto">
<li>Install ruleset following Bzlmod instructions on the <a href="https://github.com/bazel-contrib/rules_ruby/releases/tag/v0.3.0">latest release</a>.</li>
<li>Download and install Ruby:</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# MODULE.bazel
ruby = use_extension(&quot;@rules_ruby//ruby:extensions.bzl&quot;, &quot;ruby&quot;)
ruby.toolchain(
    name = &quot;ruby&quot;,
    version = &quot;3.0.6&quot;,
    # alternatively, load version from .ruby-version file
    # version_file = &quot;//:.ruby-version&quot;,
)
use_repo(ruby, &quot;ruby&quot;)"><pre><span class="pl-c"># MODULE.bazel</span>
<span class="pl-s1">ruby</span> <span class="pl-c1">=</span> <span class="pl-en">use_extension</span>(<span class="pl-s">"@rules_ruby//ruby:extensions.bzl"</span>, <span class="pl-s">"ruby"</span>)
<span class="pl-s1">ruby</span>.<span class="pl-c1">toolchain</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"ruby"</span>,
    <span class="pl-s1">version</span> <span class="pl-c1">=</span> <span class="pl-s">"3.0.6"</span>,
    <span class="pl-c"># alternatively, load version from .ruby-version file</span>
    <span class="pl-c"># version_file = "//:.ruby-version",</span>
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">ruby</span>, <span class="pl-s">"ruby"</span>)</pre></div>
<ol start="3" dir="auto">
<li><em>(Optional)</em> Download and install Bundler dependencies:</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# MODULE.bazel
ruby.bundle_fetch(
    name = &quot;bundle&quot;,
    gemfile = &quot;//:Gemfile&quot;,
    gemfile_lock = &quot;//:Gemfile.lock&quot;,
)
use_repo(ruby, &quot;bundle&quot;, &quot;ruby_toolchains&quot;)"><pre><span class="pl-c"># MODULE.bazel</span>
<span class="pl-s1">ruby</span>.<span class="pl-c1">bundle_fetch</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"bundle"</span>,
    <span class="pl-s1">gemfile</span> <span class="pl-c1">=</span> <span class="pl-s">"//:Gemfile"</span>,
    <span class="pl-s1">gemfile_lock</span> <span class="pl-c1">=</span> <span class="pl-s">"//:Gemfile.lock"</span>,
)
<span class="pl-en">use_repo</span>(<span class="pl-s1">ruby</span>, <span class="pl-s">"bundle"</span>, <span class="pl-s">"ruby_toolchains"</span>)</pre></div>
<ol start="4" dir="auto">
<li>Register Ruby toolchains:</li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# MODULE.bazel
register_toolchains(&quot;@ruby_toolchains//:all&quot;)"><pre><span class="pl-c"># MODULE.bazel</span>
<span class="pl-en">register_toolchains</span>(<span class="pl-s">"@ruby_toolchains//:all"</span>)</pre></div>
<ol start="4" dir="auto">
<li>Start defining your library, binary and test targets in <code>BUILD</code> files.</li>
</ol>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Documentation</h2><a id="user-content-documentation" class="anchor" aria-label="Permalink: Documentation" href="#documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>See <a href="docs/repository_rules.md">repository rules</a> for the documentation of <code>WORKSPACE</code> rules.</li>
<li>See <a href="docs/rules.md">rules</a> for the documentation of <code>BUILD</code> rules.</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Examples</h2><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See <a href="examples/"><code>examples</code></a> directory for a comprehensive set of examples how to use the ruleset.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Toolchains</h2><a id="user-content-toolchains" class="anchor" aria-label="Permalink: Toolchains" href="#toolchains"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The following toolchains are known to work and tested on CI.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Ruby</th>
<th>Linux</th>
<th>macOS</th>
<th>Windows</th>
</tr>
</thead>
<tbody>
<tr>
<td>MRI 3.5</td>
<td>🟩</td>
<td>🟩</td>
<td>🟥</td>
</tr>
<tr>
<td>MRI 3.4</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>MRI 3.3</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>MRI 3.2</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>JRuby 10.0</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>TruffleRuby 24.0</td>
<td>🟩</td>
<td>🟩</td>
<td>🟥</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto">The following toolchains were previously known to work but <em>no longer tested on CI</em>.</p>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Ruby</th>
<th>Linux</th>
<th>macOS</th>
<th>Windows</th>
</tr>
</thead>
<tbody>
<tr>
<td>MRI 3.1</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>MRI 3.0</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>MRI 2.7</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>JRuby 9.4</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>JRuby 9.3</td>
<td>🟩</td>
<td>🟩</td>
<td>🟩</td>
</tr>
<tr>
<td>TruffleRuby 23.0</td>
<td>🟩</td>
<td>🟩</td>
<td>🟥</td>
</tr>
<tr>
<td>TruffleRuby 22.0</td>
<td>🟩</td>
<td>🟩</td>
<td>🟥</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">MRI</h3><a id="user-content-mri" class="anchor" aria-label="Permalink: MRI" href="#mri"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On Linux and macOS, <a href="https://github.com/rbenv/ruby-build">ruby-build</a> is used to install MRI from sources.
Keep in mind, that it takes some time for compilation to complete.</p>
<p dir="auto">On Windows, <a href="https://rubyinstaller.org" rel="nofollow">RubyInstaller</a> is used to install MRI.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">JRuby</h3><a id="user-content-jruby" class="anchor" aria-label="Permalink: JRuby" href="#jruby"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On all operating systems, JRuby is downloaded manually.
It uses Bazel runtime Java toolchain as JDK.
JRuby is currently the only toolchain that supports <a href="https://bazel.build/remote/rbe" rel="nofollow">Remote Build Execution</a>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">TruffleRuby</h3><a id="user-content-truffleruby" class="anchor" aria-label="Permalink: TruffleRuby" href="#truffleruby"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On Linux and macOS, <a href="https://github.com/rbenv/ruby-build">ruby-build</a> is used to install TruffleRuby.
Windows is not supported.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Other</h3><a id="user-content-other" class="anchor" aria-label="Permalink: Other" href="#other"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">On Linux and macOS, you can potentially use any Ruby distribution that is supported by <a href="https://github.com/rbenv/ruby-build">ruby-build</a>.
However, some are known not to work or work only partially (e.g. mRuby has no bundler support).</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Known Issues</h2><a id="user-content-known-issues" class="anchor" aria-label="Permalink: Known Issues" href="#known-issues"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>JRuby/TruffleRuby might need <code>HOME</code> variable exposed.
See <a href="examples/gem/.bazelrc"><code>examples/gem/.bazelrc</code></a> to learn how to do that.
This is to be fixed in <a href="https://github.com/jruby/jruby/issues/5661" data-hovercard-type="issue" data-hovercard-url="/jruby/jruby/issues/5661/hovercard"><code>jruby/jruby#5661</code></a> and <a href="https://github.com/oracle/truffleruby/issues/2784" data-hovercard-type="issue" data-hovercard-url="/oracle/truffleruby/issues/2784/hovercard"><code>oracle/truffleruby#2784</code></a>.</li>
<li>JRuby might fail with <code>Errno::EACCES: Permission denied - NUL</code> error on Windows.
You need to configure JDK to allow proper access.
This is described in <a href="https://github.com/jruby/jruby/issues/7182#issuecomment-1112953015" data-hovercard-type="issue" data-hovercard-url="/jruby/jruby/issues/7182/hovercard"><code>jruby/jruby#7182</code></a>.</li>
<li>RuboCop &lt; 1.55 crashes with <code>LoadError</code> on Windows.
This is fixed in <a href="https://github.com/rubocop/rubocop/pull/12062" data-hovercard-type="pull_request" data-hovercard-url="/rubocop/rubocop/pull/12062/hovercard"><code>rubocop/rubocop#12062</code></a>.</li>
<li>REPL doesn't work when used with <code>bazel test</code>.
To work it around, use a debugger with remote client support such as <a href="https://github.com/ruby/debug"><code>ruby/debug</code></a> .
See <a href="examples/gem/.bazelrc"><code>examples/gem/.bazelrc</code></a> to learn how to do that.</li>
<li>Some gems contain files with spaces which cause Bazel error <code>link or target filename contains space</code>.
To work it around, use <a href="https://bazel.build/reference/command-line-reference#flag--experimental_inprocess_symlink_creation" rel="nofollow"><code>--experimental_inprocess_symlink_creation</code></a> Bazel flag.
See <a href="https://github.com/bazelbuild/bazel/issues/4327" data-hovercard-type="issue" data-hovercard-url="/bazelbuild/bazel/issues/4327/hovercard"><code>bazelbuild/bazel#4327</code></a> for more details.</li>
</ul>
</article></div>