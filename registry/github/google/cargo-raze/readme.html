<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">cargo-raze: Bazel BUILD generation for Rust Crates</h1><a id="user-content-cargo-raze-bazel-build-generation-for-rust-crates" class="anchor" aria-label="Permalink: cargo-raze: Bazel BUILD generation for Rust Crates" href="#cargo-raze-bazel-build-generation-for-rust-crates"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><strong>cargo-raze is currently an unmaintained and unsupported product</strong>.</p>
<p dir="auto"><a href="https://bazelbuild.github.io/rules_rust/crate_universe.html" rel="nofollow"><code>crate_universe</code> in <code>rules_rust</code></a> is a supported and maintained product with similar aims.</p>
<p dir="auto">We believe <code>crate_universe</code> supports all of the functionality which was supported by cargo-raze. We encourage you to try to migrate to it. If you find missing support, or bugs, please file an issue or PR against <code>rules_rust</code>.</p>
<p dir="auto"><code>cargo-raze</code> has been archived to reflect the reality that PRs and Issues filed against it are unlikely to be addressed.</p>
<p dir="auto">Please reach out to <a href="https://bazelbuild.slack.com/archives/CDCMRLS23" rel="nofollow">#rust</a> in the <a href="https://slack.bazel.build" rel="nofollow">Bazel Slack</a> if you are interested in taking over maintenance of this project.</p>
<p dir="auto"><a href="https://buildkite.com/bazel/cargo-raze?branch=main" rel="nofollow"><img src="https://camo.githubusercontent.com/0bb373203614a2910184c7d86fb136bf71259bbed8735d4c04b9419ca4344f42/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f62643839343537303061326530646462303934623166656661626465373163623831626164396139336262373734633338342e7376673f6272616e63683d6d61696e" alt="Build status" data-canonical-src="https://badge.buildkite.com/bd8945700a2e0ddb094b1fefabde71cb81bad9a93bb774c384.svg?branch=main" style="max-width: 100%;"></a></p>
<p dir="auto">An experimental support Cargo plugin for distilling a workspace-level
Cargo.toml into BUILD targets that code using <a href="https://github.com/bazelbuild/rules_rust">rules_rust</a>
can depend on directly.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Disclaimer</h2><a id="user-content-disclaimer" class="anchor" aria-label="Permalink: Disclaimer" href="#disclaimer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This is not an official Google product (experimental or otherwise), it is just code that happens to be owned by Google.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Overview</h2><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project synthesizes the dependency resolution logic and some of the
functionality of Cargo such as features and build scripts into executable
rules that Bazel can run to compile Rust crates. Though the standard rules_rust
rules can be used to compile Rust code from scratch, the fine granularity of the
dependency ecosystem makes transforming dependency trees based on that ecosystem
onerous, even for code with few dependencies.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">cargo-raze can generate buildable targets in one of two modes: Vendoring, or
Non-Vendoring. In the vendoring mode, developers use the common <code>cargo vendor</code>
subcommand to retrieve the dependencies indicated by their workspace Cargo.toml into
directories that cargo-raze then populates with BUILD files. In the
non-vendoring mode, cargo-raze generates a flat list of BUILD files, and a
workspace-level macro that can be invoked in the WORKSPACE file to pull down the
dependencies automatically in similar fashion to Cargo itself.</p>
<p dir="auto">In both cases, the first step is to decide where to situate the Cargo
dependencies in the workspace. This library was designed with monorepos in mind,
where an organization decides upon a set of dependencies that everyone points
at. It is intended that stakeholders in the dependencies collaborate to upgrade
dependencies atomically, and fix breakages across their codebase simultaneously.
In the event that this isn't feasible, it is still possible to use cargo-raze in
a decentralized scenario, but it's unlikely that such decoupled repositories
would interact well together with the current implementation.</p>
<p dir="auto">Regardless of the approach chosen, the rust_rules should be brought in to the
WORKSPACE. Here is an example:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

http_archive(
    name = &quot;rules_rust&quot;,
    sha256 = &quot;accb5a89cbe63d55dcdae85938e56ff3aa56f21eb847ed826a28a83db8500ae6&quot;,
    strip_prefix = &quot;rules_rust-9aa49569b2b0dacecc51c05cee52708b7255bd98&quot;,
    urls = [
        # Main branch as of 2021-02-19
        &quot;https://github.com/bazelbuild/rules_rust/archive/9aa49569b2b0dacecc51c05cee52708b7255bd98.tar.gz&quot;,
    ],
)

load(&quot;@rules_rust//rust:repositories.bzl&quot;, &quot;rust_repositories&quot;)

rust_repositories(edition=&quot;2018&quot;)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_rust"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"accb5a89cbe63d55dcdae85938e56ff3aa56f21eb847ed826a28a83db8500ae6"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"rules_rust-9aa49569b2b0dacecc51c05cee52708b7255bd98"</span>,
    <span class="pl-s1">urls</span> <span class="pl-c1">=</span> [
        <span class="pl-c"># Main branch as of 2021-02-19</span>
        <span class="pl-s">"https://github.com/bazelbuild/rules_rust/archive/9aa49569b2b0dacecc51c05cee52708b7255bd98.tar.gz"</span>,
    ],
)

<span class="pl-en">load</span>(<span class="pl-s">"@rules_rust//rust:repositories.bzl"</span>, <span class="pl-s">"rust_repositories"</span>)

<span class="pl-en">rust_repositories</span>(<span class="pl-s1">edition</span><span class="pl-c1">=</span><span class="pl-s">"2018"</span>)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Generate a Cargo.toml</h3><a id="user-content-generate-a-cargotoml" class="anchor" aria-label="Permalink: Generate a Cargo.toml" href="#generate-a-cargotoml"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For Bazel only projects, users should first generate a standard Cargo.toml
with the dependencies of interest. Take care to include a <code>[lib]</code> directive
so that Cargo does not complain about missing source files for this mock
crate. Here is an example:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package]
name = &quot;compile_with_bazel&quot;
version = &quot;0.0.0&quot;

# Mandatory (or Cargo tooling is unhappy)
[lib]
path = &quot;fake_lib.rs&quot;

[dependencies]
log = &quot;=0.3.6&quot;
"><pre>[<span class="pl-en">package</span>]
<span class="pl-smi">name</span> = <span class="pl-s"><span class="pl-pds">"</span>compile_with_bazel<span class="pl-pds">"</span></span>
<span class="pl-smi">version</span> = <span class="pl-s"><span class="pl-pds">"</span>0.0.0<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">#</span> Mandatory (or Cargo tooling is unhappy)</span>
[<span class="pl-en">lib</span>]
<span class="pl-smi">path</span> = <span class="pl-s"><span class="pl-pds">"</span>fake_lib.rs<span class="pl-pds">"</span></span>

[<span class="pl-en">dependencies</span>]
<span class="pl-smi">log</span> = <span class="pl-s"><span class="pl-pds">"</span>=0.3.6<span class="pl-pds">"</span></span>
</pre></div>
<p dir="auto">Once the standard Cargo.toml is in place, add the <code>[package.metadata.raze]</code>
directives per the next section.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using existing Cargo.toml</h3><a id="user-content-using-existing-cargotoml" class="anchor" aria-label="Permalink: Using existing Cargo.toml" href="#using-existing-cargotoml"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Almost all canonical cargo setups should be able to function inplace with
<code>cargo-raze</code>. Assuming the Cargo workspace is now nested under a Bazel workspace,
Users can simply add <a href="./impl/src/settings.rs">RazeSettings</a> to their Cargo.toml
files to be used for generating Bazel files</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Above this line should be the contents of your Cargo.toml file

[package.metadata.raze]
# The path at which to write output files.
#
# `cargo raze` will generate Bazel-compatible BUILD files into this path.
# This can either be a relative path (e.g. &quot;foo/bar&quot;), relative to this
# Cargo.toml file; or relative to the Bazel workspace root (e.g. &quot;//foo/bar&quot;).
workspace_path = &quot;//cargo&quot;

# This causes aliases for dependencies to be rendered in the BUILD
# file located next to this `Cargo.toml` file.
package_aliases_dir = &quot;.&quot;

# The set of targets to generate BUILD rules for.
targets = [
    &quot;x86_64-apple-darwin&quot;,
    &quot;x86_64-pc-windows-msvc&quot;,
    &quot;x86_64-unknown-linux-gnu&quot;,
]

# The two acceptable options are &quot;Remote&quot; and &quot;Vendored&quot; which
# is used to indicate whether the user is using a non-vendored or
# vendored set of dependencies.
genmode = &quot;Remote&quot;"><pre><span class="pl-c"><span class="pl-c">#</span> Above this line should be the contents of your Cargo.toml file</span>

[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>]
<span class="pl-c"><span class="pl-c">#</span> The path at which to write output files.</span>
<span class="pl-c"><span class="pl-c">#</span></span>
<span class="pl-c"><span class="pl-c">#</span> `cargo raze` will generate Bazel-compatible BUILD files into this path.</span>
<span class="pl-c"><span class="pl-c">#</span> This can either be a relative path (e.g. "foo/bar"), relative to this</span>
<span class="pl-c"><span class="pl-c">#</span> Cargo.toml file; or relative to the Bazel workspace root (e.g. "//foo/bar").</span>
<span class="pl-smi">workspace_path</span> = <span class="pl-s"><span class="pl-pds">"</span>//cargo<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">#</span> This causes aliases for dependencies to be rendered in the BUILD</span>
<span class="pl-c"><span class="pl-c">#</span> file located next to this `Cargo.toml` file.</span>
<span class="pl-smi">package_aliases_dir</span> = <span class="pl-s"><span class="pl-pds">"</span>.<span class="pl-pds">"</span></span>

<span class="pl-c"><span class="pl-c">#</span> The set of targets to generate BUILD rules for.</span>
<span class="pl-smi">targets</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>x86_64-apple-darwin<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>x86_64-pc-windows-msvc<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>x86_64-unknown-linux-gnu<span class="pl-pds">"</span></span>,
]

<span class="pl-c"><span class="pl-c">#</span> The two acceptable options are "Remote" and "Vendored" which</span>
<span class="pl-c"><span class="pl-c">#</span> is used to indicate whether the user is using a non-vendored or</span>
<span class="pl-c"><span class="pl-c">#</span> vendored set of dependencies.</span>
<span class="pl-smi">genmode</span> = <span class="pl-s"><span class="pl-pds">"</span>Remote<span class="pl-pds">"</span></span></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Cargo workspace projects</h4><a id="user-content-cargo-workspace-projects" class="anchor" aria-label="Permalink: Cargo workspace projects" href="#cargo-workspace-projects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In projects that use <a href="cargo_workspaces">cargo workspaces</a> users should organize
all of their <code>raze</code> settings into the <code>[workspace.metadata.raze]</code> field in the
top level <code>Cargo.toml</code> file which contains the <code>[workspace]</code> definition. These
settings should be identical to the ones seen in <code>[package.metadata.raze]</code> in
<a href="#using-existing-cargotoml">the previous section</a>. However, crate settings may still
be placed in the <code>Cargo.toml</code> files of the workspace members:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Above this line should be the contents of your package's Cargo.toml file

# Note that `some-dependency` is the name of an example dependency and
# `&lt;0.3.0` is a semver version for the dependency crate's version. This
# should always be compaitble in some way with the dependency version
# specified in the `[dependencies]` section of the package defined in
# this file
[package.metadata.raze.crates.some-dependency.'&lt;0.3.0']
additional_flags = [
    &quot;--cfg=optional_feature_a&quot;,
    &quot;--cfg=optional_feature_b&quot;,
]

# This demonstrates that multiple crate settings may be defined.
[package.metadata.raze.crates.some-other-dependency.'*']
additional_flags = [
    &quot;--cfg=special_feature&quot;,
]"><pre><span class="pl-c"><span class="pl-c">#</span> Above this line should be the contents of your package's Cargo.toml file</span>

<span class="pl-c"><span class="pl-c">#</span> Note that `some-dependency` is the name of an example dependency and</span>
<span class="pl-c"><span class="pl-c">#</span> `&lt;0.3.0` is a semver version for the dependency crate's version. This</span>
<span class="pl-c"><span class="pl-c">#</span> should always be compaitble in some way with the dependency version</span>
<span class="pl-c"><span class="pl-c">#</span> specified in the `[dependencies]` section of the package defined in</span>
<span class="pl-c"><span class="pl-c">#</span> this file</span>
[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">some-dependency</span>.<span class="pl-en">'&lt;0</span>.<span class="pl-en">3</span>.<span class="pl-en">0'</span>]
<span class="pl-smi">additional_flags</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=optional_feature_a<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=optional_feature_b<span class="pl-pds">"</span></span>,
]

<span class="pl-c"><span class="pl-c">#</span> This demonstrates that multiple crate settings may be defined.</span>
[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">some-other-dependency</span>.<span class="pl-en">'*'</span>]
<span class="pl-smi">additional_flags</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=special_feature<span class="pl-pds">"</span></span>,
]</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Remote Dependency Mode</h3><a id="user-content-remote-dependency-mode" class="anchor" aria-label="Permalink: Remote Dependency Mode" href="#remote-dependency-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In Remote mode, a directory similar to the vendoring mode is selected. In this
case, though, it contains only BUILD files, a vendoring instruction for the
WORKSPACE, and aliases to the explicit dependencies. Slightly different plumbing
is required.</p>
<p dir="auto">This tells Raze not to expect the dependencies to be vendored and to generate
different files.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Generate buildable targets</h4><a id="user-content-generate-buildable-targets" class="anchor" aria-label="Permalink: Generate buildable targets" href="#generate-buildable-targets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First, install cargo-raze.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cargo install cargo-raze"><pre>$ cargo install cargo-raze</pre></div>
<p dir="auto">Next, execute cargo raze from within the cargo directory</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cargo raze"><pre>$ cargo raze</pre></div>
<p dir="auto">Finally, invoke the remote library fetching function within your WORKSPACE:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;//cargo:crates.bzl&quot;, &quot;raze_fetch_remote_crates&quot;)

# Note that this method's name depends on your gen_workspace_prefix setting.
# `raze` is the default prefix.
raze_fetch_remote_crates()"><pre><span class="pl-en">load</span>(<span class="pl-s">"//cargo:crates.bzl"</span>, <span class="pl-s">"raze_fetch_remote_crates"</span>)

<span class="pl-c"># Note that this method's name depends on your gen_workspace_prefix setting.</span>
<span class="pl-c"># `raze` is the default prefix.</span>
<span class="pl-en">raze_fetch_remote_crates</span>()</pre></div>
<p dir="auto">This tells Bazel where to get the dependencies from, and how to build them:
using the files generated into <code>//cargo</code>.</p>
<p dir="auto">You can depend on any <em>explicit</em> dependencies in any Rust rule by depending on
<code>//cargo:your_dependency_name</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Vendoring Mode</h3><a id="user-content-vendoring-mode" class="anchor" aria-label="Permalink: Vendoring Mode" href="#vendoring-mode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In Vendoring mode, a root directly is selected that will house the vendored
dependencies and become the gateway to those build rules. <code>//cargo</code> is
conventional, but <code>//third_party/cargo</code> may be desirable to satisfy
organizational needs. Vendoring directly into root isn't well supported due to
implementation-specific idiosyncracies, but it may be supported in the future.
From here forward, <code>//cargo</code> will be the assumed directory.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Generate buildable targets (vendored)</h4><a id="user-content-generate-buildable-targets-vendored" class="anchor" aria-label="Permalink: Generate buildable targets (vendored)" href="#generate-buildable-targets-vendored"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">First, install the required tools for vendoring and generating BUILDable
targets.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cargo install cargo-raze"><pre>$ cargo install cargo-raze</pre></div>
<p dir="auto">Following that, vendor your dependencies from within the cargo/ directory. This
will also update your <code>Cargo.lock</code> file.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cargo vendor --versioned-dirs"><pre>$ cargo vendor --versioned-dirs</pre></div>
<p dir="auto">Finally, generate your BUILD files, again from within the <code>cargo/</code> directory</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cargo raze"><pre>$ cargo raze</pre></div>
<p dir="auto">You can now depend on any <em>explicit</em> dependencies in any Rust rule by depending on
<code>//cargo:your_dependency_name</code>.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Using cargo-raze through Bazel</h3><a id="user-content-using-cargo-raze-through-bazel" class="anchor" aria-label="Permalink: Using cargo-raze through Bazel" href="#using-cargo-raze-through-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Cargo-raze can be built entirely in Bazel and used without needing to setup cargo
on the host machine. To do so, simply add the following to the WORKSPACE file in
your project:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@bazel_tools//tools/build_defs/repo:http.bzl&quot;, &quot;http_archive&quot;)

http_archive(
    name = &quot;cargo_raze&quot;,
    sha256 = &quot;c664e258ea79e7e4ec2f2b57bca8b1c37f11c8d5748e02b8224810da969eb681&quot;,
    strip_prefix = &quot;cargo-raze-0.11.0&quot;,
    url = &quot;https://github.com/google/cargo-raze/archive/v0.11.0.tar.gz&quot;,
)

load(&quot;@cargo_raze//:repositories.bzl&quot;, &quot;cargo_raze_repositories&quot;)

cargo_raze_repositories()

load(&quot;@cargo_raze//:transitive_deps.bzl&quot;, &quot;cargo_raze_transitive_deps&quot;)

cargo_raze_transitive_deps()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@bazel_tools//tools/build_defs/repo:http.bzl"</span>, <span class="pl-s">"http_archive"</span>)

<span class="pl-en">http_archive</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"cargo_raze"</span>,
    <span class="pl-s1">sha256</span> <span class="pl-c1">=</span> <span class="pl-s">"c664e258ea79e7e4ec2f2b57bca8b1c37f11c8d5748e02b8224810da969eb681"</span>,
    <span class="pl-s1">strip_prefix</span> <span class="pl-c1">=</span> <span class="pl-s">"cargo-raze-0.11.0"</span>,
    <span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/google/cargo-raze/archive/v0.11.0.tar.gz"</span>,
)

<span class="pl-en">load</span>(<span class="pl-s">"@cargo_raze//:repositories.bzl"</span>, <span class="pl-s">"cargo_raze_repositories"</span>)

<span class="pl-en">cargo_raze_repositories</span>()

<span class="pl-en">load</span>(<span class="pl-s">"@cargo_raze//:transitive_deps.bzl"</span>, <span class="pl-s">"cargo_raze_transitive_deps"</span>)

<span class="pl-en">cargo_raze_transitive_deps</span>()</pre></div>
<p dir="auto">With this in place, users can run the <code>@cargo_raze//:raze</code> target to generate new BUILD
files. eg:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run @cargo_raze//:raze -- --manifest-path=$(realpath /Cargo.toml)"><pre>bazel run @cargo_raze//:raze -- --manifest-path=<span class="pl-s"><span class="pl-pds">$(</span>realpath /Cargo.toml<span class="pl-pds">)</span></span></pre></div>
<p dir="auto">Note that users using the <code>vendored</code> genmode will still have to vendor their dependencies
somehow as <code>cargo-raze</code> does not currently do this for you.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Handling Unconventional Crates</h3><a id="user-content-handling-unconventional-crates" class="anchor" aria-label="Permalink: Handling Unconventional Crates" href="#handling-unconventional-crates"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Some crates execute a "build script", which, while technically unrestricted in
what it can do, usually does one of a few common things.</p>
<p dir="auto">All options noted below are enumerated in the
<a href="./impl/src/settings.rs">src/settings.rs</a> file.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Crates that generate files using locally known information</h4><a id="user-content-crates-that-generate-files-using-locally-known-information" class="anchor" aria-label="Permalink: Crates that generate files using locally known information" href="#crates-that-generate-files-using-locally-known-information"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In some cases, a crate uses only basic information in order to generate a Rust
source file. These build-scripts rules can actually be executed and used within
Bazel by including a directive in your Cargo.toml prior to generation:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.clang-sys.'0.21.1']
gen_buildrs = true"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">clang-sys</span>.<span class="pl-en">'0</span>.<span class="pl-en">21</span>.<span class="pl-en">1'</span>]
<span class="pl-smi">gen_buildrs</span> = <span class="pl-c1">true</span></pre></div>
<p dir="auto">This setting tells cargo-raze to generate a rust_binary target for the build
script and to direct its generated (OUT_DIR-style) outputs to the parent crate.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Crates that depend on certain flags being determined by a build script</h4><a id="user-content-crates-that-depend-on-certain-flags-being-determined-by-a-build-script" class="anchor" aria-label="Permalink: Crates that depend on certain flags being determined by a build script" href="#crates-that-depend-on-certain-flags-being-determined-by-a-build-script"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Some build scripts conditionally emit directives to stdout that Cargo knows how
to propagate. Unfortunately, its not so simple to manage build-time generated
dependency information, so if the flags are statically known (perhaps, since the
compilation target is statically known), they can be provided from within the
Cargo.toml, in the following manner</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.unicase.'2.1.0']
additional_flags = [
    # Rustc is 1.15, enable all optional settings
    &quot;--cfg=__unicase__iter_cmp&quot;,
    &quot;--cfg=__unicase__defauler_hasher&quot;,
]"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">unicase</span>.<span class="pl-en">'2</span>.<span class="pl-en">1</span>.<span class="pl-en">0'</span>]
<span class="pl-smi">additional_flags</span> = [
    <span class="pl-c"><span class="pl-c">#</span> Rustc is 1.15, enable all optional settings</span>
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=__unicase__iter_cmp<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=__unicase__defauler_hasher<span class="pl-pds">"</span></span>,
]</pre></div>
<p dir="auto">Flags provided in this manner are directly handed to rustc. It may be helpful to
refer to the build-script section of the documentation to interpret build
scripts and stdout directives that are encountered, available here:
<a href="https://doc.rust-lang.org/cargo/reference/build-scripts.html" rel="nofollow">https://doc.rust-lang.org/cargo/reference/build-scripts.html</a></p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Crates that need system libraries</h4><a id="user-content-crates-that-need-system-libraries" class="anchor" aria-label="Permalink: Crates that need system libraries" href="#crates-that-need-system-libraries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">There are two ways to provide system libraries that a crate needs for
compilation. The first is to vendor the system library directly, craft a BUILD
rule for it, and add the dependency to the corresponding <code>-sys</code> crate. For
openssl, this may in part look like:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.openssl-sys.'0.9.24']
additional_flags = [
    # Vendored openssl is 1.0.2m
    &quot;--cfg=ossl102&quot;,
    &quot;--cfg=version=102&quot;,
]
additional_deps = [
    &quot;@//third_party/openssl:crypto&quot;,
    &quot;@//third_party/openssl:ssl&quot;,
]

[package.metadata.raze.crates.openssl.'0.10.2']
additional_flags = [
    # Vendored openssl is 1.0.2m
    &quot;--cfg=ossl102&quot;,
    &quot;--cfg=version=102&quot;,
    &quot;--cfg=ossl10x&quot;,
]"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">openssl-sys</span>.<span class="pl-en">'0</span>.<span class="pl-en">9</span>.<span class="pl-en">24'</span>]
<span class="pl-smi">additional_flags</span> = [
    <span class="pl-c"><span class="pl-c">#</span> Vendored openssl is 1.0.2m</span>
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=ossl102<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=version=102<span class="pl-pds">"</span></span>,
]
<span class="pl-smi">additional_deps</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>@//third_party/openssl:crypto<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>@//third_party/openssl:ssl<span class="pl-pds">"</span></span>,
]

[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">openssl</span>.<span class="pl-en">'0</span>.<span class="pl-en">10</span>.<span class="pl-en">2'</span>]
<span class="pl-smi">additional_flags</span> = [
    <span class="pl-c"><span class="pl-c">#</span> Vendored openssl is 1.0.2m</span>
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=ossl102<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=version=102<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>--cfg=ossl10x<span class="pl-pds">"</span></span>,
]</pre></div>
<p dir="auto">In some cases, directly wiring up a local system dependency may be preferable.
To do this, refer to the <code>new_local_repository</code> section of the Bazel
documentation. For a precompiled version of llvm in a WORKSPACE, this may look
something like:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="new_local_repository(
    name = &quot;llvm&quot;,
    build_file = &quot;BUILD.llvm.bazel&quot;,
    path = &quot;/usr/lib/llvm-3.9&quot;,
)"><pre><span class="pl-en">new_local_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"llvm"</span>,
    <span class="pl-s1">build_file</span> <span class="pl-c1">=</span> <span class="pl-s">"BUILD.llvm.bazel"</span>,
    <span class="pl-s1">path</span> <span class="pl-c1">=</span> <span class="pl-s">"/usr/lib/llvm-3.9"</span>,
)</pre></div>
<p dir="auto">In a few cases, the sys crate may need to be overridden entirely. This can be
facilitated by removing and supplementing dependencies in the Cargo.toml,
pre-generation:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.sdl2.'0.31.0']
skipped_deps = [
    &quot;sdl2-sys-0.31.0&quot;
]
additional_deps = [
    &quot;@//cargo/overrides/sdl2-sys:sdl2_sys&quot;
]"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">sdl2</span>.<span class="pl-en">'0</span>.<span class="pl-en">31</span>.<span class="pl-en">0'</span>]
<span class="pl-smi">skipped_deps</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>sdl2-sys-0.31.0<span class="pl-pds">"</span></span>
]
<span class="pl-smi">additional_deps</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>@//cargo/overrides/sdl2-sys:sdl2_sys<span class="pl-pds">"</span></span>
]</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Crates that supply useful binaries</h4><a id="user-content-crates-that-supply-useful-binaries" class="anchor" aria-label="Permalink: Crates that supply useful binaries" href="#crates-that-supply-useful-binaries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Some crates provide useful binaries that themselves can be used as part of a
compilation process: Bindgen is a great example. Bindgen produces Rust source
files by processing C or C++ files. A directive can be added to the Cargo.toml
to tell Bazel to expose such binaries for you:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.bindgen.'0.32.2']
gen_buildrs = true # needed to build bindgen
extra_aliased_targets = [
    &quot;cargo_bin_bindgen&quot;
]"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">bindgen</span>.<span class="pl-en">'0</span>.<span class="pl-en">32</span>.<span class="pl-en">2'</span>]
<span class="pl-smi">gen_buildrs</span> = <span class="pl-c1">true</span> <span class="pl-c"><span class="pl-c">#</span> needed to build bindgen</span>
<span class="pl-smi">extra_aliased_targets</span> = [
    <span class="pl-s"><span class="pl-pds">"</span>cargo_bin_bindgen<span class="pl-pds">"</span></span>
]</pre></div>
<p dir="auto">Cargo-raze prefixes binary targets with <code>cargo_bin_</code>, as although Cargo permits
binaries and libraries to share the same target name, Bazel disallows this.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Crates that only provide binaries</h4><a id="user-content-crates-that-only-provide-binaries" class="anchor" aria-label="Permalink: Crates that only provide binaries" href="#crates-that-only-provide-binaries"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Currently, cargo does not gather metadata about crates that do not provide any
libraries. This means that these specifying them in the <code>[dependencies]</code> section
of your <code>Cargo.toml</code> file will not result in generated Bazel targets. Cargo-raze
has a special field to handle these crates when using <code>genmode = "Remote"</code>:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.binary_deps]
wasm-bindgen-cli = &quot;0.2.68&quot;"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">binary_deps</span>]
<span class="pl-smi">wasm-bindgen-cli</span> = <span class="pl-s"><span class="pl-pds">"</span>0.2.68<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">In the snippet above, the <code>wasm-bindgen-cli</code> crate is defined as binary dependency
and Cargo-raze will ensure metadata for this and any other crate defined here are
included in the resulting output directory. Lockfiles for targets specified under
<code>[package.metadata.raze.binary_deps]</code> will be generated into a <code>lockfiles</code> directory inside the path
specified by <code>workspace_path</code>.</p>
<p dir="auto">Note that the <code>binary_deps</code> field can go in workspace <em>and</em> package metadata, however, only one
definition of a binary dependency can exist at a time. If you have multiple packages that depend
on a single binary dependency, that definition needs to be be moved to the workspace metadata.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Build scripts by default</h3><a id="user-content-build-scripts-by-default" class="anchor" aria-label="Permalink: Build scripts by default" href="#build-scripts-by-default"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Setting default_gen_buildrs to true will cause cargo-raze to generate build scripts
for all crates that require them:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze]
workspace_path = &quot;//cargo&quot;
genmode = &quot;Remote&quot;
default_gen_buildrs = true"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>]
<span class="pl-smi">workspace_path</span> = <span class="pl-s"><span class="pl-pds">"</span>//cargo<span class="pl-pds">"</span></span>
<span class="pl-smi">genmode</span> = <span class="pl-s"><span class="pl-pds">"</span>Remote<span class="pl-pds">"</span></span>
<span class="pl-smi">default_gen_buildrs</span> = <span class="pl-c1">true</span></pre></div>
<p dir="auto">This setting is a trade-off between convenience and correctness. By enabling it,
you should find many crates work without having to specify any flags explicitly,
and without having to manually enable individual build scripts. But by turning
it on, you are allowing all of the crates you are using to run arbitrary code at
build time, and the actions they perform may not be hermetic.</p>
<p dir="auto">Even with this setting enabled, you may still need to provide extra settings for
a few crates. For example, the ring crate needs access to the source tree at build
time:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.ring.'*']
compile_data_attr = &quot;glob([\&quot;**/*.der\&quot;])&quot;"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">ring</span>.<span class="pl-en">'*'</span>]
<span class="pl-smi">compile_data_attr</span> = <span class="pl-s"><span class="pl-pds">"</span>glob([<span class="pl-cce">\"</span>**/*.der<span class="pl-cce">\"</span>])<span class="pl-pds">"</span></span></pre></div>
<p dir="auto">If you wish to disable the build script on an individual crate, you can do so
as follows:</p>
<div class="highlight highlight-source-toml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="[package.metadata.raze.crates.some_dependency.'*']
gen_buildrs = false"><pre>[<span class="pl-en">package</span>.<span class="pl-en">metadata</span>.<span class="pl-en">raze</span>.<span class="pl-en">crates</span>.<span class="pl-en">some_dependency</span>.<span class="pl-en">'*'</span>]
<span class="pl-smi">gen_buildrs</span> = <span class="pl-c1">false</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">FAQ</h2><a id="user-content-faq" class="anchor" aria-label="Permalink: FAQ" href="#faq"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Why choose Bazel to build a Rust project?</h3><a id="user-content-why-choose-bazel-to-build-a-rust-project" class="anchor" aria-label="Permalink: Why choose Bazel to build a Rust project?" href="#why-choose-bazel-to-build-a-rust-project"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Bazel ("fast", "correct", choose two) is a battle-tested build system used by
Google to compile incredibly large, multilingual projects without duplicating
effort, and without compromising on correctness. It accomplishes this in part by
limiting what mechanisms a given compilation object can use to discover
dependencies and by forcing buildable units to express the complete set of
their dependencies. It expects two identical sets of build target inputs to produce a
byte-for-byte equivalent final result.</p>
<p dir="auto">In exchange, users are rewarded with a customizable and extensible build system
that compiles any kind of compilable target and allows expressing "unconventional
dependencies", such as Protobuf objects, precompiled graphics shaders, or
generated code, while remaining fast and correct.</p>
<p dir="auto">Its also probable (though not yet demonstrated with benchmarks) that large
applications built with Bazel's strengths in mind: highly granular build units,
will compile significantly faster as they are able to cache more aggressively
and avoid recompilation of as much code while iterating.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Why try to integrate Cargo's dependencies into this build tool?</h3><a id="user-content-why-try-to-integrate-cargos-dependencies-into-this-build-tool" class="anchor" aria-label="Permalink: Why try to integrate Cargo's dependencies into this build tool?" href="#why-try-to-integrate-cargos-dependencies-into-this-build-tool"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">For better or worse, the Rust ecosystem heavily depends on Cargo crates in order
to provide functionality that is often present in standard libraries. This is
actually a fantastic thing for the evolution of the language, as it describes a
structured process to stabilization (experimental crate -&gt; 1.0 crate -&gt; RFC -&gt;
inclusion in stdlib), but it means that people who lack access to this ecosystem
must reinvent many wheels.</p>
<p dir="auto">Putting that aside there are also fantastic crates that help Rust developers
interact with industry standard systems and libraries which can greatly
accelerate development in the language.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Why not build directly with Cargo / Why generate rustc invocations?</h3><a id="user-content-why-not-build-directly-with-cargo--why-generate-rustc-invocations" class="anchor" aria-label="Permalink: Why not build directly with Cargo / Why generate rustc invocations?" href="#why-not-build-directly-with-cargo--why-generate-rustc-invocations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Though the burden of emulating Cargo's functionality (where possible at all!) is
high, it appears to be the only way to maintain the guarantees (correctness,
reproducibility) that Bazel depends on to stay performant. It is possible and
likely with inflight RFCs that Cargo will become sufficiently flexible to
allow it to be used directly for compilation but at this point in time it
appears that maintaining a semblance of feature parity is actually easier than
avoiding all of the sharp edges introduced by treating Cargo like the Rust
compiler.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">What is buildable right now with Bazel, and what is not?</h3><a id="user-content-what-is-buildable-right-now-with-bazel-and-what-is-not" class="anchor" aria-label="Permalink: What is buildable right now with Bazel, and what is not?" href="#what-is-buildable-right-now-with-bazel-and-what-is-not"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">With a little bit of elbow grease it is possible to build nearly everything,
including projects that depend on openssl-sys. Many sys crates will require
identifying the system library that they wrap, and either vendoring it into the
project, or telling Bazel where it lives on your system. Some may require minor
source tweaks, such as eliminating hardcoded cargo environment variable
requirements. Fixes can be non-trivial in a few cases, but a good number of
the most popular crates have been built in an example repo, available at
<a href="https://github.com/acmcarther/cargo-raze-crater">https://github.com/acmcarther/cargo-raze-crater</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Example Repos</h2><a id="user-content-example-repos" class="anchor" aria-label="Permalink: Example Repos" href="#example-repos"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">See these examples of providing crate configuration:</p>
<p dir="auto"><strong>Using vendored mode</strong>:</p>
<ul dir="auto">
<li><a href="https://github.com/google/cargo-raze/tree/main/examples/vendored/hello_cargo_library">hello-cargo-library</a></li>
<li><a href="https://github.com/google/cargo-raze/tree/main/examples/vendored/complicated_cargo_library">complicated-cargo-library</a></li>
<li><a href="https://github.com/google/cargo-raze/tree/main/examples/vendored/non_cratesio_library">non-cratesio</a></li>
</ul>
<p dir="auto"><strong>Using remote mode</strong>:</p>
<ul dir="auto">
<li><a href="https://github.com/google/cargo-raze/tree/main/examples/remote/complicated_cargo_library">complicated-example</a></li>
<li><a href="https://github.com/google/cargo-raze/tree/main/examples/remote/non_cratesio">non-cratesio</a></li>
</ul>
<p dir="auto"><strong>Compiling OpenSSL</strong>:</p>
<ul dir="auto">
<li><a href="https://github.com/acmcarther/compile_openssl">openssl</a></li>
</ul>
<p dir="auto">The <code>[package.metadata.raze]</code> section is derived from a struct declared in <a href="./impl/src/settings.rs">impl/src/settings.rs</a>.</p>
</article></div>