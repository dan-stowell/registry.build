<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><p dir="auto">This is not an official Google product.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Overview</h1><a id="user-content-overview" class="anchor" aria-label="Permalink: Overview" href="#overview"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">CCTZ contains two libraries that cooperate with <code>&lt;chrono&gt;</code> to give C++
programmers all the necessary tools for computing with dates, times, and time
zones in a simple and correct manner. The libraries in CCTZ are:</p>
<ul dir="auto">
<li><strong>The Civil-Time Library</strong> — This is a header-only library that
supports computing with human-scale time, such as dates (which are
represented by the <code>cctz::civil_day</code> class). This library is declared in
<a href="https://github.com/google/cctz/blob/master/include/cctz/civil_time.h"><code>include/cctz/civil_time.h</code></a>.</li>
<li><strong>The Time-Zone Library</strong> — This library uses the IANA time zone
database that is installed on the system to convert between <em>absolute time</em>
and <em>civil time</em>. This library is declared in
<a href="https://github.com/google/cctz/blob/master/include/cctz/time_zone.h"><code>include/cctz/time_zone.h</code></a>.</li>
</ul>
<p dir="auto">These libraries are currently known to work on <strong>Linux</strong>, <strong>Mac OS X</strong>, and
<strong>Android</strong>.</p>
<p dir="auto">They will also work on <strong>Windows</strong> if you install the zoneinfo files. We are
interested, though, in an implementation of the cctz::TimeZoneIf interface that
calls the Windows time APIs instead. Please contact us if you're interested in
contributing.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Getting Started</h1><a id="user-content-getting-started" class="anchor" aria-label="Permalink: Getting Started" href="#getting-started"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">CCTZ is best built and tested using the <a href="https://bazel.io" rel="nofollow">Bazel</a> build system
and the <a href="https://github.com/google/googletest">Google Test</a> framework. (There is
also a simple <a href="https://github.com/google/cctz/blob/master/Makefile"><code>Makefile</code></a>
and a
<a href="https://github.com/google/cctz/blob/master/CMakeLists.txt"><code>CMakeLists.txt</code></a>
that should work if you're unable to use Bazel.)</p>
<ol dir="auto">
<li>Download/install
<a href="https://docs.bazel.build/versions/master/install.html" rel="nofollow">Bazel</a></li>
<li>Get the cctz source: <code>git clone https://github.com/google/cctz.git</code> then <code>cd cctz</code></li>
<li>Build cctz and run the tests: <code>bazel test :all</code></li>
</ol>
<p dir="auto">With CMake:</p>
<ol dir="auto">
<li>
<p dir="auto">Make sure you have CMake &gt;= 2.8.12 installed.</p>
</li>
<li>
<p dir="auto">Get the cctz source: <code>git clone https://github.com/google/cctz.git</code> then <code>cd cctz</code>.</p>
</li>
<li>
<p dir="auto">Build cctz so that is can be used by shared libraries and run the tests (use
<code>-DBUILD_TESTING=OFF</code> to skip the tests):</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="mkdir mybuild
cd mybuild
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_POSITION_INDEPENDENT_CODE=ON ..
cmake --build . --config Release
ctest
cmake --build . --config Release --target install"><pre class="notranslate"><code>mkdir mybuild
cd mybuild
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_POSITION_INDEPENDENT_CODE=ON ..
cmake --build . --config Release
ctest
cmake --build . --config Release --target install
</code></pre></div>
</li>
<li>
<p dir="auto">Use in your CMake-based project with:</p>
<div class="highlight highlight-source-cmake notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="find_package(cctz REQUIRED)
add_executable(mytarget file.cc)
target_link_libraries(mytarget cctz::cctz)"><pre><span class="pl-k">find_package</span>(cctz REQUIRED)
<span class="pl-k">add_executable</span>(mytarget file.cc)
<span class="pl-k">target_link_libraries</span>(mytarget cctz::cctz)</pre></div>
</li>
</ol>
<p dir="auto">Note: When using CCTZ in your own project, you might find it easiest to compile
the sources using your existing build system.</p>
<p dir="auto">Next Steps:</p>
<ol dir="auto">
<li>See the documentation for the libraries in CCTZ:
<ul dir="auto">
<li>Civil Time:
<a href="https://github.com/google/cctz/blob/master/include/cctz/civil_time.h"><code>include/cctz/civil_time.h</code></a></li>
<li>Time Zone:
<a href="https://github.com/google/cctz/blob/master/include/cctz/time_zone.h"><code>include/cctz/time_zone.h</code></a></li>
</ul>
</li>
<li>Look at the examples in <a href="https://github.com/google/cctz/tree/master/examples">https://github.com/google/cctz/tree/master/examples</a></li>
<li>Join our mailing list to ask questions and keep informed of changes:
<ul dir="auto">
<li><a href="https://groups.google.com/forum/#!forum/cctz" rel="nofollow">https://groups.google.com/forum/#!forum/cctz</a></li>
</ul>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Fundamental Concepts</h1><a id="user-content-fundamental-concepts" class="anchor" aria-label="Permalink: Fundamental Concepts" href="#fundamental-concepts"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><em>[The concepts presented here describe general truths about the problem domain
and are library and language agnostic. An understanding of these concepts helps
the programmer correctly reason about even the most-complicated time-programming
challenges and produce the simplest possible solutions.]</em></p>
<p dir="auto">There are two main ways to think about time in a computer program: as <em>absolute
time</em>, and as <em>civil time</em>. Both have their uses and it is important to
understand when each is appropriate. Absolute and civil times may be converted
back and forth using a <em>time zone</em> — this is the only way to correctly
convert between them. Let us now look more deeply at the three main concepts of
time programming: Absolute Time, Civil Time, and Time Zone.</p>
<p dir="auto"><em>Absolute time</em> uniquely and universally represents a specific instant in time.
It has no notion of calendars, or dates, or times of day. Instead, it is a
measure of the passage of real time, typically as a simple count of ticks since
some epoch. Absolute times are independent of all time zones and do not suffer
from human-imposed complexities such as daylight-saving time (DST). Many C++
types exist to represent absolute times, classically <code>time_t</code> and more recently
<code>std::chrono::time_point</code>.</p>
<p dir="auto"><em>Civil time</em> is the legally recognized representation of time for ordinary
affairs (cf. <a href="https://www.merriam-webster.com/dictionary/civil" rel="nofollow">https://www.merriam-webster.com/dictionary/civil</a>). It is a
human-scale representation of time that consists of the six fields — year,
month, day, hour, minute, and second (sometimes shortened to "YMDHMS") —
and it follows the rules of the Proleptic Gregorian Calendar, with 24-hour days
divided into 60-minute hours and 60-second minutes. Like absolute times, civil
times are also independent of all time zones and their related complexities
(e.g., DST). While <code>std::tm</code> contains the six civil-time fields (YMDHMS), plus a
few more, it does not have behavior to enforce the rules of civil time.</p>
<p dir="auto"><em>Time zones</em> are geo-political regions within which human-defined rules are
shared to convert between the absolute-time and civil-time domains. A time
zone's rules include things like the region's offset from the UTC time standard,
daylight-saving adjustments, and short abbreviation strings. Time zones often
have a history of disparate rules that apply only for certain periods, because
the rules may change at the whim of a region's local government. For this
reason, time-zone rules are usually compiled into data snapshots that are used
at runtime to perform conversions between absolute and civil times. There is
currently no C++ standard library supporting arbitrary time zones.</p>
<p dir="auto">In order for programmers to reason about and program applications that correctly
deal with these concepts, they must have a library that correctly implements the
above concepts. CCTZ adds to the existing C++11 <code>&lt;chrono&gt;</code> library to fully
implement the above concepts.</p>
<ul dir="auto">
<li>Absolute time — This is implemented by the existing C++11
<a href="https://en.cppreference.com/w/cpp/chrono" rel="nofollow"><code>&lt;chrono&gt;</code></a> library without
modification. For example, an absolute point in time is represented by a
<code>std::chrono::time_point</code>.</li>
<li>Civil time — This is implemented by the
<a href="https://github.com/google/cctz/blob/master/include/cctz/civil_time.h"><code>include/cctz/civil_time.h</code></a>
library that is provided as part of CCTZ. For example, a "date" is
represented by a <code>cctz::civil_day</code>.</li>
<li>Time zone — This is implemented by the
<a href="https://github.com/google/cctz/blob/master/include/cctz/time_zone.h"><code>include/cctz/time_zone.h</code></a>
library that is provided as part of CCTZ. For example, a time zone is
represented by an instance of the class <code>cctz::time_zone</code>.</li>
</ul>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Examples</h1><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Hello February 2016</h2><a id="user-content-hello-february-2016" class="anchor" aria-label="Permalink: Hello February 2016" href="#hello-february-2016"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This "hello world" example uses a for-loop to iterate the days from the first of
February until the month of March. Each day is streamed to output, and if the
day happens to be the 29th, we also output the day of the week.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#include &lt;iostream&gt;
#include &quot;cctz/civil_time.h&quot;

int main() {
  for (cctz::civil_day d(2016, 2, 1); d &lt; cctz::civil_month(2016, 3); ++d) {
    std::cout &lt;&lt; &quot;Hello &quot; &lt;&lt; d;
    if (d.day() == 29) {
      std::cout &lt;&lt; &quot; &lt;- leap day is a &quot; &lt;&lt; cctz::get_weekday(d);
    }
    std::cout &lt;&lt; &quot;\n&quot;;
  }
}"><pre class="notranslate"><code>#include &lt;iostream&gt;
#include "cctz/civil_time.h"

int main() {
  for (cctz::civil_day d(2016, 2, 1); d &lt; cctz::civil_month(2016, 3); ++d) {
    std::cout &lt;&lt; "Hello " &lt;&lt; d;
    if (d.day() == 29) {
      std::cout &lt;&lt; " &lt;- leap day is a " &lt;&lt; cctz::get_weekday(d);
    }
    std::cout &lt;&lt; "\n";
  }
}
</code></pre></div>
<p dir="auto">The output of the above program is</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Hello 2016-02-01
Hello 2016-02-02
Hello 2016-02-03
[...]
Hello 2016-02-27
Hello 2016-02-28
Hello 2016-02-29 &lt;- leap day is a Monday"><pre class="notranslate"><code>Hello 2016-02-01
Hello 2016-02-02
Hello 2016-02-03
[...]
Hello 2016-02-27
Hello 2016-02-28
Hello 2016-02-29 &lt;- leap day is a Monday
</code></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">One giant leap</h2><a id="user-content-one-giant-leap" class="anchor" aria-label="Permalink: One giant leap" href="#one-giant-leap"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This example shows how to use all three libraries (<code>&lt;chrono&gt;</code>, civil time, and
time zone) together. In this example, we know that viewers in New York watched
Neil Armstrong's first walk on the moon on July 20, 1969 at 10:56 PM. But we'd
like to see what time it was for our friend watching in Sydney, Australia.</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="#include &lt;iostream&gt;
#include &quot;cctz/civil_time.h&quot;
#include &quot;cctz/time_zone.h&quot;

int main() {
  cctz::time_zone nyc;
  cctz::load_time_zone(&quot;America/New_York&quot;, &amp;nyc);

  // Converts the input civil time in NYC to an absolute time.
  const auto moon_walk =
    cctz::convert(cctz::civil_second(1969, 7, 20, 22, 56, 0), nyc);

  std::cout &lt;&lt; &quot;Moon walk in NYC: &quot;
            &lt;&lt; cctz::format(&quot;%Y-%m-%d %H:%M:%S %Ez\n&quot;, moon_walk, nyc);

  cctz::time_zone syd;
  if (!cctz::load_time_zone(&quot;Australia/Sydney&quot;, &amp;syd)) return -1;
  std::cout &lt;&lt; &quot;Moon walk in SYD: &quot;
            &lt;&lt; cctz::format(&quot;%Y-%m-%d %H:%M:%S %Ez\n&quot;, moon_walk, syd);
}"><pre class="notranslate"><code>#include &lt;iostream&gt;
#include "cctz/civil_time.h"
#include "cctz/time_zone.h"

int main() {
  cctz::time_zone nyc;
  cctz::load_time_zone("America/New_York", &amp;nyc);

  // Converts the input civil time in NYC to an absolute time.
  const auto moon_walk =
    cctz::convert(cctz::civil_second(1969, 7, 20, 22, 56, 0), nyc);

  std::cout &lt;&lt; "Moon walk in NYC: "
            &lt;&lt; cctz::format("%Y-%m-%d %H:%M:%S %Ez\n", moon_walk, nyc);

  cctz::time_zone syd;
  if (!cctz::load_time_zone("Australia/Sydney", &amp;syd)) return -1;
  std::cout &lt;&lt; "Moon walk in SYD: "
            &lt;&lt; cctz::format("%Y-%m-%d %H:%M:%S %Ez\n", moon_walk, syd);
}
</code></pre></div>
<p dir="auto">The output of the above program is</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="Moon walk in NYC: 1969-07-20 22:56:00 -04:00
Moon walk in SYD: 1969-07-21 12:56:00 +10:00"><pre class="notranslate"><code>Moon walk in NYC: 1969-07-20 22:56:00 -04:00
Moon walk in SYD: 1969-07-21 12:56:00 +10:00
</code></pre></div>
<p dir="auto">This example shows that the absolute time (the <code>std::chrono::time_point</code>) of the
first walk on the moon is the same no matter the time zone of the viewer (the
same time point is used in both calls to <code>format()</code>). The only difference is the
time zone in which the <code>moon_walk</code> time point is rendered. And in this case we
can see that our friend in Sydney was probably eating lunch while watching that
historic event.</p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">References</h1><a id="user-content-references" class="anchor" aria-label="Permalink: References" href="#references"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>CCTZ <a href="https://github.com/google/cctz/wiki/FAQ">FAQ</a></li>
<li>See also the <a href="https://youtu.be/2rnIHsqABfM" rel="nofollow">Time Programming Fundamentals</a>
talk from CppCon 2015 (<a href="https://goo.gl/ofof4N" rel="nofollow">slides available here</a>). This
talk mostly describes the older CCTZ v1 API, but the <em>concepts</em> are the
same.</li>
<li>ISO C++ proposal to standardize the Civil-Time Library:
<a href="https://github.com/devjgm/papers/blob/master/d0215r1.md">https://github.com/devjgm/papers/blob/master/d0215r1.md</a></li>
<li>ISO C++ proposal to standardize the Time-Zone Library:
<a href="https://github.com/devjgm/papers/blob/master/d0216r1.md">https://github.com/devjgm/papers/blob/master/d0216r1.md</a></li>
</ul>
</article></div>