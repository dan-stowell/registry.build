<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text">
<p dir="auto"><a href="https://opensource.fb.com/support-ukraine" rel="nofollow"><img src="https://camo.githubusercontent.com/47fb53bace1b764845ce5df32f7677eeab4c53fba93fc292c04933d8be0931ed/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f537570706f72742d556b7261696e652d4646443530303f7374796c653d666c6174266c6162656c436f6c6f723d303035424242" alt="Support Ukraine" data-canonical-src="https://img.shields.io/badge/Support-Ukraine-FFD500?style=flat&amp;labelColor=005BBB" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Bazel rules for Qt6</h1><a id="user-content-bazel-rules-for-qt6" class="anchor" aria-label="Permalink: Bazel rules for Qt6" href="#bazel-rules-for-qt6"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Goal</h2><a id="user-content-goal" class="anchor" aria-label="Permalink: Goal" href="#goal"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The goal of these rules is to be able to build <a href="https://www.qt.io/product/qt6" rel="nofollow">Qt6</a> applications using <a href="https://bazel.build/" rel="nofollow">Bazel</a> on Windows,
Linux and macOS without the need to preinstall Qt6.
All the magic to set up Qt6 should be done by Bazel with as little effort as possible.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Quick start</h2><a id="user-content-quick-start" class="anchor" aria-label="Permalink: Quick start" href="#quick-start"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This project uses <a href="https://bazel.build/" rel="nofollow">Bazel</a> as a build system.
The current used version of Bazel is defined in <a href="tests/.bazelversion">.bazelversion</a>.</p>
<p dir="auto"><strong>Prerequisites:</strong></p>
<p dir="auto">The following tools should be installed:</p>
<ul dir="auto">
<li><a href="https://git-scm.com/" rel="nofollow">Git</a></li>
<li><a href="https://bazel.build/install" rel="nofollow">Bazel</a></li>
<li>A C++ compiler (GCC, Visual Studio, Clang, etc.)</li>
</ul>
<p dir="auto"><strong>Checkout, build, and run:</strong></p>
<p dir="auto"><em>All platforms:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git clone https://github.com/Vertexwahn/rules_qt6
cd rules_qt6/tests"><pre>git clone https://github.com/Vertexwahn/rules_qt6
<span class="pl-c1">cd</span> rules_qt6/tests</pre></div>
<p dir="auto"><em>Run Hello World demo with Windows 10/11 x64 with Visual Studio 2019:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run --config=vs2019 //hello_world:hello_world"><pre>bazel run --config=vs2019 //hello_world:hello_world</pre></div>
<p dir="auto"><em>Run Hello World demo with Windows 10/11 x64 with Visual Studio 2022:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run --config=vs2022 //hello_world:hello_world"><pre>bazel run --config=vs2022 //hello_world:hello_world</pre></div>
<p dir="auto"><em>Run Hello World demo with Ubuntu 20.04:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run --config=gcc9 //hello_world:hello_world"><pre>bazel run --config=gcc9 //hello_world:hello_world</pre></div>
<p dir="auto"><em>Run Hello World demo with Ubuntu 22.04:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run --config=gcc11 //hello_world:hello_world"><pre>bazel run --config=gcc11 //hello_world:hello_world</pre></div>
<p dir="auto"><em>Run Hello World demo with Ubuntu 24.04:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bazel run --config=gcc13 //hello_world:hello_world"><pre>bazel run --config=gcc13 //hello_world:hello_world</pre></div>
<p dir="auto"><em>Run Hello World demo with macOS 11/12:</em></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Install Homebrew
/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
brew install qt@6 # Unfortunately a preinstalled version of Qt6 is still needed on macOS 
brew link qt@6
bazel run --config=macos //hello_world:hello_world"><pre><span class="pl-c"><span class="pl-c">#</span> Install Homebrew</span>
/bin/bash -c <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s"><span class="pl-pds">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="pl-pds">)</span></span><span class="pl-pds">"</span></span>
brew install qt@6 <span class="pl-c"><span class="pl-c">#</span> Unfortunately a preinstalled version of Qt6 is still needed on macOS </span>
brew link qt@6
bazel run --config=macos //hello_world:hello_world</pre></div>
<p dir="auto"><strong>Expected output</strong></p>
<p dir="auto">The expected output should be similar (depending on your platform) to the following screenshots:</p>
<p dir="auto"><em>Windows</em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/screenshots/hello_world_Windows11.png"><img src="/docs/screenshots/hello_world_Windows11.png" alt="Screenshot of HelloWorld demo on Windows 11" style="max-width: 100%;"></a></p>
<p dir="auto"><em>Ubuntu</em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/screenshots/hello_world_Ubuntu22.04.png"><img src="/docs/screenshots/hello_world_Ubuntu22.04.png" alt="Screenshot of HelloWorld demo on Ubuntu 22.04" style="max-width: 100%;"></a></p>
<p dir="auto"><em>macOS</em></p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/docs/screenshots/hello_world_macOS12_M1.png"><img src="/docs/screenshots/hello_world_macOS12_M1.png" alt="Screenshot of HelloWorld demo on macOS" style="max-width: 100%;"></a></p>
<p dir="auto"><strong>More Examples</strong></p>
<p dir="auto">More examples can be found in the <a href="tests">tests</a> directory.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Current status</h2><a id="user-content-current-status" class="anchor" aria-label="Permalink: Current status" href="#current-status"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Currently, on macOS, these rules need a preinstalled version of Qt on the system (<code>brew install qt@6 &amp;&amp; brew link qt@6</code>).
On Windows and Linux it should be possible to run <code>bazel run --config=[gcc9|gcc11|vs2019|vs2022] //hello_world:hello_world</code> without the need to preinstall Bazel.</p>
<p dir="auto">These rules require at least Bazel 4.0.0 to work.
With some small modifications, you can get work these rules also on earlier versions of Bazel.</p>
<p dir="auto">A prebuild version of Qt is fetched from <a href="https://vertexwahn.de/" rel="nofollow">vertexwahn.de</a>.
Implementation details can be found in <a href="fetch_qt.bzl">fetch_qt.bzl</a>.</p>
<p dir="auto">I created a <a href="tests/.bazelrc"><code>.bazelrc</code></a> file that contains a config for <code>vs2019</code>, <code>vs2022</code>, <code>gcc9</code>, <code>gcc11</code>, and ``macos`.
This is needed since Qt6 needs at least C++17 standard enabled and different C++ compilers need different flags to enable this.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Contributions</h2><a id="user-content-contributions" class="anchor" aria-label="Permalink: Contributions" href="#contributions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Any improvements to the Qt6 build experience using Bazel are welcome.
Maybe you have solved this problem already.
In this case,
I would appreciate it if you could share your efforts under some permissive license.
If you name no specific license I assume you are fine with the current used license of this project (Apache 2.0 License).</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Similar projects</h2><a id="user-content-similar-projects" class="anchor" aria-label="Permalink: Similar projects" href="#similar-projects"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/aabtop/rules_qt">aabtop/rules_qt</a></li>
<li><a href="https://github.com/bbreslauer/qt-bazel-example">bbreslauer/qt-bazel-example</a></li>
<li><a href="https://github.com/justbuchanan/bazel_rules_qt">justbuchanan/bazel_rules_qt</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">License</h2><a id="user-content-license" class="anchor" aria-label="Permalink: License" href="#license"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">This work is published under Apache 2.0 License.</p>
<p dir="auto">This work builds on top of <a href="https://github.com/justbuchanan/bazel_rules_qt">justbuchanan/bazel_rules_qt</a> which is also licensed under Apache 2.0 and
was forked from <a href="https://github.com/bbreslauer/qt-bazel-example">bbreslauer/qt-bazel-example</a>.
See here for details: <a href="https://github.com/justbuchanan/bazel_rules_qt/graphs/contributors">https://github.com/justbuchanan/bazel_rules_qt/graphs/contributors</a></p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Thanks to all contributors ❤</h2><a id="user-content-thanks-to-all-contributors-" class="anchor" aria-label="Permalink: Thanks to all contributors ❤" href="#thanks-to-all-contributors-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
 <a href="https://github.com/Vertexwahn/rules_qt6/graphs/contributors">
   <img src="https://camo.githubusercontent.com/0402f367b16edf6d0dc083f049946cef290c7970ff0c61f63257c86f3b648628/68747470733a2f2f636f6e747269622e726f636b732f696d6167653f7265706f3d5665727465787761686e2f72756c65735f717436" data-canonical-src="https://contrib.rocks/image?repo=Vertexwahn/rules_qt6" style="max-width: 100%;">
 </a>
</article></div>