<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto"><code>rules_maven</code> <a href="https://travis-ci.org/pubref/rules_maven" rel="nofollow"><img src="https://camo.githubusercontent.com/9e8cffb9115d504f0ba446dff9d4e68b4847754d260a5185c5023e95cd0e0af6/68747470733a2f2f7472617669732d63692e6f72672f7075627265662f72756c65735f6d6176656e2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/pubref/rules_maven.svg?branch=master" style="max-width: 100%;"></a></h1><a id="user-content-rules_maven-" class="anchor" aria-label="Permalink: rules_maven" href="#rules_maven-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table><tbody><tr>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/bazelbuild.png"><img src="https://github.com/bazelbuild.png" height="120" style="max-width: 100%;"></a></td>
<td><a target="_blank" rel="noopener noreferrer" href="https://github.com/gradle.png"><img src="https://github.com/gradle.png" height="120" style="max-width: 100%;"></a></td>
</tr><tr>
<td>Rules</td>
<td>Maven</td>
</tr></tbody></table></markdown-accessiblity-table>
<p dir="auto"><a href="https://bazel.build" rel="nofollow">Bazel</a> rules for working with transitive maven dependencies.</p>
<blockquote>
<p dir="auto">The word 'maven' here refers to 'maven artifacts', not the tool 'mvn'.  This
repo utilizes gradle to assist with transitive dependency management, hence
the logo reference.</p>
</blockquote>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Rules</h2><a id="user-content-rules" class="anchor" aria-label="Permalink: Rules" href="#rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th align="right">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right"><a href="#maven_repositories">maven_repositories</a></td>
<td align="left">Load dependencies for this repo.</td>
</tr>
<tr>
<td align="right"><a href="#maven_repository">maven_repository</a></td>
<td align="left">Declare an external workspace that defines transitive dependencies for a set of maven artifacts.</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><strong>Status</strong>: experimental, but actively in use for other internal projects.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">1. Add rules_maven to your WORKSPACE</h3><a id="user-content-1-add-rules_maven-to-your-workspace" class="anchor" aria-label="Permalink: 1. Add rules_maven to your WORKSPACE" href="#1-add-rules_maven-to-your-workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git_repository(
  name = &quot;org_pubref_rules_maven&quot;,
  remote = &quot;https://github.com/pubref/rules_maven&quot;,
  commit = HEAD, # replace with latest version
)

load(&quot;@org_pubref_rules_maven//maven:rules.bzl&quot;, &quot;maven_repositories&quot;)
maven_repositories()"><pre><span class="pl-en">git_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"org_pubref_rules_maven"</span>,
  <span class="pl-s1">remote</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/pubref/rules_maven"</span>,
  <span class="pl-s1">commit</span> <span class="pl-c1">=</span> <span class="pl-c1">HEAD</span>, <span class="pl-c"># replace with latest version</span>
)

<span class="pl-en">load</span>(<span class="pl-s">"@org_pubref_rules_maven//maven:rules.bzl"</span>, <span class="pl-s">"maven_repositories"</span>)
<span class="pl-en">maven_repositories</span>()</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">2a. Define an initial maven_repository rule naming the root artifact(s)</h3><a id="user-content-2a-define-an-initial-maven_repository-rule-naming-the-root-artifacts" class="anchor" aria-label="Permalink: 2a. Define an initial maven_repository rule naming the root artifact(s)" href="#2a-define-an-initial-maven_repository-rule-naming-the-root-artifacts"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@org_pubref_rules_maven//maven:rules.bzl&quot;, &quot;maven_repository&quot;)

maven_repository(
  name = &quot;guice&quot;,
  deps = [
    'com.google.inject:guice:4.1.0',
  ],
)"><pre><span class="pl-en">load</span>(<span class="pl-s">"@org_pubref_rules_maven//maven:rules.bzl"</span>, <span class="pl-s">"maven_repository"</span>)

<span class="pl-en">maven_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"guice"</span>,
  <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
    <span class="pl-s">'com.google.inject:guice:4.1.0'</span>,
  ],
)</pre></div>
<p dir="auto">Given this initial repository rule defintion, <code>rules_maven</code> will:</p>
<ol dir="auto">
<li>
<p dir="auto">write a <code>build.gradle</code> file,</p>
</li>
<li>
<p dir="auto">install <code>gradle</code> as it's own internal dependency (first time only;
does not interfere with any other gradle you might have installed).</p>
</li>
<li>
<p dir="auto">call <code>gradle dependencies</code> and parse the output,</p>
</li>
<li>
<p dir="auto">fetch the expected sha1 values for named artifacts,</p>
</li>
<li>
<p dir="auto">write a <code>@guice//:rules.bzl</code> file having the requisite <code>maven_jar</code>
rules (organized by configuration),</p>
</li>
<li>
<p dir="auto">write a <code>@guice//:BUILD</code> file with the requisite <code>java_library</code>
that bundle/export dependencies (one per configuration).</p>
</li>
<li>
<p dir="auto">print out a formatted <code>maven_repository</code> <em>"hermetic-form"</em> rule with
all the transitive dependencies and their sha1 values explicitly named
(can be disabled via the <code>hermetic = False</code> attribute)</p>
</li>
</ol>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">2b. Copy and paste the closed-form back into your WORKSPACE.</h3><a id="user-content-2b-copy-and-paste-the-closed-form-back-into-your-workspace" class="anchor" aria-label="Permalink: 2b. Copy and paste the closed-form back into your WORKSPACE." href="#2b-copy-and-paste-the-closed-form-back-into-your-workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><code>rules_maven</code> will regurgitate a so-called <em>closed-form</em>
<code>maven_repository</code> rule enumerating the transitive dependencies and
their sha1 values in the <code>transitive_deps</code> attribute.  Assuming you
trust the data, copy and paste this back into your <code>WORKSPACE</code>.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="maven_repository(
  name = 'guice',
  deps = [
    'com.google.inject:guice:4.1.0',
  ],
  transitive_deps = [
    '0235ba8b489512805ac13a8f9ea77a1ca5ebe3e8:aopalliance:aopalliance:1.0',
    '6ce200f6b23222af3d8abb6b6459e6c44f4bb0e9:com.google.guava:guava:19.0',
    'eeb69005da379a10071aa4948c48d89250febb07:com.google.inject:guice:4.1.0',
    '6975da39a7040257bd51d21a231b76c915872d38:javax.inject:javax.inject:1',
  ],
)"><pre><span class="pl-en">maven_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">'guice'</span>,
  <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
    <span class="pl-s">'com.google.inject:guice:4.1.0'</span>,
  ],
  <span class="pl-s1">transitive_deps</span> <span class="pl-c1">=</span> [
    <span class="pl-s">'0235ba8b489512805ac13a8f9ea77a1ca5ebe3e8:aopalliance:aopalliance:1.0'</span>,
    <span class="pl-s">'6ce200f6b23222af3d8abb6b6459e6c44f4bb0e9:com.google.guava:guava:19.0'</span>,
    <span class="pl-s">'eeb69005da379a10071aa4948c48d89250febb07:com.google.inject:guice:4.1.0'</span>,
    <span class="pl-s">'6975da39a7040257bd51d21a231b76c915872d38:javax.inject:javax.inject:1'</span>,
  ],
)</pre></div>
<p dir="auto">Once the <code>transitive_deps</code> is stable (all transitive deps and their correct
sha1 values are listed), <code>rules_maven</code> will be silent.</p>
<blockquote>
<p dir="auto">Note: make sure you leave out the artifact ID type, <code>rules_maven</code>
will get confused about it.  For example, don't say
<code>com.google.inject:guice:jar:4.1.0</code> (leave out the <code>:jar</code>
substring).</p>
</blockquote>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">3. Load the <code>@guice//:rules.bzl</code> file in your WORKSPACE and invoke the desired macro configuration.</h3><a id="user-content-3-load-the-guicerulesbzl-file-in-your-workspace-and-invoke-the-desired-macro-configuration" class="anchor" aria-label="Permalink: 3. Load the @guice//:rules.bzl file in your WORKSPACE and invoke the desired macro configuration." href="#3-load-the-guicerulesbzl-file-in-your-workspace-and-invoke-the-desired-macro-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The <code>rules.bzl</code> file (a generated file) contains macro definitions
that ultimately define <code>native.maven_jar</code> rules.  A separate macro is
defined for each <em>gradle configuration</em>.  The default configurations
are: <code>compile</code>, <code>runtime</code>, <code>compileOnly</code>, <code>compileClasspath</code>,
<code>testCompile</code>, and <code>testRuntime</code>.  (these can be customized via the
<code>configurations</code> attribute).</p>
<p dir="auto">The name of the macros are the gradle configuration name, prefixed
with the rule name.  In this case there are the following macros (and
several others):</p>
<ul dir="auto">
<li><code>guice_compile</code>: Provide compile-time dependencies.</li>
<li><code>guice_runtime</code>: Provide runtime-time dependencies.</li>
<li>...</li>
</ul>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="load(&quot;@guice//:rules.bzl&quot;, &quot;guice_compile&quot;)
guice_compile()"><pre><span class="pl-en">load</span>(<span class="pl-s">"@guice//:rules.bzl"</span>, <span class="pl-s">"guice_compile"</span>)
<span class="pl-en">guice_compile</span>()</pre></div>
<blockquote>
<p dir="auto">In this case, both <code>_compile</code> and <code>_runtime</code> macros provide the same dependencies.</p>
</blockquote>
<blockquote>
<p dir="auto">You can inspect the contents of the generated file via:</p>
</blockquote>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="$ cat $(bazel info output_base)/external/guice/rules.bzl"><pre>$ cat <span class="pl-s"><span class="pl-pds">$(</span>bazel info output_base<span class="pl-pds">)</span></span>/external/guice/rules.bzl</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">4. Depend on the java_library rule for the desired configuration.</h3><a id="user-content-4-depend-on-the-java_library-rule-for-the-desired-configuration" class="anchor" aria-label="Permalink: 4. Depend on the java_library rule for the desired configuration." href="#4-depend-on-the-java_library-rule-for-the-desired-configuration"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="java_binary(
  name = &quot;app&quot;,
  main_class = &quot;example.App&quot;,
  deps = [&quot;@guice//:compile&quot;],
)"><pre><span class="pl-en">java_binary</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"app"</span>,
  <span class="pl-s1">main_class</span> <span class="pl-c1">=</span> <span class="pl-s">"example.App"</span>,
  <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [<span class="pl-s">"@guice//:compile"</span>],
)</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Final WORKSPACE</h3><a id="user-content-final-workspace" class="anchor" aria-label="Permalink: Final WORKSPACE" href="#final-workspace"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">To further illustrate steps 1-3 are all in the same file.</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="git_repository(
  name = &quot;org_pubref_rules_maven&quot;,
  remote = &quot;https://github.com/pubref/rules_maven&quot;,
  commit = HEAD, # replace with latest version
)
load(&quot;@org_pubref_rules_maven//maven:rules.bzl&quot;, &quot;maven_repositories&quot;, &quot;maven_repository&quot;)
maven_repositories()


maven_repository(
  name = 'guice',
  deps = [
    'com.google.inject:guice:4.1.0',
  ],
  transitive_deps = [
    '0235ba8b489512805ac13a8f9ea77a1ca5ebe3e8:aopalliance:aopalliance:1.0',
    '6ce200f6b23222af3d8abb6b6459e6c44f4bb0e9:com.google.guava:guava:19.0',
    'eeb69005da379a10071aa4948c48d89250febb07:com.google.inject:guice:4.1.0',
    '6975da39a7040257bd51d21a231b76c915872d38:javax.inject:javax.inject:1',
  ],
)
load(&quot;@guice//:rules.bzl&quot;, &quot;guice_compile&quot;)
guice_compile()"><pre><span class="pl-en">git_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"org_pubref_rules_maven"</span>,
  <span class="pl-s1">remote</span> <span class="pl-c1">=</span> <span class="pl-s">"https://github.com/pubref/rules_maven"</span>,
  <span class="pl-s1">commit</span> <span class="pl-c1">=</span> <span class="pl-c1">HEAD</span>, <span class="pl-c"># replace with latest version</span>
)
<span class="pl-en">load</span>(<span class="pl-s">"@org_pubref_rules_maven//maven:rules.bzl"</span>, <span class="pl-s">"maven_repositories"</span>, <span class="pl-s">"maven_repository"</span>)
<span class="pl-en">maven_repositories</span>()


<span class="pl-en">maven_repository</span>(
  <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">'guice'</span>,
  <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
    <span class="pl-s">'com.google.inject:guice:4.1.0'</span>,
  ],
  <span class="pl-s1">transitive_deps</span> <span class="pl-c1">=</span> [
    <span class="pl-s">'0235ba8b489512805ac13a8f9ea77a1ca5ebe3e8:aopalliance:aopalliance:1.0'</span>,
    <span class="pl-s">'6ce200f6b23222af3d8abb6b6459e6c44f4bb0e9:com.google.guava:guava:19.0'</span>,
    <span class="pl-s">'eeb69005da379a10071aa4948c48d89250febb07:com.google.inject:guice:4.1.0'</span>,
    <span class="pl-s">'6975da39a7040257bd51d21a231b76c915872d38:javax.inject:javax.inject:1'</span>,
  ],
)
<span class="pl-en">load</span>(<span class="pl-s">"@guice//:rules.bzl"</span>, <span class="pl-s">"guice_compile"</span>)
<span class="pl-en">guice_compile</span>()</pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">maven_repository attributes</h3><a id="user-content-maven_repository-attributes" class="anchor" aria-label="Permalink: maven_repository attributes" href="#maven_repository-attributes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table><table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td><code>None</code></td>
<td>The rule name.</td>
</tr>
<tr>
<td><code>deps</code></td>
<td><code>string_list</code></td>
<td><code>[]</code></td>
<td>List of maven artifacts having the form <code>NAME:GROUP:VERSION</code></td>
</tr>
<tr>
<td><code>gradle_build_file</code></td>
<td><code>label</code></td>
<td><code>None</code></td>
<td>Use the given <code>build.gradle</code> file to name dependencies (rather than generating one based on <code>deps</code></td>
</tr>
<tr>
<td><code>transitive_deps</code></td>
<td><code>string_list</code></td>
<td><code>[]</code></td>
<td>List of maven artifacts in the transitive set reachable from <code>deps</code>.  The have the form <code>SHA1:NAME:GROUP:VERSION</code>, and are calculated by rules_maven via a generated <code>build.gradle</code> file.</td>
</tr>
<tr>
<td><code>exclude</code></td>
<td><code>string_list_dict</code></td>
<td><code>{}</code></td>
<td>List of artifacts to exclude, in the form <code>{ 'NAME:GROUP': ['EXCLUDED_GROUP:EXCLUDED_NAME']</code></td>
</tr>
<tr>
<td><code>force</code></td>
<td><code>string_list</code></td>
<td><code>[]</code></td>
<td>List of artifacts to force, in the form <code>[ 'NAME:GROUP:VERSION']</code></td>
</tr>
<tr>
<td><code>omit</code></td>
<td><code>string_list</code></td>
<td><code>[]</code></td>
<td>List of patterns to skip.  The pattern must either be a substring of the coordinate  <code>[ 'NAME:GROUP:VERSION']</code> or equal to the generated workspace name.</td>
</tr>
<tr>
<td><code>hermetic</code></td>
<td><code>bool</code></td>
<td><code>True</code></td>
<td>Regurgitate the rule with all transitive deps listed</td>
</tr>
<tr>
<td><code>repositories</code></td>
<td><code>string_list_dict</code></td>
<td><code>{}</code></td>
<td>A mapping of artifact-id pattern to url (see below)</td>
</tr>
<tr>
<td><code>configurations</code></td>
<td><code>string_list</code></td>
<td><code>["compile", "default", "runtime", "compileOnly", "compileClasspath"]</code></td>
<td>List of configurations to generate a corresponding rule for.</td>
</tr>
<tr>
<td><code>experimental_disambiguate_maven_jar_workspace_names</code></td>
<td><code>bool</code></td>
<td><code>False</code></td>
<td>See Note</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<blockquote>
<p dir="auto"><code>experimental_disambiguate_maven_jar_workspace_names</code>: This option
changes the name of the generated workspace name for maven_jar
rules.  For example, consider the artifact
<code>com.google.guava:guava:20.0</code>.  The corresponding workspace name
under default conditions is <code>com_google_guava_guava</code>.  If
<code>experimental_disambiguate_maven_jar_workspace_names = True</code>, the
workspace name includes the version specifier and becomes
<code>com_google_guava_guava_20_0</code>.</p>
</blockquote>
<p dir="auto">Example use of the <code>repositories</code> attribute:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# Load commons-imaging from adobe nexus repository.
# Load everything else (junit) from maven central.
maven_repository(
    name = &quot;maven&quot;,
    repositories = {
        &quot;https://repo.adobe.com/nexus/content/repositories/public/&quot;: [
            &quot;org.apache.commons:commons-imaging&quot;,
        ],
    },
    deps = [
        &quot;junit:junit:4.12&quot;,
        &quot;org.apache.commons:commons-imaging:1.0-R1534292&quot;,
    ],
)"><pre><span class="pl-c"># Load commons-imaging from adobe nexus repository.</span>
<span class="pl-c"># Load everything else (junit) from maven central.</span>
<span class="pl-en">maven_repository</span>(
    <span class="pl-s1">name</span> <span class="pl-c1">=</span> <span class="pl-s">"maven"</span>,
    <span class="pl-s1">repositories</span> <span class="pl-c1">=</span> {
        <span class="pl-s">"https://repo.adobe.com/nexus/content/repositories/public/"</span>: [
            <span class="pl-s">"org.apache.commons:commons-imaging"</span>,
        ],
    },
    <span class="pl-s1">deps</span> <span class="pl-c1">=</span> [
        <span class="pl-s">"junit:junit:4.12"</span>,
        <span class="pl-s">"org.apache.commons:commons-imaging:1.0-R1534292"</span>,
    ],
)</pre></div>
<div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto">Credits</h1><a id="user-content-credits" class="anchor" aria-label="Permalink: Credits" href="#credits"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The anteater image is a reference to the O'Reilly book cover.  This image is
actually "Peter", the University of California Irvine
mascot. <a href="http://studentaffairs.uci.edu/resources/right-facing-blk-outline.png" rel="nofollow"><strong>ZOT!</strong></a></p>
</article></div>