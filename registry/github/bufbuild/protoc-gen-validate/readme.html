<div id="readme" class="md" data-path="README.md"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 class="heading-element" dir="auto"><a href="https://buf.build" rel="nofollow"><img src="./.github/buf-logo.svg" alt="" style="max-width: 100%; height: auto;"></a> protoc-gen-validate (PGV)</h1><a id="user-content--protoc-gen-validate-pgv" class="anchor" aria-label="Permalink:  protoc-gen-validate (PGV)" href="#-protoc-gen-validate-pgv"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/3f239dbd670e640be716343e84eaf21f0e61fb1732ac142b1102e44ae4c3783c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6275666275696c642f70726f746f632d67656e2d76616c69646174653f636f6c6f723d626c7565"><img src="https://camo.githubusercontent.com/3f239dbd670e640be716343e84eaf21f0e61fb1732ac142b1102e44ae4c3783c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f6275666275696c642f70726f746f632d67656e2d76616c69646174653f636f6c6f723d626c7565" alt="License" data-canonical-src="https://img.shields.io/github/license/bufbuild/protoc-gen-validate?color=blue" style="max-width: 100%; height: auto;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/f785f24df582b50fd77553d00c5921a07cdb351adfd160388a07492b390f97c2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f6275666275696c642f70726f746f632d67656e2d76616c69646174653f696e636c7564655f70726572656c6561736573"><img src="https://camo.githubusercontent.com/f785f24df582b50fd77553d00c5921a07cdb351adfd160388a07492b390f97c2/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f6275666275696c642f70726f746f632d67656e2d76616c69646174653f696e636c7564655f70726572656c6561736573" alt="Release" data-canonical-src="https://img.shields.io/github/v/release/bufbuild/protoc-gen-validate?include_prereleases" style="max-width: 100%; height: auto;"></a>
<a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/83e3aef8c0062c73b7104ac8e92d16c75cb66eff17b9f81563dfba00d60a98f0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736c61636b2d6275662d253233653031353633"><img src="https://camo.githubusercontent.com/83e3aef8c0062c73b7104ac8e92d16c75cb66eff17b9f81563dfba00d60a98f0/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f736c61636b2d6275662d253233653031353633" alt="Slack" data-canonical-src="https://img.shields.io/badge/slack-buf-%23e01563" style="max-width: 100%; height: auto;"></a></p>
<div class="markdown-alert markdown-alert-important" dir="auto"><p class="markdown-alert-title" dir="auto"><svg class="octicon octicon-report mr-2" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M0 1.75C0 .784.784 0 1.75 0h12.5C15.216 0 16 .784 16 1.75v9.5A1.75 1.75 0 0 1 14.25 13H8.06l-2.573 2.573A1.458 1.458 0 0 1 3 14.543V13H1.75A1.75 1.75 0 0 1 0 11.25Zm1.75-.25a.25.25 0 0 0-.25.25v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25Zm7 2.25v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 9a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"></path></svg>Important</p><p dir="auto">protoc-gen-validate (PGV) has reached a stable state and is in maintenance mode.</p>
<p dir="auto">We recommend that new and existing projects transition to using <a href="https://github.com/bufbuild/protovalidate"><code>protovalidate</code></a>.
Our <a href="https://buf.build/docs/migration-guides/migrate-from-protoc-gen-validate/" rel="nofollow">migration guide</a> walks you through the process.</p>
<p dir="auto">Read <a href="https://buf.build/blog/protoc-gen-validate-v1-and-v2/" rel="nofollow">our blog post</a> if you want to learn more about the limitations of protoc-gen-validate and
how we have designed <a href="https://github.com/bufbuild/protovalidate"><code>protovalidate</code></a> to be better.</p>
</div>
<p dir="auto">PGV is a protoc plugin to generate polyglot message validators. While protocol
buffers effectively guarantee the types of structured data, they cannot enforce
semantic rules for values. This plugin adds support to protoc-generated code to
validate such constraints.</p>
<p dir="auto">Developers import the PGV extension and annotate the messages and fields in
their proto files with constraint rules:</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="syntax = &quot;proto3&quot;;

package examplepb;

import &quot;validate/validate.proto&quot;;

message Person {
  uint64 id = 1 [(validate.rules).uint64.gt = 999];

  string email = 2 [(validate.rules).string.email = true];

  string name = 3 [(validate.rules).string = {
    pattern:   &quot;^[A-Za-z]+( [A-Za-z]+)*$&quot;,
    max_bytes: 256,
  }];

  Location home = 4 [(validate.rules).message.required = true];

  message Location {
    double lat = 1 [(validate.rules).double = {gte: -90,  lte: 90}];
    double lng = 2 [(validate.rules).double = {gte: -180, lte: 180}];
  }
}"><pre><span class="pl-k">syntax</span> <span class="pl-k">=</span> <span class="pl-s">"proto3"</span>;

<span class="pl-k">package</span> <span class="pl-s">examplepb</span>;

<span class="pl-k">import</span> <span class="pl-s">"validate/validate.proto"</span>;

<span class="pl-k">message</span> <span class="pl-en">Person</span> {
  <span class="pl-k">uint64</span> <span class="pl-smi">id</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.uint64<span class="pl-c1">.gt</span> = <span class="pl-c1">999</span>];

  <span class="pl-k">string</span> <span class="pl-smi">email</span> <span class="pl-k">=</span> <span class="pl-c1">2</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.string<span class="pl-c1">.email</span> = <span class="pl-c1">true</span>];

  <span class="pl-k">string</span> <span class="pl-smi">name</span> <span class="pl-k">=</span> <span class="pl-c1">3</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>).string</span> = {
    <span class="pl-k">pattern</span>:   <span class="pl-s">"^[A-Za-z]+( [A-Za-z]+)*$"</span>,
    <span class="pl-k">max_bytes</span>: <span class="pl-c1">256</span>,
  }];

  <span class="pl-k">Location</span> <span class="pl-smi">home</span> <span class="pl-k">=</span> <span class="pl-c1">4</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.message<span class="pl-c1">.required</span> = <span class="pl-c1">true</span>];

  <span class="pl-k">message</span> <span class="pl-en">Location</span> {
    <span class="pl-k">double</span> <span class="pl-smi">lat</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>).double</span> = {<span class="pl-k">gte</span>: -<span class="pl-c1">90</span>,  <span class="pl-k">lte</span>: <span class="pl-c1">90</span>}];
    <span class="pl-k">double</span> <span class="pl-smi">lng</span> <span class="pl-k">=</span> <span class="pl-c1">2</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>).double</span> = {<span class="pl-k">gte</span>: -<span class="pl-c1">180</span>, <span class="pl-k">lte</span>: <span class="pl-c1">180</span>}];
  }
}</pre></div>
<p dir="auto">Executing <code>protoc</code> with PGV and the target language's default plugin will
create <code>Validate</code> methods on the generated types:</p>
<div class="highlight highlight-source-go notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="p := new(Person)

err := p.Validate() // err: Id must be greater than 999
p.Id = 1000

err = p.Validate() // err: Email must be a valid email address
p.Email = &quot;example@bufbuild.com&quot;

err = p.Validate() // err: Name must match pattern '^[A-Za-z]+( [A-Za-z]+)*$'
p.Name = &quot;Protocol Buffer&quot;

err = p.Validate() // err: Home is required
p.Home = &amp;Location{37.7, 999}

err = p.Validate() // err: Home.Lng must be within [-180, 180]
p.Home.Lng = -122.4

err = p.Validate() // err: nil"><pre><span class="pl-s1">p</span> <span class="pl-c1">:=</span> <span class="pl-s1">new</span>(<span class="pl-smi">Person</span>)

<span class="pl-s1">err</span> <span class="pl-c1">:=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: Id must be greater than 999</span>
<span class="pl-s1">p</span>.<span class="pl-c1">Id</span> <span class="pl-c1">=</span> <span class="pl-c1">1000</span>

<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: Email must be a valid email address</span>
<span class="pl-s1">p</span>.<span class="pl-c1">Email</span> <span class="pl-c1">=</span> <span class="pl-s">"example@bufbuild.com"</span>

<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: Name must match pattern '^[A-Za-z]+( [A-Za-z]+)*$'</span>
<span class="pl-s1">p</span>.<span class="pl-c1">Name</span> <span class="pl-c1">=</span> <span class="pl-s">"Protocol Buffer"</span>

<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: Home is required</span>
<span class="pl-s1">p</span>.<span class="pl-c1">Home</span> <span class="pl-c1">=</span> <span class="pl-c1">&amp;</span><span class="pl-smi">Location</span>{<span class="pl-c1">37.7</span>, <span class="pl-c1">999</span>}

<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: Home.Lng must be within [-180, 180]</span>
<span class="pl-s1">p</span>.<span class="pl-c1">Home</span>.<span class="pl-c1">Lng</span> <span class="pl-c1">=</span> <span class="pl-c1">-</span><span class="pl-c1">122.4</span>

<span class="pl-s1">err</span> <span class="pl-c1">=</span> <span class="pl-s1">p</span>.<span class="pl-c1">Validate</span>() <span class="pl-c">// err: nil</span></pre></div>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Usage</h2><a id="user-content-usage" class="anchor" aria-label="Permalink: Usage" href="#usage"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Dependencies</h3><a id="user-content-dependencies" class="anchor" aria-label="Permalink: Dependencies" href="#dependencies"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><code>go</code> toolchain (≥ v1.7)</li>
<li><code>protoc</code> compiler in <code>$PATH</code></li>
<li><code>protoc-gen-validate</code> in <code>$PATH</code></li>
<li>official language-specific plugin for target language(s)</li>
<li><strong>Only <code>proto3</code> syntax is currently supported.</strong></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Installation</h3><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Download from GitHub Releases</h4><a id="user-content-download-from-github-releases" class="anchor" aria-label="Permalink: Download from GitHub Releases" href="#download-from-github-releases"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Download assets from <a href="https://github.com/bufbuild/protoc-gen-validate/releases">GitHub Releases</a> and unarchive them and add plugins into <code>$PATH</code>.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Build from source</h4><a id="user-content-build-from-source" class="anchor" aria-label="Permalink: Build from source" href="#build-from-source"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# fetches this repo into $GOPATH
go get -d github.com/envoyproxy/protoc-gen-validate"><pre><span class="pl-c"><span class="pl-c">#</span> fetches this repo into $GOPATH</span>
go get -d github.com/envoyproxy/protoc-gen-validate</pre></div>
<blockquote>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">💡 Yes, our go module path is <code>github.com/envoyproxy/protoc-gen-validate</code> <strong>not</strong> <code>bufbuild</code> this is intentional.</h4><a id="user-content--yes-our-go-module-path-is-githubcomenvoyproxyprotoc-gen-validate-not-bufbuild-this-is-intentional" class="anchor" aria-label="Permalink: 💡 Yes, our go module path is github.com/envoyproxy/protoc-gen-validatenotbufbuild this is intentional." href="#-yes-our-go-module-path-is-githubcomenvoyproxyprotoc-gen-validate-not-bufbuild-this-is-intentional"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Changing the module path is effectively creating a new, independent module. We
would prefer not to break our users. The Go team are working on
better <code>cmd/go</code>
support for modules that change paths, but progress is slow. Until then, we
will
continue to use the <code>envoyproxy</code> module path.</p>
</blockquote>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="git clone https://github.com/bufbuild/protoc-gen-validate.git
# installs PGV into $GOPATH/bin
cd protoc-gen-validate &amp;&amp; make build"><pre class="notranslate"><code>git clone https://github.com/bufbuild/protoc-gen-validate.git
# installs PGV into $GOPATH/bin
cd protoc-gen-validate &amp;&amp; make build
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Parameters</h3><a id="user-content-parameters" class="anchor" aria-label="Permalink: Parameters" href="#parameters"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><strong><code>lang</code></strong>: specify the target language to generate. Currently, the only
supported options are:
<ul dir="auto">
<li><code>go</code></li>
<li><code>cc</code> for c++ (partially implemented)</li>
<li><code>java</code></li>
</ul>
</li>
<li>Note: Python works via runtime code generation. There's no compile-time
generation. See the Python section for details.</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Examples</h3><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Go</h4><a id="user-content-go" class="anchor" aria-label="Permalink: Go" href="#go"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Go generation should occur into the same output path as the official plugin. For
a proto file <code>example.proto</code>, the corresponding validation code is generated
into <code>../generated/example.pb.validate.go</code>:</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="protoc \
  -I . \
  -I path/to/validate/ \
  --go_out=&quot;:../generated&quot; \
  --validate_out=&quot;lang=go:../generated&quot; \
  example.proto"><pre>protoc \
  -I <span class="pl-c1">.</span> \
  -I path/to/validate/ \
  --go_out=<span class="pl-s"><span class="pl-pds">"</span>:../generated<span class="pl-pds">"</span></span> \
  --validate_out=<span class="pl-s"><span class="pl-pds">"</span>lang=go:../generated<span class="pl-pds">"</span></span> \
  example.proto</pre></div>
<p dir="auto">All messages generated include the following methods:</p>
<ul dir="auto">
<li><code>Validate() error</code> which returns the first error encountered during
validation.</li>
<li><code>ValidateAll() error</code> which returns all errors encountered during validation.</li>
</ul>
<p dir="auto">PGV requires no additional runtime dependencies from the existing generated
code.</p>
<p dir="auto"><strong>Note</strong>: by default <strong>example.pb.validate.go</strong> is nested in a directory
structure that matches your <code>option go_package</code> name. You can change this using
the protoc parameter <code>paths=source_relative:.</code>, as like <code>--validate_out="lang=go,paths=source_relative:../generated"</code>. Then <code>--validate_out</code> will
output the file where it is expected. See Google's protobuf documentation
or <a href="https://github.com/golang/protobuf#packages-and-input-paths">packages and input paths</a>
or <a href="https://github.com/golang/protobuf#parameters">parameters</a> for more
information.</p>
<p dir="auto">There's also support for the <code>module=example.com/foo</code>
flag <a href="https://developers.google.com/protocol-buffers/docs/reference/go-generated#invocation" rel="nofollow">described here</a>
.</p>
<p dir="auto">With newer Buf CLI versions (&gt;v1.9.0), you can use the new plugin key instead of using the <code>protoc</code> command directly:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# buf.gen.yaml

version: v1
plugins:
  - plugin: buf.build/bufbuild/validate-go
    out: gen"><pre class="notranslate"><code># buf.gen.yaml

version: v1
plugins:
  - plugin: buf.build/bufbuild/validate-go
    out: gen
</code></pre></div>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="# proto/buf.yaml

version: v1
deps:
  - buf.build/envoyproxy/protoc-gen-validate"><pre class="notranslate"><code># proto/buf.yaml

version: v1
deps:
  - buf.build/envoyproxy/protoc-gen-validate
</code></pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Java</h4><a id="user-content-java" class="anchor" aria-label="Permalink: Java" href="#java"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Java generation is integrated with the existing protobuf toolchain for java
projects. For Maven projects, add the
following to your pom.xml or build.gradle.</p>
<div class="highlight highlight-text-xml notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;build.buf.protoc-gen-validate&lt;/groupId&gt;
        &lt;artifactId&gt;pgv-java-stub&lt;/artifactId&gt;
        &lt;version&gt;${pgv.version}&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;build&gt;
&lt;extensions&gt;
    &lt;extension&gt;
        &lt;groupId&gt;kr.motd.maven&lt;/groupId&gt;
        &lt;artifactId&gt;os-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.4.1.Final&lt;/version&gt;
    &lt;/extension&gt;
&lt;/extensions&gt;
&lt;plugins&gt;
    &lt;plugin&gt;
        &lt;groupId&gt;org.xolstice.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;protobuf-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;0.6.1&lt;/version&gt;
        &lt;configuration&gt;
            &lt;protocArtifact&gt;
                com.google.protobuf:protoc:${protoc.version}:exe:${os.detected.classifier}
            &lt;/protocArtifact&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
            &lt;execution&gt;
                &lt;id&gt;protoc-java-pgv&lt;/id&gt;
                &lt;goals&gt;
                    &lt;goal&gt;compile-custom&lt;/goal&gt;
                &lt;/goals&gt;
                &lt;configuration&gt;
                    &lt;pluginParameter&gt;lang=java&lt;/pluginParameter&gt;
                    &lt;pluginId&gt;java-pgv&lt;/pluginId&gt;
                    &lt;pluginArtifact&gt;
                        build.buf.protoc-gen-validate:protoc-gen-validate:${pgv.version}:exe:${os.detected.classifier}
                    &lt;/pluginArtifact&gt;
                &lt;/configuration&gt;
            &lt;/execution&gt;
        &lt;/executions&gt;
    &lt;/plugin&gt;
&lt;/plugins&gt;
&lt;/build&gt;"><pre>&lt;<span class="pl-ent">dependencies</span>&gt;
    &lt;<span class="pl-ent">dependency</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;build.buf.protoc-gen-validate&lt;/<span class="pl-ent">groupId</span>&gt;
        &lt;<span class="pl-ent">artifactId</span>&gt;pgv-java-stub&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;${pgv.version}&lt;/<span class="pl-ent">version</span>&gt;
    &lt;/<span class="pl-ent">dependency</span>&gt;
&lt;/<span class="pl-ent">dependencies</span>&gt;

&lt;<span class="pl-ent">build</span>&gt;
&lt;<span class="pl-ent">extensions</span>&gt;
    &lt;<span class="pl-ent">extension</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;kr.motd.maven&lt;/<span class="pl-ent">groupId</span>&gt;
        &lt;<span class="pl-ent">artifactId</span>&gt;os-maven-plugin&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;1.4.1.Final&lt;/<span class="pl-ent">version</span>&gt;
    &lt;/<span class="pl-ent">extension</span>&gt;
&lt;/<span class="pl-ent">extensions</span>&gt;
&lt;<span class="pl-ent">plugins</span>&gt;
    &lt;<span class="pl-ent">plugin</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;org.xolstice.maven.plugins&lt;/<span class="pl-ent">groupId</span>&gt;
        &lt;<span class="pl-ent">artifactId</span>&gt;protobuf-maven-plugin&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;0.6.1&lt;/<span class="pl-ent">version</span>&gt;
        &lt;<span class="pl-ent">configuration</span>&gt;
            &lt;<span class="pl-ent">protocArtifact</span>&gt;
                com.google.protobuf:protoc:${protoc.version}:exe:${os.detected.classifier}
            &lt;/<span class="pl-ent">protocArtifact</span>&gt;
        &lt;/<span class="pl-ent">configuration</span>&gt;
        &lt;<span class="pl-ent">executions</span>&gt;
            &lt;<span class="pl-ent">execution</span>&gt;
                &lt;<span class="pl-ent">id</span>&gt;protoc-java-pgv&lt;/<span class="pl-ent">id</span>&gt;
                &lt;<span class="pl-ent">goals</span>&gt;
                    &lt;<span class="pl-ent">goal</span>&gt;compile-custom&lt;/<span class="pl-ent">goal</span>&gt;
                &lt;/<span class="pl-ent">goals</span>&gt;
                &lt;<span class="pl-ent">configuration</span>&gt;
                    &lt;<span class="pl-ent">pluginParameter</span>&gt;lang=java&lt;/<span class="pl-ent">pluginParameter</span>&gt;
                    &lt;<span class="pl-ent">pluginId</span>&gt;java-pgv&lt;/<span class="pl-ent">pluginId</span>&gt;
                    &lt;<span class="pl-ent">pluginArtifact</span>&gt;
                        build.buf.protoc-gen-validate:protoc-gen-validate:${pgv.version}:exe:${os.detected.classifier}
                    &lt;/<span class="pl-ent">pluginArtifact</span>&gt;
                &lt;/<span class="pl-ent">configuration</span>&gt;
            &lt;/<span class="pl-ent">execution</span>&gt;
        &lt;/<span class="pl-ent">executions</span>&gt;
    &lt;/<span class="pl-ent">plugin</span>&gt;
&lt;/<span class="pl-ent">plugins</span>&gt;
&lt;/<span class="pl-ent">build</span>&gt;</pre></div>
<div class="highlight highlight-source-groovy-gradle notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="plugins {
    ...
    id &quot;com.google.protobuf&quot; version &quot;${protobuf.version}&quot;
    ...
}

protobuf {
    protoc {
        artifact = &quot;com.google.protobuf:protoc:${protoc.version}&quot;
    }

    plugins {
        javapgv {
            artifact = &quot;build.buf.protoc-gen-validate:protoc-gen-validate:${pgv.version}&quot;
        }
    }

    generateProtoTasks {
        all()*.plugins {
            javapgv {
                option &quot;lang=java&quot;
            }
        }
    }
}"><pre><span class="pl-en">plugins</span> {
    <span class="pl-k">..</span>.
    id <span class="pl-s"><span class="pl-pds">"</span>com.google.protobuf<span class="pl-pds">"</span></span> version <span class="pl-s"><span class="pl-pds">"</span><span class="pl-s1"><span class="pl-pse">${</span>protobuf.version<span class="pl-pse">}</span></span><span class="pl-pds">"</span></span>
    <span class="pl-k">..</span>.
}

<span class="pl-en">protobuf</span> {
    protoc {
        artifact <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.google.protobuf:protoc:<span class="pl-s1"><span class="pl-pse">${</span>protoc.version<span class="pl-pse">}</span></span><span class="pl-pds">"</span></span>
    }

    plugins {
        javapgv {
            artifact <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>build.buf.protoc-gen-validate:protoc-gen-validate:<span class="pl-s1"><span class="pl-pse">${</span>pgv.version<span class="pl-pse">}</span></span><span class="pl-pds">"</span></span>
        }
    }

    generateProtoTasks {
        all()<span class="pl-k">*</span><span class="pl-k">.</span>plugins {
            javapgv {
                option <span class="pl-s"><span class="pl-pds">"</span>lang=java<span class="pl-pds">"</span></span>
            }
        }
    }
}</pre></div>
<div class="highlight highlight-source-java notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Create a validator index that reflectively loads generated validators
ValidatorIndex index = new ReflectiveValidatorIndex();
// Assert that a message is valid
index.validatorFor(message.getClass()).assertValid(message);

// Create a gRPC client and server interceptor to automatically validate messages (requires pgv-java-grpc module)
clientStub = clientStub.withInterceptors(new ValidatingClientInterceptor(index));
serverBuilder.addService(ServerInterceptors.intercept(svc, new ValidatingServerInterceptor(index)));"><pre><span class="pl-c">// Create a validator index that reflectively loads generated validators</span>
<span class="pl-smi">ValidatorIndex</span> <span class="pl-s1">index</span> = <span class="pl-k">new</span> <span class="pl-smi">ReflectiveValidatorIndex</span>();
<span class="pl-c">// Assert that a message is valid</span>
<span class="pl-s1">index</span>.<span class="pl-en">validatorFor</span>(<span class="pl-s1">message</span>.<span class="pl-en">getClass</span>()).<span class="pl-en">assertValid</span>(<span class="pl-s1">message</span>);

<span class="pl-c">// Create a gRPC client and server interceptor to automatically validate messages (requires pgv-java-grpc module)</span>
<span class="pl-s1">clientStub</span> = <span class="pl-s1">clientStub</span>.<span class="pl-en">withInterceptors</span>(<span class="pl-k">new</span> <span class="pl-smi">ValidatingClientInterceptor</span>(<span class="pl-s1">index</span>));
<span class="pl-s1">serverBuilder</span>.<span class="pl-en">addService</span>(<span class="pl-smi">ServerInterceptors</span>.<span class="pl-en">intercept</span>(<span class="pl-s1">svc</span>, <span class="pl-k">new</span> <span class="pl-smi">ValidatingServerInterceptor</span>(<span class="pl-s1">index</span>)));</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Python</h4><a id="user-content-python" class="anchor" aria-label="Permalink: Python" href="#python"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">The python implementation works via JIT code generation. In other words,
the <code>validate(msg)</code> function is written
on-demand and <a href="https://docs.python.org/3/library/functions.html#exec" rel="nofollow">exec-ed</a>.
An LRU-cache improves performance by
storing generated functions per descriptor.</p>
<p dir="auto">The python package is available
on <a href="https://pypi.org/project/protoc-gen-validate" rel="nofollow">PyPI</a>.</p>
<p dir="auto">To run <code>validate()</code>, do the following:</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="from entities_pb2 import Person
from protoc_gen_validate.validator import validate, ValidationFailed

p = Person(first_name=&quot;Foo&quot;, last_name=&quot;Bar&quot;, age=42)
try:
    validate(p)
except ValidationFailed as err:
    print(err)"><pre><span class="pl-k">from</span> <span class="pl-s1">entities_pb2</span> <span class="pl-k">import</span> <span class="pl-v">Person</span>
<span class="pl-k">from</span> <span class="pl-s1">protoc_gen_validate</span>.<span class="pl-s1">validator</span> <span class="pl-k">import</span> <span class="pl-s1">validate</span>, <span class="pl-v">ValidationFailed</span>

<span class="pl-s1">p</span> <span class="pl-c1">=</span> <span class="pl-en">Person</span>(<span class="pl-s1">first_name</span><span class="pl-c1">=</span><span class="pl-s">"Foo"</span>, <span class="pl-s1">last_name</span><span class="pl-c1">=</span><span class="pl-s">"Bar"</span>, <span class="pl-s1">age</span><span class="pl-c1">=</span><span class="pl-c1">42</span>)
<span class="pl-k">try</span>:
    <span class="pl-en">validate</span>(<span class="pl-s1">p</span>)
<span class="pl-k">except</span> <span class="pl-v">ValidationFailed</span> <span class="pl-k">as</span> <span class="pl-s1">err</span>:
    <span class="pl-en">print</span>(<span class="pl-s1">err</span>)</pre></div>
<p dir="auto">You can view what code has been generated by using the <code>print_validate()</code>
function.</p>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Constraint Rules</h2><a id="user-content-constraint-rules" class="anchor" aria-label="Permalink: Constraint Rules" href="#constraint-rules"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a href="validate/validate.proto">The provided constraints</a> are modeled largerly after
those in JSON Schema. PGV rules can be mixed for the same field; the plugin
ensures the rules applied to a field cannot contradict before code generation.</p>
<p dir="auto">Check the <a href="rule_comparison.md">constraint rule comparison matrix</a> for
language-specific constraint capabilities.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Numerics</h3><a id="user-content-numerics" class="anchor" aria-label="Permalink: Numerics" href="#numerics"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<blockquote>
<p dir="auto">All numeric types (<code>float</code>, <code>double</code>, <code>int32</code>, <code>int64</code>, <code>uint32</code>, <code>uint64</code>
, <code>sint32</code>, <code>sint64</code>, <code>fixed32</code>, <code>fixed64</code>, <code>sfixed32</code>, <code>sfixed64</code>) share the
same rules.</p>
</blockquote>
<ul dir="auto">
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must equal 1.23 exactly
float x = 1 [(validate.rules).float.const = 1.23];"><pre><span class="pl-c">// x must equal 1.23 exactly</span>
float x = 1 [(validate.rules).float.const = 1.23];</pre></div>
</li>
<li>
<p dir="auto"><strong>lt/lte/gt/gte</strong>: these inequalities (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, respectively)
allow for deriving ranges in which the field must reside.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be less than 10
int32 x = 1 [(validate.rules).int32.lt = 10];

// x must be greater than or equal to 20
uint64 x = 1 [(validate.rules).uint64.gte = 20];

// x must be in the range [30, 40)
fixed32 x = 1 [(validate.rules).fixed32 = {gte:30, lt: 40}];"><pre><span class="pl-c">// x must be less than 10</span>
int32 x = 1 [(validate.rules).int32.lt = 10];

<span class="pl-c">// x must be greater than or equal to 20</span>
uint64 x = 1 [(validate.rules).uint64.gte = 20];

<span class="pl-c">// x must be in the range [30, 40)</span>
fixed32 x = 1 [(validate.rules).fixed32 = {gte:30, lt: 40}];</pre></div>
<p dir="auto">Inverting the values of <code>lt(e)</code> and <code>gt(e)</code> is valid and creates an exclusive
range.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be outside the range [30, 40)
double x = 1 [(validate.rules).double = {lt:30, gte:40}];"><pre><span class="pl-c">// x must be outside the range [30, 40)</span>
double x = 1 [(validate.rules).double = {lt:30, gte:40}];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for the
values of a field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be either 1, 2, or 3
uint32 x = 1 [(validate.rules).uint32 = {in: [1,2,3]}];

// x cannot be 0 nor 0.99
float x = 1 [(validate.rules).float = {not_in: [0, 0.99]}];"><pre><span class="pl-c">// x must be either 1, 2, or 3</span>
uint32 x = 1 [(validate.rules).uint32 = {in: [1,2,3]}];

<span class="pl-c">// x cannot be 0 nor 0.99</span>
float x = 1 [(validate.rules).float = {not_in: [0, 0.99]}];</pre></div>
</li>
<li>
<p dir="auto"><strong>ignore_empty</strong>: this rule specifies that if field is empty or set to the
default value, to ignore any validation rules. These are typically useful
where being able to unset a field in an update request, or to skip validation
for optional fields where switching to WKTs is not feasible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="uint32 x = 1 [(validate.rules).uint32 = {ignore_empty: true, gte: 200}];"><pre>uint32 x = 1 [(validate.rules).uint32 = {ignore_empty: true, gte: 200}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bools</h3><a id="user-content-bools" class="anchor" aria-label="Permalink: Bools" href="#bools"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be set to true
bool x = 1 [(validate.rules).bool.const = true];

// x cannot be set to true
bool x = 1 [(validate.rules).bool.const = false];"><pre><span class="pl-c">// x must be set to true</span>
bool x = 1 [(validate.rules).bool.const = true];

<span class="pl-c">// x cannot be set to true</span>
bool x = 1 [(validate.rules).bool.const = false];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Strings</h3><a id="user-content-strings" class="anchor" aria-label="Permalink: Strings" href="#strings"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be set to &quot;foo&quot;
string x = 1 [(validate.rules).string.const = &quot;foo&quot;];"><pre><span class="pl-c">// x must be set to "foo"</span>
string x = 1 [(validate.rules).string.const = "foo"];</pre></div>
</li>
<li>
<p dir="auto"><strong>len/min_len/max_len</strong>: these rules constrain the number of characters (
Unicode code points) in the field. Note that the number of characters may
differ from the number of bytes in the string. The string is considered as-is,
and does not normalize.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be exactly 5 characters long
string x = 1 [(validate.rules).string.len = 5];

// x must be at least 3 characters long
string x = 1 [(validate.rules).string.min_len = 3];

// x must be between 5 and 10 characters, inclusive
string x = 1 [(validate.rules).string = {min_len: 5, max_len: 10}];"><pre><span class="pl-c">// x must be exactly 5 characters long</span>
string x = 1 [(validate.rules).string.len = 5];

<span class="pl-c">// x must be at least 3 characters long</span>
string x = 1 [(validate.rules).string.min_len = 3];

<span class="pl-c">// x must be between 5 and 10 characters, inclusive</span>
string x = 1 [(validate.rules).string = {min_len: 5, max_len: 10}];</pre></div>
</li>
<li>
<p dir="auto"><strong>min_bytes/max_bytes</strong>: these rules constrain the number of bytes in the
field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be at most 15 bytes long
string x = 1 [(validate.rules).string.max_bytes = 15];

// x must be between 128 and 1024 bytes long
string x = 1 [(validate.rules).string = {min_bytes: 128, max_bytes: 1024}];"><pre><span class="pl-c">// x must be at most 15 bytes long</span>
string x = 1 [(validate.rules).string.max_bytes = 15];

<span class="pl-c">// x must be between 128 and 1024 bytes long</span>
string x = 1 [(validate.rules).string = {min_bytes: 128, max_bytes: 1024}];</pre></div>
</li>
<li>
<p dir="auto"><strong>pattern</strong>: the field must match the specified <a href="https://github.com/google/re2/wiki/Syntax">RE2-compliant</a> regular
expression. The included expression should elide any delimiters (ie, <code>/\d+/</code>
should just be <code>\d+</code>).</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be a non-empty, case-insensitive hexadecimal string
string x = 1 [(validate.rules).string.pattern = &quot;(?i)^[0-9a-f]+$&quot;];"><pre><span class="pl-c">// x must be a non-empty, case-insensitive hexadecimal string</span>
string x = 1 [(validate.rules).string.pattern = "(?i)^[0-9a-f]+$"];</pre></div>
</li>
<li>
<p dir="auto"><strong>prefix/suffix/contains/not_contains</strong>: the field must contain the specified
substring in an optionally explicit location, or not contain the specified
substring.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must begin with &quot;foo&quot;
string x = 1 [(validate.rules).string.prefix = &quot;foo&quot;];

// x must end with &quot;bar&quot;
string x = 1 [(validate.rules).string.suffix = &quot;bar&quot;];

// x must contain &quot;baz&quot; anywhere inside it
string x = 1 [(validate.rules).string.contains = &quot;baz&quot;];

// x cannot contain &quot;baz&quot; anywhere inside it
string x = 1 [(validate.rules).string.not_contains = &quot;baz&quot;];

// x must begin with &quot;fizz&quot; and end with &quot;buzz&quot;
string x = 1 [(validate.rules).string = {prefix: &quot;fizz&quot;, suffix: &quot;buzz&quot;}];

// x must end with &quot;.proto&quot; and be less than 64 characters
string x = 1 [(validate.rules).string = {suffix: &quot;.proto&quot;, max_len:64}];"><pre><span class="pl-c">// x must begin with "foo"</span>
string x = 1 [(validate.rules).string.prefix = "foo"];

<span class="pl-c">// x must end with "bar"</span>
string x = 1 [(validate.rules).string.suffix = "bar"];

<span class="pl-c">// x must contain "baz" anywhere inside it</span>
string x = 1 [(validate.rules).string.contains = "baz"];

<span class="pl-c">// x cannot contain "baz" anywhere inside it</span>
string x = 1 [(validate.rules).string.not_contains = "baz"];

<span class="pl-c">// x must begin with "fizz" and end with "buzz"</span>
string x = 1 [(validate.rules).string = {prefix: "fizz", suffix: "buzz"}];

<span class="pl-c">// x must end with ".proto" and be less than 64 characters</span>
string x = 1 [(validate.rules).string = {suffix: ".proto", max_len:64}];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for the
values of a field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be either &quot;foo&quot;, &quot;bar&quot;, or &quot;baz&quot;
string x = 1 [(validate.rules).string = {in: [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]}];

// x cannot be &quot;fizz&quot; nor &quot;buzz&quot;
string x = 1 [(validate.rules).string = {not_in: [&quot;fizz&quot;, &quot;buzz&quot;]}];"><pre><span class="pl-c">// x must be either "foo", "bar", or "baz"</span>
string x = 1 [(validate.rules).string = {in: ["foo", "bar", "baz"]}];

<span class="pl-c">// x cannot be "fizz" nor "buzz"</span>
string x = 1 [(validate.rules).string = {not_in: ["fizz", "buzz"]}];</pre></div>
</li>
<li>
<p dir="auto"><strong>ignore_empty</strong>: this rule specifies that if field is empty or set to the
default value, to ignore any validation rules. These are typically useful
where being able to unset a field in an update request, or to skip validation
for optional fields where switching to WKTs is not feasible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="string CountryCode = 1 [(validate.rules).string = {ignore_empty: true, len: 2}];"><pre>string CountryCode = 1 [(validate.rules).string = {ignore_empty: true, len: 2}];</pre></div>
</li>
<li>
<p dir="auto"><strong>well-known formats</strong>: these rules provide advanced constraints for common
string patterns. These constraints will typically be more permissive and
performant than equivalent regular expression patterns, while providing more
explanatory failure descriptions.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be a valid email address (via RFC 5322)
string x = 1 [(validate.rules).string.email = true];

// x must be a valid address (IP or Hostname).
string x = 1 [(validate.rules).string.address = true];

// x must be a valid hostname (via RFC 1034)
string x = 1 [(validate.rules).string.hostname = true];

// x must be a valid IP address (either v4 or v6)
string x = 1 [(validate.rules).string.ip = true];

// x must be a valid IPv4 address
// eg: &quot;192.168.0.1&quot;
string x = 1 [(validate.rules).string.ipv4 = true];

// x must be a valid IPv6 address
// eg: &quot;fe80::3&quot;
string x = 1 [(validate.rules).string.ipv6 = true];

// x must be a valid absolute URI (via RFC 3986)
string x = 1 [(validate.rules).string.uri = true];

// x must be a valid URI reference (either absolute or relative)
string x = 1 [(validate.rules).string.uri_ref = true];

// x must be a valid UUID (via RFC 4122)
string x = 1 [(validate.rules).string.uuid = true];

// x must conform to a well known regex for HTTP header names (via RFC 7230)
string x = 1 [(validate.rules).string.well_known_regex = HTTP_HEADER_NAME]

// x must conform to a well known regex for HTTP header values (via RFC 7230)
string x = 1 [(validate.rules).string.well_known_regex = HTTP_HEADER_VALUE];

// x must conform to a well known regex for headers, disallowing \r\n\0 characters.
string x = 1 [(validate.rules).string {well_known_regex: HTTP_HEADER_VALUE, strict: false}];"><pre><span class="pl-c">// x must be a valid email address (via RFC 5322)</span>
string x = 1 [(validate.rules).string.email = true];

<span class="pl-c">// x must be a valid address (IP or Hostname).</span>
string x = 1 [(validate.rules).string.address = true];

<span class="pl-c">// x must be a valid hostname (via RFC 1034)</span>
string x = 1 [(validate.rules).string.hostname = true];

<span class="pl-c">// x must be a valid IP address (either v4 or v6)</span>
string x = 1 [(validate.rules).string.ip = true];

<span class="pl-c">// x must be a valid IPv4 address</span>
<span class="pl-c">// eg: "192.168.0.1"</span>
string x = 1 [(validate.rules).string.ipv4 = true];

<span class="pl-c">// x must be a valid IPv6 address</span>
<span class="pl-c">// eg: "fe80::3"</span>
string x = 1 [(validate.rules).string.ipv6 = true];

<span class="pl-c">// x must be a valid absolute URI (via RFC 3986)</span>
string x = 1 [(validate.rules).string.uri = true];

<span class="pl-c">// x must be a valid URI reference (either absolute or relative)</span>
string x = 1 [(validate.rules).string.uri_ref = true];

<span class="pl-c">// x must be a valid UUID (via RFC 4122)</span>
string x = 1 [(validate.rules).string.uuid = true];

<span class="pl-c">// x must conform to a well known regex for HTTP header names (via RFC 7230)</span>
string x = 1 [(validate.rules).string.well_known_regex = HTTP_HEADER_NAME]

<span class="pl-c">// x must conform to a well known regex for HTTP header values (via RFC 7230)</span>
string x = 1 [(validate.rules).string.well_known_regex = HTTP_HEADER_VALUE];

<span class="pl-c">// x must conform to a well known regex for headers, disallowing \r\n\0 characters.</span>
string x = 1 [(validate.rules).string {well_known_regex: HTTP_HEADER_VALUE, strict: false}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Bytes</h3><a id="user-content-bytes" class="anchor" aria-label="Permalink: Bytes" href="#bytes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<blockquote>
<p dir="auto">Literal values should be expressed with strings, using escaping where
necessary.</p>
</blockquote>
<ul dir="auto">
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be set to &quot;foo&quot; (&quot;\x66\x6f\x6f&quot;)
bytes x = 1 [(validate.rules).bytes.const = &quot;foo&quot;];

// x must be set to &quot;\xf0\x90\x28\xbc&quot;
bytes x = 1 [(validate.rules).bytes.const = &quot;\xf0\x90\x28\xbc&quot;];"><pre><span class="pl-c">// x must be set to "foo" ("\x66\x6f\x6f")</span>
bytes x = 1 [(validate.rules).bytes.const = "foo"];

<span class="pl-c">// x must be set to "\xf0\x90\x28\xbc"</span>
bytes x = 1 [(validate.rules).bytes.const = "\xf0\x90\x28\xbc"];</pre></div>
</li>
<li>
<p dir="auto"><strong>len/min_len/max_len</strong>: these rules constrain the number of bytes in the
field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be exactly 3 bytes
bytes x = 1 [(validate.rules).bytes.len = 3];

// x must be at least 3 bytes long
bytes x = 1 [(validate.rules).bytes.min_len = 3];

// x must be between 5 and 10 bytes, inclusive
bytes x = 1 [(validate.rules).bytes = {min_len: 5, max_len: 10}];"><pre><span class="pl-c">// x must be exactly 3 bytes</span>
bytes x = 1 [(validate.rules).bytes.len = 3];

<span class="pl-c">// x must be at least 3 bytes long</span>
bytes x = 1 [(validate.rules).bytes.min_len = 3];

<span class="pl-c">// x must be between 5 and 10 bytes, inclusive</span>
bytes x = 1 [(validate.rules).bytes = {min_len: 5, max_len: 10}];</pre></div>
</li>
<li>
<p dir="auto"><strong>pattern</strong>: the field must match the specified <a href="https://github.com/google/re2/wiki/Syntax">RE2-compliant</a> regular
expression. The included expression should elide any delimiters (ie, <code>/\d+/</code>
should just be <code>\d+</code>).</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be a non-empty, ASCII byte sequence
bytes x = 1 [(validate.rules).bytes.pattern = &quot;^[\x00-\x7F]+$&quot;];"><pre><span class="pl-c">// x must be a non-empty, ASCII byte sequence</span>
bytes x = 1 [(validate.rules).bytes.pattern = "^[\x00-\x7F]+$"];</pre></div>
</li>
<li>
<p dir="auto"><strong>prefix/suffix/contains</strong>: the field must contain the specified byte sequence
in an optionally explicit location.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must begin with &quot;\x99&quot;
bytes x = 1 [(validate.rules).bytes.prefix = &quot;\x99&quot;];

// x must end with &quot;buz\x7a&quot;
bytes x = 1 [(validate.rules).bytes.suffix = &quot;buz\x7a&quot;];

// x must contain &quot;baz&quot; anywhere inside it
bytes x = 1 [(validate.rules).bytes.contains = &quot;baz&quot;];"><pre><span class="pl-c">// x must begin with "\x99"</span>
bytes x = 1 [(validate.rules).bytes.prefix = "\x99"];

<span class="pl-c">// x must end with "buz\x7a"</span>
bytes x = 1 [(validate.rules).bytes.suffix = "buz\x7a"];

<span class="pl-c">// x must contain "baz" anywhere inside it</span>
bytes x = 1 [(validate.rules).bytes.contains = "baz"];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for the
values of a field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be either &quot;foo&quot;, &quot;bar&quot;, or &quot;baz&quot;
bytes x = 1 [(validate.rules).bytes = {in: [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]}];

// x cannot be &quot;fizz&quot; nor &quot;buzz&quot;
bytes x = 1 [(validate.rules).bytes = {not_in: [&quot;fizz&quot;, &quot;buzz&quot;]}];"><pre><span class="pl-c">// x must be either "foo", "bar", or "baz"</span>
bytes x = 1 [(validate.rules).bytes = {in: ["foo", "bar", "baz"]}];

<span class="pl-c">// x cannot be "fizz" nor "buzz"</span>
bytes x = 1 [(validate.rules).bytes = {not_in: ["fizz", "buzz"]}];</pre></div>
</li>
<li>
<p dir="auto"><strong>ignore_empty</strong>: this rule specifies that if field is empty or set to the
default value, to ignore any validation rules. These are typically useful
where being able to unset a field in an update request, or to skip validation
for optional fields where switching to WKTs is not feasible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="bytes x = 1 [(validate.rules).bytes = {ignore_empty: true, in: [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]}];"><pre>bytes x = 1 [(validate.rules).bytes = {ignore_empty: true, in: ["foo", "bar", "baz"]}];</pre></div>
</li>
<li>
<p dir="auto"><strong>well-known formats</strong>: these rules provide advanced constraints for common
patterns. These constraints will typically be more permissive and performant
than equivalent regular expression patterns, while providing more explanatory
failure descriptions.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be a valid IP address (either v4 or v6) in byte format
bytes x = 1 [(validate.rules).bytes.ip = true];

// x must be a valid IPv4 address in byte format
// eg: &quot;\xC0\xA8\x00\x01&quot;
bytes x = 1 [(validate.rules).bytes.ipv4 = true];

// x must be a valid IPv6 address in byte format
// eg: &quot;\x20\x01\x0D\xB8\x85\xA3\x00\x00\x00\x00\x8A\x2E\x03\x70\x73\x34&quot;
bytes x = 1 [(validate.rules).bytes.ipv6 = true];"><pre><span class="pl-c">// x must be a valid IP address (either v4 or v6) in byte format</span>
bytes x = 1 [(validate.rules).bytes.ip = true];

<span class="pl-c">// x must be a valid IPv4 address in byte format</span>
<span class="pl-c">// eg: "\xC0\xA8\x00\x01"</span>
bytes x = 1 [(validate.rules).bytes.ipv4 = true];

<span class="pl-c">// x must be a valid IPv6 address in byte format</span>
<span class="pl-c">// eg: "\x20\x01\x0D\xB8\x85\xA3\x00\x00\x00\x00\x8A\x2E\x03\x70\x73\x34"</span>
bytes x = 1 [(validate.rules).bytes.ipv6 = true];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Enums</h3><a id="user-content-enums" class="anchor" aria-label="Permalink: Enums" href="#enums"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<blockquote>
<p dir="auto">All literal values should use the numeric (int32) value as defined in the enum
descriptor.</p>
</blockquote>
<p dir="auto">The following examples use this <code>State</code> enum</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="enum State {
  INACTIVE = 0;
  PENDING = 1;
  ACTIVE = 2;
}"><pre><span class="pl-k">enum</span> <span class="pl-en">State</span> {
  <span class="pl-smi">INACTIVE</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>;
  <span class="pl-smi">PENDING</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>;
  <span class="pl-smi">ACTIVE</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>;
}</pre></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be set to ACTIVE (2)
State x = 1 [(validate.rules).enum.const = 2];"><pre><span class="pl-c">// x must be set to ACTIVE (2)</span>
State x = 1 [(validate.rules).enum.const = 2];</pre></div>
</li>
<li>
<p dir="auto"><strong>defined_only</strong>: the field must be one of the specified values in the enum
descriptor.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x can only be INACTIVE, PENDING, or ACTIVE
State x = 1 [(validate.rules).enum.defined_only = true];"><pre><span class="pl-c">// x can only be INACTIVE, PENDING, or ACTIVE</span>
State x = 1 [(validate.rules).enum.defined_only = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for the
values of a field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be either INACTIVE (0) or ACTIVE (2)
State x = 1 [(validate.rules).enum = {in: [0,2]}];

// x cannot be PENDING (1)
State x = 1 [(validate.rules).enum = {not_in: [1]}];"><pre><span class="pl-c">// x must be either INACTIVE (0) or ACTIVE (2)</span>
State x = 1 [(validate.rules).enum = {in: [0,2]}];

<span class="pl-c">// x cannot be PENDING (1)</span>
State x = 1 [(validate.rules).enum = {not_in: [1]}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Messages</h3><a id="user-content-messages" class="anchor" aria-label="Permalink: Messages" href="#messages"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<blockquote>
<p dir="auto">If a field contains a message and the message has been generated with PGV,
validation will be performed recursively. Message's not generated with PGV are
skipped.</p>
</blockquote>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// if Person was generated with PGV and x is set,
// x's fields will be validated.
    Person x = 1;"><pre><span class="pl-c">// if Person was generated with PGV and x is set,</span>
<span class="pl-c">// x's fields will be validated.</span>
    Person x = 1;</pre></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>skip</strong>: this rule specifies that the validation rules of this field should
not be evaluated.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// The fields on Person x will not be validated.
Person x = 1 [(validate.rules).message.skip = true];"><pre><span class="pl-c">// The fields on Person x will not be validated.</span>
Person x = 1 [(validate.rules).message.skip = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>required</strong>: this rule specifies that the field cannot be unset.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x cannot be unset
Person x = 1 [(validate.rules).message.required = true];

// x cannot be unset, but the validations on x will not be performed
Person x = 1 [(validate.rules).message = {required: true, skip: true}];"><pre><span class="pl-c">// x cannot be unset</span>
Person x = 1 [(validate.rules).message.required = true];

<span class="pl-c">// x cannot be unset, but the validations on x will not be performed</span>
Person x = 1 [(validate.rules).message = {required: true, skip: true}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Repeated</h3><a id="user-content-repeated" class="anchor" aria-label="Permalink: Repeated" href="#repeated"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>min_items/max_items</strong>: these rules control how many elements are contained
in the field</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must contain at least 3 elements
repeated int32 x = 1 [(validate.rules).repeated.min_items = 3];

// x must contain between 5 and 10 Persons, inclusive
repeated Person x = 1 [(validate.rules).repeated = {min_items: 5, max_items: 10}];

// x must contain exactly 7 elements
repeated double x = 1 [(validate.rules).repeated = {min_items: 7, max_items: 7}];"><pre><span class="pl-c">// x must contain at least 3 elements</span>
repeated int32 x = 1 [(validate.rules).repeated.min_items = 3];

<span class="pl-c">// x must contain between 5 and 10 Persons, inclusive</span>
repeated Person x = 1 [(validate.rules).repeated = {min_items: 5, max_items: 10}];

<span class="pl-c">// x must contain exactly 7 elements</span>
repeated double x = 1 [(validate.rules).repeated = {min_items: 7, max_items: 7}];</pre></div>
</li>
<li>
<p dir="auto"><strong>unique</strong>: this rule requires that all elements in the field must be unique.
This rule does not support repeated messages.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must contain unique int64 values
repeated int64 x = 1 [(validate.rules).repeated.unique = true];"><pre><span class="pl-c">// x must contain unique int64 values</span>
repeated int64 x = 1 [(validate.rules).repeated.unique = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>items</strong>: this rule specifies constraints that should be applied to each
element in the field. Repeated message fields also have their validation rules
applied unless <code>skip</code> is specified on this constraint.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must contain positive float values
repeated float x = 1 [(validate.rules).repeated.items.float.gt = 0];

// x must contain Persons but don't validate them
repeated Person x = 1 [(validate.rules).repeated.items.message.skip = true];"><pre><span class="pl-c">// x must contain positive float values</span>
repeated float x = 1 [(validate.rules).repeated.items.float.gt = 0];

<span class="pl-c">// x must contain Persons but don't validate them</span>
repeated Person x = 1 [(validate.rules).repeated.items.message.skip = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>ignore_empty</strong>: this rule specifies that if field is empty or set to the
default value, to ignore any validation rules. These are typically useful
where being able to unset a field in an update request, or to skip validation
for optional fields where switching to WKTs is not feasible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="repeated int64 x = 1 [(validate.rules).repeated = {ignore_empty: true, items: {int64: {gt: 200}}}];"><pre>repeated int64 x = 1 [(validate.rules).repeated = {ignore_empty: true, items: {int64: {gt: 200}}}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Maps</h3><a id="user-content-maps" class="anchor" aria-label="Permalink: Maps" href="#maps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>min_pairs/max_pairs</strong>: these rules control how many KV pairs are contained
in this field</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must contain at least 3 KV pairs
map&lt;string, uint64&gt; x = 1 [(validate.rules).map.min_pairs = 3];

// x must contain between 5 and 10 KV pairs
map&lt;string, string&gt; x = 1 [(validate.rules).map = {min_pairs: 5, max_pairs: 10}];

// x must contain exactly 7 KV pairs
map&lt;string, Person&gt; x = 1 [(validate.rules).map = {min_pairs: 7, max_pairs: 7}];"><pre><span class="pl-c">// x must contain at least 3 KV pairs</span>
map&lt;string, uint64&gt; x = 1 [(validate.rules).map.min_pairs = 3];

<span class="pl-c">// x must contain between 5 and 10 KV pairs</span>
map&lt;string, string&gt; x = 1 [(validate.rules).map = {min_pairs: 5, max_pairs: 10}];

<span class="pl-c">// x must contain exactly 7 KV pairs</span>
map&lt;string, Person&gt; x = 1 [(validate.rules).map = {min_pairs: 7, max_pairs: 7}];</pre></div>
</li>
<li>
<p dir="auto"><strong>no_sparse</strong>: for map fields with message values, setting this rule to true
disallows keys with unset values.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// all values in x must be set
map&lt;uint64, Person&gt; x = 1 [(validate.rules).map.no_sparse = true];"><pre><span class="pl-c">// all values in x must be set</span>
map&lt;uint64, Person&gt; x = 1 [(validate.rules).map.no_sparse = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>keys</strong>: this rule specifies constraints that are applied to the keys in the
field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x's keys must all be negative
&lt;sint32, string&gt; x = [(validate.rules).map.keys.sint32.lt = 0];"><pre><span class="pl-c">// x's keys must all be negative</span>
&lt;sint32, string&gt; x = [(validate.rules).map.keys.sint32.lt = 0];</pre></div>
</li>
<li>
<p dir="auto"><strong>values</strong>: this rule specifies constraints that are be applied to each value
in the field. Repeated message fields also have their validation rules applied
unless <code>skip</code> is specified on this constraint.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must contain strings of at least 3 characters
map&lt;string, string&gt; x = 1 [(validate.rules).map.values.string.min_len = 3];

// x must contain Persons but doesn't validate them
map&lt;string, Person&gt; x = 1 [(validate.rules).map.values.message.skip = true];"><pre><span class="pl-c">// x must contain strings of at least 3 characters</span>
map&lt;string, string&gt; x = 1 [(validate.rules).map.values.string.min_len = 3];

<span class="pl-c">// x must contain Persons but doesn't validate them</span>
map&lt;string, Person&gt; x = 1 [(validate.rules).map.values.message.skip = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>ignore_empty</strong>: this rule specifies that if field is empty or set to the
default value, to ignore any validation rules. These are typically useful
where being able to unset a field in an update request, or to skip validation
for optional fields where switching to WKTs is not feasible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="map&lt;string, string&gt; x = 1 [(validate.rules).map = {ignore_empty: true, values: {string: {min_len: 3}}}];"><pre>map&lt;string, string&gt; x = 1 [(validate.rules).map = {ignore_empty: true, values: {string: {min_len: 3}}}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Well-Known Types (WKTs)</h3><a id="user-content-well-known-types-wkts" class="anchor" aria-label="Permalink: Well-Known Types (WKTs)" href="#well-known-types-wkts"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">A set of <a href="https://developers.google.com/protocol-buffers/docs/reference/google.protobuf" rel="nofollow">WKTs</a> are packaged with protoc and common message patterns
useful in many domains.</p>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Scalar Value Wrappers</h4><a id="user-content-scalar-value-wrappers" class="anchor" aria-label="Permalink: Scalar Value Wrappers" href="#scalar-value-wrappers"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">In the <code>proto3</code> syntax, there is no way of distinguishing between unset and the
zero value of a scalar field. The value WKTs permit this differentiation by
wrapping them in a message. PGV permits using the same scalar rules that the
wrapper encapsulates.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// if it is set, x must be greater than 3
    google.protobuf.Int32Value x = 1 [(validate.rules).int32.gt = 3];"><pre><span class="pl-c">// if it is set, x must be greater than 3</span>
    google.protobuf.Int32Value x = 1 [(validate.rules).int32.gt = 3];</pre></div>
<p dir="auto">Message Rules can also be used with scalar Well-Known Types (WKTs):</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// Ensures that if a value is not set for age, it would not pass the validation despite its zero value being 0.
message X {google.protobuf.Int32Value age = 1 [(validate.rules).int32.gt = -1, (validate.rules).message.required = true];}"><pre><span class="pl-c">// Ensures that if a value is not set for age, it would not pass the validation despite its zero value being 0.</span>
<span class="pl-k">message</span> <span class="pl-en">X</span> {<span class="pl-k">google.protobuf.Int32Value</span> <span class="pl-smi">age</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.int32<span class="pl-c1">.gt</span> = -<span class="pl-c1">1</span>, <span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.message<span class="pl-c1">.required</span> = <span class="pl-c1">true</span>];}</pre></div>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Anys</h4><a id="user-content-anys" class="anchor" aria-label="Permalink: Anys" href="#anys"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>required</strong>: this rule specifies that the field must be set</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x cannot be unset
google.protobuf.Any x = 1 [(validate.rules).any.required = true];"><pre><span class="pl-c">// x cannot be unset</span>
google.protobuf.Any x = 1 [(validate.rules).any.required = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for
the <code>type_url</code> value in this field. Consider using a <code>oneof</code> union instead
of <code>in</code> if possible.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must not be the Duration or Timestamp WKT
google.protobuf.Any x = 1 [(validate.rules).any = {not_in: [
    &quot;type.googleapis.com/google.protobuf.Duration&quot;,
    &quot;type.googleapis.com/google.protobuf.Timestamp&quot;
  ]}];"><pre><span class="pl-c">// x must not be the Duration or Timestamp WKT</span>
google.protobuf.Any x = 1 [(validate.rules).any = {not_in: [
    "type.googleapis.com/google.protobuf.Duration",
    "type.googleapis.com/google.protobuf.Timestamp"
  ]}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Durations</h4><a id="user-content-durations" class="anchor" aria-label="Permalink: Durations" href="#durations"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>required</strong>: this rule specifies that the field must be set</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x cannot be unset
google.protobuf.Duration x = 1 [(validate.rules).duration.required = true];"><pre><span class="pl-c">// x cannot be unset</span>
google.protobuf.Duration x = 1 [(validate.rules).duration.required = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must equal 1.5s exactly
google.protobuf.Duration x = 1 [(validate.rules).duration.const = {
    seconds: 1,
    nanos:   500000000
  }];"><pre><span class="pl-c">// x must equal 1.5s exactly</span>
google.protobuf.Duration x = 1 [(validate.rules).duration.const = {
    seconds: 1,
    nanos:   500000000
  }];</pre></div>
</li>
<li>
<p dir="auto"><strong>lt/lte/gt/gte</strong>: these inequalities (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, respectively)
allow for deriving ranges in which the field must reside.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be less than 10s
google.protobuf.Duration x = 1 [(validate.rules).duration.lt.seconds = 10];

// x must be greater than or equal to 20ns
google.protobuf.Duration x = 1 [(validate.rules).duration.gte.nanos = 20];

// x must be in the range [0s, 1s)
google.protobuf.Duration x = 1 [(validate.rules).duration = {
    gte: {},
    lt:  {seconds: 1}
  }];"><pre><span class="pl-c">// x must be less than 10s</span>
google.protobuf.Duration x = 1 [(validate.rules).duration.lt.seconds = 10];

<span class="pl-c">// x must be greater than or equal to 20ns</span>
google.protobuf.Duration x = 1 [(validate.rules).duration.gte.nanos = 20];

<span class="pl-c">// x must be in the range [0s, 1s)</span>
google.protobuf.Duration x = 1 [(validate.rules).duration = {
    gte: {},
    lt:  {seconds: 1}
  }];</pre></div>
<p dir="auto">Inverting the values of <code>lt(e)</code> and <code>gt(e)</code> is valid and creates an exclusive
range.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be outside the range [0s, 1s)
google.protobuf.Duration x = 1 [(validate.rules).duration = {
    lt:  {},
    gte: {seconds: 1}
  }];"><pre><span class="pl-c">// x must be outside the range [0s, 1s)</span>
google.protobuf.Duration x = 1 [(validate.rules).duration = {
    lt:  {},
    gte: {seconds: 1}
  }];</pre></div>
</li>
<li>
<p dir="auto"><strong>in/not_in</strong>: these two rules permit specifying allow/denylists for the
values of a field.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be either 0s or 1s
google.protobuf.Duration x = 1 [(validate.rules).duration = {in: [
    {},
    {seconds: 1}
  ]}];

// x cannot be 20s nor 500ns
google.protobuf.Duration x = 1 [(validate.rules).duration = {not_in: [
    {seconds: 20},
    {nanos: 500}
  ]}];"><pre><span class="pl-c">// x must be either 0s or 1s</span>
google.protobuf.Duration x = 1 [(validate.rules).duration = {in: [
    {},
    {seconds: 1}
  ]}];

<span class="pl-c">// x cannot be 20s nor 500ns</span>
google.protobuf.Duration x = 1 [(validate.rules).duration = {not_in: [
    {seconds: 20},
    {nanos: 500}
  ]}];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 class="heading-element" dir="auto">Timestamps</h4><a id="user-content-timestamps" class="anchor" aria-label="Permalink: Timestamps" href="#timestamps"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>required</strong>: this rule specifies that the field must be set</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x cannot be unset
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.required = true];"><pre><span class="pl-c">// x cannot be unset</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.required = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>const</strong>: the field must be <em>exactly</em> the specified value.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must equal 2009/11/10T23:00:00.500Z exactly
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.const = {
    seconds: 63393490800,
    nanos:   500000000
  }];"><pre><span class="pl-c">// x must equal 2009/11/10T23:00:00.500Z exactly</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.const = {
    seconds: 63393490800,
    nanos:   500000000
  }];</pre></div>
</li>
<li>
<p dir="auto"><strong>lt/lte/gt/gte</strong>: these inequalities (<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, respectively)
allow for deriving ranges in which the field must reside.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be less than the Unix Epoch
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.lt.seconds = 0];

// x must be greater than or equal to 2009/11/10T23:00:00Z
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.gte.seconds = 63393490800];

// x must be in the range [epoch, 2009/11/10T23:00:00Z)
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    gte: {},
    lt:  {seconds: 63393490800}
  }];"><pre><span class="pl-c">// x must be less than the Unix Epoch</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.lt.seconds = 0];

<span class="pl-c">// x must be greater than or equal to 2009/11/10T23:00:00Z</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.gte.seconds = 63393490800];

<span class="pl-c">// x must be in the range [epoch, 2009/11/10T23:00:00Z)</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    gte: {},
    lt:  {seconds: 63393490800}
  }];</pre></div>
<p dir="auto">Inverting the values of <code>lt(e)</code> and <code>gt(e)</code> is valid and creates an exclusive
range.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be outside the range [epoch, 2009/11/10T23:00:00Z)
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    lt:  {},
    gte: {seconds: 63393490800}
  }];"><pre><span class="pl-c">// x must be outside the range [epoch, 2009/11/10T23:00:00Z)</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    lt:  {},
    gte: {seconds: 63393490800}
  }];</pre></div>
</li>
<li>
<p dir="auto"><strong>lt_now/gt_now</strong>: these inequalities allow for ranges relative to the current
time. These rules cannot be used with the absolute rules above.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be less than the current timestamp
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.lt_now = true];"><pre><span class="pl-c">// x must be less than the current timestamp</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.lt_now = true];</pre></div>
</li>
<li>
<p dir="auto"><strong>within</strong>: this rule specifies that the field's value should be within a
duration of the current time. This rule can be used in conjunction
with <code>lt_now</code> and <code>gt_now</code> to control those ranges.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="// x must be within ±1s of the current time
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.within.seconds = 1];

// x must be within the range (now, now+1h)
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    gt_now: true,
    within: {seconds: 3600}
  }];"><pre><span class="pl-c">// x must be within ±1s of the current time</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp.within.seconds = 1];

<span class="pl-c">// x must be within the range (now, now+1h)</span>
google.protobuf.Timestamp x = 1 [(validate.rules).timestamp = {
    gt_now: true,
    within: {seconds: 3600}
  }];</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Message-Global</h3><a id="user-content-message-global" class="anchor" aria-label="Permalink: Message-Global" href="#message-global"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>disabled</strong>: All validation rules for the fields on a message can be
nullified, including any message fields that support validation themselves.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="message Person {
  option (validate.disabled) = true;

  // x will not be required to be greater than 123
  uint64 x = 1 [(validate.rules).uint64.gt = 123];

  // y's fields will not be validated
  Person y = 2;
}"><pre><span class="pl-k">message</span> <span class="pl-en">Person</span> {
  <span class="pl-k">option</span> <span class="pl-c1">(validate<span class="pl-c1">.disabled</span>)</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>;

  <span class="pl-c">// x will not be required to be greater than 123</span>
  <span class="pl-k">uint64</span> <span class="pl-smi">x</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.uint64<span class="pl-c1">.gt</span> = <span class="pl-c1">123</span>];

  <span class="pl-c">// y's fields will not be validated</span>
  <span class="pl-k">Person</span> <span class="pl-smi">y</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>;
}</pre></div>
</li>
<li>
<p dir="auto"><strong>ignored</strong>: Don't generate a validate method or any related validation code
for this message.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="message Person {
  option (validate.ignored) = true;

  // x will not be required to be greater than 123
  uint64 x = 1 [(validate.rules).uint64.gt = 123];

  // y's fields will not be validated
  Person y = 2;
}"><pre><span class="pl-k">message</span> <span class="pl-en">Person</span> {
  <span class="pl-k">option</span> <span class="pl-c1">(validate<span class="pl-c1">.ignored</span>)</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>;

  <span class="pl-c">// x will not be required to be greater than 123</span>
  <span class="pl-k">uint64</span> <span class="pl-smi">x</span> <span class="pl-k">=</span> <span class="pl-c1">1</span> [<span class="pl-c1">(validate<span class="pl-c1">.rules</span>)</span>.uint64<span class="pl-c1">.gt</span> = <span class="pl-c1">123</span>];

  <span class="pl-c">// y's fields will not be validated</span>
  <span class="pl-k">Person</span> <span class="pl-smi">y</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>;
}</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">OneOfs</h3><a id="user-content-oneofs" class="anchor" aria-label="Permalink: OneOfs" href="#oneofs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong>required</strong>: require that one of the fields in a <code>oneof</code> must be set. By
default, none or one of the unioned fields can be set. Enabling this rules
disallows having all of them unset.</p>
<div class="highlight highlight-source-proto notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="oneof id {
  // either x, y, or z must be set.
  option (validate.required) = true;

  string x = 1;
  int32  y = 2;
  Person z = 3;
}"><pre>oneof id {
  <span class="pl-c">// either x, y, or z must be set.</span>
  <span class="pl-k">option</span> <span class="pl-c1">(validate<span class="pl-c1">.required</span>)</span> <span class="pl-k">=</span> <span class="pl-c1">true</span>;

  string x = 1;
  int32  y = 2;
  Person z = 3;
}</pre></div>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h2 class="heading-element" dir="auto">Development</h2><a id="user-content-development" class="anchor" aria-label="Permalink: Development" href="#development"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">PGV is written in Go on top of the <a href="https://github.com/bufbuild/protoc-gen-star">protoc-gen-star</a> framework and compiles
to a standalone binary.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Dependencies</h3><a id="user-content-dependencies-1" class="anchor" aria-label="Permalink: Dependencies" href="#dependencies-1"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">All PGV dependencies are currently checked into the project. To test
PGV, <code>protoc</code> must be installed, either from <a href="https://github.com/google/protobuf">source</a>, the
provided <a href="https://github.com/google/protobuf/releases">releases</a>, or a package manager. The official protoc
plugin for the target language(s) should be installed as well.</p>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Make Targets</h3><a id="user-content-make-targets" class="anchor" aria-label="Permalink: Make Targets" href="#make-targets"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li>
<p dir="auto"><strong><code>make build</code></strong>: generates the constraints proto and compiles PGV
into <code>$GOPATH/bin</code></p>
</li>
<li>
<p dir="auto"><strong><code>make lint</code></strong>: runs static-analysis rules against the PGV codebase,
including <code>golint</code>, <code>go vet</code>, and <code>gofmt -s</code></p>
</li>
<li>
<p dir="auto"><strong><code>make testcases</code></strong>: generates the proto files
in <a href="/tests/harness/cases"><code>/tests/harness/cases</code></a>. These are used by the test
harness to verify the validation rules generated for each language.</p>
</li>
<li>
<p dir="auto"><strong><code>make harness</code></strong>: executes the test-cases against each language's test
harness.</p>
</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Run all tests under Bazel</h3><a id="user-content-run-all-tests-under-bazel" class="anchor" aria-label="Permalink: Run all tests under Bazel" href="#run-all-tests-under-bazel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">Ensure that your <code>PATH</code> is setup to include <code>protoc-gen-go</code> and <code>protoc</code>, then:</p>
<div class="snippet-clipboard-content notranslate position-relative overflow-auto" data-snippet-clipboard-copy-content="bazel test //tests/..."><pre class="notranslate"><code>bazel test //tests/...
</code></pre></div>
<div class="markdown-heading" dir="auto"><h3 class="heading-element" dir="auto">Docker</h3><a id="user-content-docker" class="anchor" aria-label="Permalink: Docker" href="#docker"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto">PGV comes with a <a href="/Dockerfile">Dockerfile</a> for consistent development tooling
and CI. The main entrypoint is <code>make</code> with <code>build</code> as the default target.</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto" data-snippet-clipboard-copy-content="# build the image
docker build -t bufbuild/protoc-gen-validate .

# executes the default make target: build
docker run --rm \
  bufbuild/protoc-gen-validate

# executes the 'ci' make target
docker run --rm \
  bufbuild/protoc-gen-validate ci

# executes the 'build' &amp; 'testcases' make targets
docker run --rm \
  bufbuild/protoc-gen-validate build testcases

# override the entrypoint and interact with the container directly
# this can be useful when wanting to run bazel commands without
# bazel installed locally.
docker run --rm \
 -it --entrypoint=/bin/bash \
 bufbuild/protoc-gen-validate"><pre><span class="pl-c"><span class="pl-c">#</span> build the image</span>
docker build -t bufbuild/protoc-gen-validate <span class="pl-c1">.</span>

<span class="pl-c"><span class="pl-c">#</span> executes the default make target: build</span>
docker run --rm \
  bufbuild/protoc-gen-validate

<span class="pl-c"><span class="pl-c">#</span> executes the 'ci' make target</span>
docker run --rm \
  bufbuild/protoc-gen-validate ci

<span class="pl-c"><span class="pl-c">#</span> executes the 'build' &amp; 'testcases' make targets</span>
docker run --rm \
  bufbuild/protoc-gen-validate build testcases

<span class="pl-c"><span class="pl-c">#</span> override the entrypoint and interact with the container directly</span>
<span class="pl-c"><span class="pl-c">#</span> this can be useful when wanting to run bazel commands without</span>
<span class="pl-c"><span class="pl-c">#</span> bazel installed locally.</span>
docker run --rm \
 -it --entrypoint=/bin/bash \
 bufbuild/protoc-gen-validate</pre></div>
</article></div>